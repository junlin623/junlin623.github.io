<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/6/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Linux中安装MySQL-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/Linux%E4%B8%AD%E5%AE%89%E8%A3%85MySQL-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.115Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17062850.html">https://www.cnblogs.com/junlin623/p/17062850.html</a></p>
<hr>
<p>title: ‘Linux中安装MySQL-junlin623’<br>date: 2023-01-20 19:26:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="1-卸载系统自带的mariadb"><a href="#1-卸载系统自带的mariadb" class="headerlink" title="1. 卸载系统自带的mariadb"></a>1. 卸载系统自带的mariadb</h3><p>我这里使用的是Centos7, 所以系统会自带Mariadb，需要先卸载掉，当然后面在安装mysql的过程中也会有提示</p>
<ul>
<li><p>查询已安装的 Mariadb 安装包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mariadb</span><br></pre></td></tr></table></figure>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120154805978-1858696207.png"></p>
</li>
<li><p>将所有的都卸载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove xxx</span><br></pre></td></tr></table></figure>

<p>我这里只有一个，如果有多个需要全部删除</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120154958296-2098689670.png" width="50%" ></li>
</ul>
<h3 id="2-下载mysql安装包-https-www-mysql-com-downloads"><a href="#2-下载mysql安装包-https-www-mysql-com-downloads" class="headerlink" title="2. 下载mysql安装包 (https://www.mysql.com/downloads/)"></a>2. 下载mysql安装包 (<a target="_blank" rel="noopener" href="https://www.mysql.com/downloads/">https://www.mysql.com/downloads/</a>)</h3><p>  选择开源免费的社区版进行下载：</p>
  <img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120155632081-1677341645.png" width="50%" >
  
  <img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120155707113-1379371888.png" width="50%" >
  
<p>  选择操作系统：</p>
<p>  这里没有centos版本，选择红帽就好</p>
  <img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120160043951-867206237.png" width="50%" >
  
<p>  我这里是Centos 7.9， x86架构：</p>
  <img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120160137509-1096432500.png" width="50%" >

<p>  下载第一个rpm捆绑包，</p>
  <img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120161809220-973202704.png" width="50%" >

<p>  捆绑包中会包含以下内容，就不用自己一个一个下载了</p>
<ul>
<li><p>mysql-community-server数据库服务器和相关工具</p>
</li>
<li><p>mysql-community-clientMySQL客户端应用程序和工具</p>
</li>
<li><p>mysql-community-libsMySQL数据库客户端应用程序的共享库</p>
</li>
<li><p>mysql-community-common服务器和客户端库的通用文件</p>
</li>
<li><p>mysql-community-libs-compat以前的MySQL安装的共享兼容性库</p>
</li>
</ul>
<h3 id="3-正式进行安装"><a href="#3-正式进行安装" class="headerlink" title="3.正式进行安装"></a>3.正式进行安装</h3><ul>
<li>在 &#x2F;opt 目录下新建mysql文件夹, 将下载的安装包推送到该目录下</li>
</ul>
<p>  <img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120163300834-799289977.png"></p>
<ul>
<li>在 &#x2F;opt&#x2F;mysql目录下解压安装包:</li>
</ul>
   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> gzip mysql-8.0.32-1.el7.x86_64.rpm-bundle.tar  # 会将.tar文件变成 .tar.gz文件</span><br><span class="line"> tar -zxvf mysql-8.0.32-1.el7.x86_64.rpm-bundle.tar.gz  # 解压</span><br><span class="line"> ```    </span><br><span class="line">![](https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120163909010-1167989160.png)</span><br><span class="line"></span><br><span class="line">* 前置检查</span><br><span class="line">    </span><br><span class="line">  由于mysql安装过程中，会通过mysql用户在/tmp目录下新建tmp_db文件，所以需要给 /tmp 目录较大的权限。</span><br><span class="line"></span><br><span class="line">  ```shell</span><br><span class="line">  chmod -R 777 /tmp</span><br></pre></td></tr></table></figure>

<pre><code>检查依赖：

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep libaio</span><br></pre></td></tr></table></figure>

如果没有的话需要执行 `yum install -y libaio-devel.x86_64` 进行安装

![](https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120163931145-9967329.png)

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep net-tools</span><br></pre></td></tr></table></figure>
如果没有的话需要执行 `yum install net-tools` 进行安装

![](https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120163958771-83516685.png)
</code></pre>
<ul>
<li><p>开始安装</p>
<p>依次执行以下命令，注意一定要按顺序，因为会有依赖关系</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh mysql-community-common-8.0.32-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-client-plugins-8.0.32-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-libs-8.0.32-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-client-8.0.32-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-icu-data-files-8.0.32-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-server-8.0.32-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120165059869-2067794642.png"></p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120165120557-805461891.png"></p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120165139670-1424432682.png"></p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120165209520-391108845.png"></p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120165617021-981341403.png"></p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120165717385-1645004215.png"></p>
</li>
</ul>
<h3 id="4-验证mysql是否安装成功："><a href="#4-验证mysql是否安装成功：" class="headerlink" title="4.验证mysql是否安装成功："></a>4.验证mysql是否安装成功：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql --version  //查看版本</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep -i mysql</span><br></pre></td></tr></table></figure>

<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120165924374-1882948912.png"></p>
<h3 id="5-服务的初始化"><a href="#5-服务的初始化" class="headerlink" title="5.服务的初始化"></a>5.服务的初始化</h3><p>为了保证数据库目录与文件的所有者为 mysql 登录用户，如果你是以 root 身份运行 mysql 服务，需要执行下面的命令初始化：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize --user=mysql</span><br></pre></td></tr></table></figure>

<p>说明： –initialize 选项默认以“安全”模式来初始化，则会为 root 用户生成一个密码并将 该密码标记为过期 ，登录后你需要设置一个新的密码。生成的临时密码 会在日志中记录一份。</p>
<p>查看密码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /var/log/mysqld.log</span><br></pre></td></tr></table></figure>

<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120172033236-575004250.png"></p>
<h3 id="6-启动mysql服务"><a href="#6-启动mysql服务" class="headerlink" title="6.启动mysql服务"></a>6.启动mysql服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld.service  # 启动mysql服务</span><br><span class="line">systemctl status mysqld.service  # 查看mysql服务的状态</span><br><span class="line">````</span><br><span class="line"></span><br><span class="line">![](https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120172334480-1480753086.png)</span><br><span class="line"></span><br><span class="line">默认情况下mysql服务是开机自启的</span><br><span class="line"></span><br><span class="line">![](https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120172538565-2101865355.png)</span><br><span class="line"></span><br><span class="line">如不是enabled可以运行如下命令设置开机自启动</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">systemctl enable mysqld.service</span><br></pre></td></tr></table></figure>


<h3 id="7-登录mysql"><a href="#7-登录mysql" class="headerlink" title="7.登录mysql"></a>7.登录mysql</h3><p>用前面我们查看的密码进行登录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure>

<p>输入密码</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120173028501-1073105661.png"></p>
<h3 id="8-重置密码"><a href="#8-重置密码" class="headerlink" title="8.重置密码"></a>8.重置密码</h3><p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120173145486-1897849121.png"></p>
<p>执行了一个命令提示我们要修改密码（因为初始化密码默认是过期的，所以查看数据库会报错）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;xxx&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120173328370-1808048379.png"></p>
<p>重新登录一下mysql即可</p>
<h3 id="9-Windows远程连接"><a href="#9-Windows远程连接" class="headerlink" title="9.Windows远程连接"></a>9.Windows远程连接</h3><p>这里使用的windows客户端软件是SQLYog</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120174116032-1186191426.png"></p>
<p>测试连接失败, 这是由于Mysql配置了不支持远程连接</p>
<ul>
<li>到远程Linux主机中查看3306端口是否开放</li>
</ul>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120174433517-153855103.png"></p>
<ul>
<li><p>到远程Linux主机中设置防火墙 （Linux中防火墙的基本使用：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17062973.html%EF%BC%89">https://www.cnblogs.com/junlin623/p/17062973.html）</a> 放行3306端口的数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent  #放行3306端口</span><br><span class="line">systemctl restart firewalld.service #重启防火墙</span><br><span class="line">firewall-cmd --reload  #重新载入配置</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120180230177-741722766.png"></p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120181332307-827662909.png"></p>
<ul>
<li>Linux中不允许远程主机通过root用户登录问题</li>
</ul>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120180631115-2104383340.png"></p>
<p>可以看到root用户对应的主机是localhost也就是自身主机</p>
<p>Host列指定了允许用户登录所使用的IP，比如User&#x3D;root Host&#x3D;192.168.1.1, 意思就是说root用户只能通过192.168.1.1的客户端去访问; User&#x3D;root Host&#x3D;localhost，表示只能通过本机客户端去访问。而 %是个通配符 ，如果Host&#x3D;192.168.1.%，那么就表示只要是IP地址前缀为“192.168.1.”的客户端都可以连接。如果 Host&#x3D;% ，表示所有IP都有连接权限。</p>
<p>注意：在生产环境下不能为了省事将host设置为%，这样做会存在安全问题，具体的设置可以根据生产环境的IP进行设置。</p>
<p>我们需要将mysql数据库user表中的root用户这个记录对应的主机进行修改</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> host<span class="operator">=</span><span class="string">&#x27;%&#x27;</span> <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120180927023-128197425.png"></p>
<p>修改成功：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120181018141-257561929.png"></p>
<p>刷新一下权限：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120181059735-1015029628.png"></p>
<p>此时出现了新的报错：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120181448946-1209973885.png"></p>
<p>这个问题只会在mysql 8.0版本中出现， 原因是MySQL8.0对密码进行了加密</p>
<p>远程Linux主机下登录数据库，执行：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;   <span class="comment">--这里的密码随便设置</span></span><br></pre></td></tr></table></figure>

<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120182127934-759462516.png"></p>
<p>sqlyog中重新连接成功：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120182206659-1648139669.png"></p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230120182310943-205498634.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/Linux%E4%B8%AD%E5%AE%89%E8%A3%85MySQL-junlin623/" data-id="clhrwhxjf000m8gsz1w0k22eh" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Linux防火墙的使用-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/Linux%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E4%BD%BF%E7%94%A8-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.113Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17062973.html">https://www.cnblogs.com/junlin623/p/17062973.html</a></p>
<hr>
<p>title: ‘Linux防火墙的使用-junlin623’<br>date: 2023-01-20 17:56:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h4 id="防火墙放行端口"><a href="#防火墙放行端口" class="headerlink" title="防火墙放行端口"></a>防火墙放行端口</h4><p>kali中需要进行安装（Centos7及之后的版本是自带的，无需安装）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install firewalld</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#查看防火墙服务的状态</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state</span></span><br><span class="line">not running</span><br><span class="line"></span><br><span class="line"><span class="comment">#开启服务</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># systemctl start firewalld.service </span></span><br><span class="line">                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state             </span></span><br><span class="line">running</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看3350端口是否被放行</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --query-port=3350/tcp</span></span><br><span class="line">no</span><br><span class="line"></span><br><span class="line"><span class="comment">#放行3350端口</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --zone=public --add-port=3350/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="刷新生效"><a href="#刷新生效" class="headerlink" title="刷新生效"></a>刷新生效</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service <span class="comment">#重启防火墙</span></span><br><span class="line">firewall-cmd --reload  <span class="comment">#重新载入配置</span></span><br></pre></td></tr></table></figure>

<h4 id="查看防火墙放行列表"><a href="#查看防火墙放行列表" class="headerlink" title="查看防火墙放行列表"></a>查看防火墙放行列表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>

<h4 id="其他命令："><a href="#其他命令：" class="headerlink" title="其他命令："></a>其他命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state                           <span class="comment">#查看防火墙状态，是否是running</span></span><br><span class="line">firewall-cmd --reload                          <span class="comment">#重新载入配置，比如添加规则之后，需要执行此命令</span></span><br><span class="line">firewall-cmd --get-zones                       <span class="comment">#列出支持的zone</span></span><br><span class="line">firewall-cmd --get-services                    <span class="comment">#列出支持的服务，在列表中的服务是放行的</span></span><br><span class="line">firewall-cmd --query-service ftp               <span class="comment">#查看ftp服务是否支持，返回yes或者no</span></span><br><span class="line">firewall-cmd --add-service=ftp                 <span class="comment">#临时开放ftp服务</span></span><br><span class="line">firewall-cmd --add-service=ftp --permanent     <span class="comment">#永久开放ftp服务</span></span><br><span class="line">firewall-cmd --remove-service=ftp --permanent  <span class="comment">#永久移除ftp服务</span></span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent     <span class="comment">#永久添加80端口 </span></span><br><span class="line">firewall-cmd --remove-port=80/tcp --permanent  <span class="comment">#永久移除80端口</span></span><br><span class="line">firewall-cmd --list-ports                      <span class="comment">#查看已经开放的端口</span></span><br><span class="line">iptables -L -n                                 <span class="comment">#查看规则，这个命令是和iptables的相同的</span></span><br><span class="line">man firewall-cmd                               <span class="comment">#查看帮助</span></span><br></pre></td></tr></table></figure>

<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/Linux%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E4%BD%BF%E7%94%A8-junlin623/" data-id="clhrwhxjh000p8gsz6o6sh02n" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Leetcode11~20题整理-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/Leetcode11~20%E9%A2%98%E6%95%B4%E7%90%86-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.111Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17379367.html">https://www.cnblogs.com/junlin623/p/17379367.html</a></p>
<hr>
<p>title: ‘Leetcode11~20题整理-junlin623’<br>date: 2023-05-07 15:13:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h4 id="11-盛最多水的容器"><a href="#11-盛最多水的容器" class="headerlink" title="11. 盛最多水的容器"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/container-with-most-water/">11. 盛最多水的容器</a></h4><blockquote>
<p>比较暴力的做法：</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxArea</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; h)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; t;</span><br><span class="line">        <span class="type">int</span> n = h.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> res = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; (<span class="type">int</span>)t.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">                res = <span class="built_in">max</span>(res, (i - t[j]) * <span class="built_in">min</span>(h[i], h[t[j]]));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!t.<span class="built_in">size</span>() || h[i] &gt; h[t.<span class="built_in">back</span>()]) t.<span class="built_in">push_back</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>正解，双指针</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxArea</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; h)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>, j = h.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j) &#123;</span><br><span class="line">            res = <span class="built_in">max</span>(res, (j - i) * <span class="built_in">min</span>(h[j], h[i]));</span><br><span class="line">            <span class="keyword">if</span>(h[i] &gt; h[j]) j--;</span><br><span class="line">            <span class="keyword">else</span> i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h4 id="12-整数转罗马数字"><a href="#12-整数转罗马数字" class="headerlink" title="12. 整数转罗马数字"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/integer-to-roman/">12. 整数转罗马数字</a></h4><p>找规律，将几个特殊的表示存下来，</p>
<p>比如num &#x3D; 1254， res &#x3D; “”</p>
<p>1254 ≥  1000，则num &#x3D; 1254 - 1000 &#x3D; 254, res &#x3D; “M”</p>
<p>254 ≥ 100, num &#x3D; 254 - 100 &#x3D; 154, res &#x3D; “MC”</p>
<p>154 ≥ 100, num &#x3D; 154 - 100 &#x3D; 54, res &#x3D; “MCC”</p>
<p>54 ≥ 50. num &#x3D; 54 - 50 &#x3D; 4, res &#x3D; “MCCL”</p>
<p>4 ≥ 4, num &#x3D; 4 - 4 &#x3D; 0, res &#x3D; “MCCLIV”</p>
<p><img src="https://secure2.wostatic.cn/static/kSbrBUzNwnpqYBUaAtuKBn/image.png?auth_key=1683431062-qFTn4Z1A6x5TLHjxHwK46W-0-4e395345a7461aa81c8a0aad5d56d519"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">intToRoman</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> values[] = &#123;</span><br><span class="line">            <span class="number">1000</span>,</span><br><span class="line">            <span class="number">900</span>, <span class="number">500</span>, <span class="number">400</span>, <span class="number">100</span>,</span><br><span class="line">            <span class="number">90</span>, <span class="number">50</span>, <span class="number">40</span>, <span class="number">10</span>,</span><br><span class="line">            <span class="number">9</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">1</span></span><br><span class="line">        &#125;;</span><br><span class="line">        string reps[] = &#123;</span><br><span class="line">            <span class="string">&quot;M&quot;</span>,</span><br><span class="line">            <span class="string">&quot;CM&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;CD&quot;</span>, <span class="string">&quot;C&quot;</span>,</span><br><span class="line">            <span class="string">&quot;XC&quot;</span>, <span class="string">&quot;L&quot;</span>, <span class="string">&quot;XL&quot;</span>, <span class="string">&quot;X&quot;</span>,</span><br><span class="line">            <span class="string">&quot;IX&quot;</span>, <span class="string">&quot;V&quot;</span>, <span class="string">&quot;IV&quot;</span>, <span class="string">&quot;I&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        string res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">13</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span>(num &gt;= values[i]) &#123;</span><br><span class="line">                num -= values[i];</span><br><span class="line">                res += reps[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h4 id="13-罗马数字转整数"><a href="#13-罗马数字转整数" class="headerlink" title="13. 罗马数字转整数"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/roman-to-integer/">13. 罗马数字转整数</a></h4><p>特殊情况是下面几个，其他的都是直接将字符表示的阿拉伯数字相加，所以遇到一个字符表示的阿拉伯数字比后面字符的阿拉伯数字要小的话说明就是下面这种情况</p>
<p>I 可以放在 V (5) 和 X (10) 的左边，来表示 4 和 9。<br>X 可以放在 L (50) 和 C (100) 的左边，来表示 40 和 90。 <br>C 可以放在 D (500) 和 M (1000) 的左边，来表示 400 和 900。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">romanToInt</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">char</span>, <span class="type">int</span>&gt; hs;</span><br><span class="line">        hs[<span class="string">&#x27;I&#x27;</span>] = <span class="number">1</span>, hs[<span class="string">&#x27;V&#x27;</span>] = <span class="number">5</span>;</span><br><span class="line">        hs[<span class="string">&#x27;X&#x27;</span>] = <span class="number">10</span>, hs[<span class="string">&#x27;L&#x27;</span>] = <span class="number">50</span>,</span><br><span class="line">        hs[<span class="string">&#x27;C&#x27;</span>] = <span class="number">100</span>, hs[<span class="string">&#x27;D&#x27;</span>] = <span class="number">500</span>,</span><br><span class="line">        hs[<span class="string">&#x27;M&#x27;</span>] = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; s.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i + <span class="number">1</span> &lt; s.<span class="built_in">size</span>() &amp;&amp; hs[s[i]] &lt; hs[s[i + <span class="number">1</span>]]) &#123;</span><br><span class="line">                res -= hs[s[i]];</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                res += hs[s[i]];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h4 id="14-最长公共前缀"><a href="#14-最长公共前缀" class="headerlink" title="14. 最长公共前缀"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/longest-common-prefix/">14. 最长公共前缀</a></h4><p>以第一个字符串为基准，不断增加公共前缀的长度，直到strs中有任何一个字符串不满足即退出</p>
<blockquote>
<p>方法一：</p>
</blockquote>
<p>会造成很多冗余匹配，复杂度较高</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">longestCommonPrefix</span><span class="params">(vector&lt;string&gt;&amp; strs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!strs.<span class="built_in">size</span>()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        string prefix = strs[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> count = strs.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; count; ++i) &#123;</span><br><span class="line">            prefix = <span class="built_in">longestCommonPrefix</span>(prefix, strs[i]);</span><br><span class="line">            <span class="keyword">if</span> (!prefix.<span class="built_in">size</span>()) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prefix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">string <span class="title">longestCommonPrefix</span><span class="params">(<span class="type">const</span> string&amp; str1, <span class="type">const</span> string&amp; str2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> length = <span class="built_in">min</span>(str1.<span class="built_in">size</span>(), str2.<span class="built_in">size</span>());</span><br><span class="line">        <span class="type">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (index &lt; length &amp;&amp; str1[index] == str2[index]) &#123;</span><br><span class="line">            ++index;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str1.<span class="built_in">substr</span>(<span class="number">0</span>, index);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<blockquote>
<p>方法二：</p>
</blockquote>
<p>最多遍历所有字符串的字符个数之和</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">longestCommonPrefix</span><span class="params">(vector&lt;string&gt;&amp; strs)</span> </span>&#123;</span><br><span class="line">        string res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(strs.<span class="built_in">size</span>() == <span class="number">0</span>) <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; ; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i &gt;= strs[<span class="number">0</span>].<span class="built_in">size</span>()) <span class="keyword">return</span> res;</span><br><span class="line">            <span class="type">char</span> ch = strs[<span class="number">0</span>][i];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt; strs.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(i &gt;= strs[j].<span class="built_in">size</span>() || strs[j][i] != ch) &#123;</span><br><span class="line">                    <span class="keyword">return</span> res;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            res += ch;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h4 id="15-三数之和"><a href="#15-三数之和" class="headerlink" title="15. 三数之和"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/3sum/">15. 三数之和</a></h4><p>为了避免重复，我们保证三个数对以不降序排列，所有需要先将整个数组排序</p>
<p>枚举第一个数字然后转换成两数之和的问题，这里的两数之和要求找到所有满足条件的而不是像第一题那样只用找一个，所以要用双指针算法来找，具体如下：</p>
<p><code>sum = nums[i] + nums[j]</code></p>
<ul>
<li>若 <code>sum &gt; tar</code>，则<code>i</code>往左走，令<code>sum</code>变小</li>
<li>若<code>sum &lt; tar</code>，则<code>j</code>往右走，令<code>sum</code>变大</li>
<li>若<code>sum == tar</code>，则表示找到了一对，此时<code>i</code>往右走，<code>j</code>往左走，在此期间为了枚举重复，需要在指针移动的时候判重</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">twoSum</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> tar, <span class="type">int</span> x) &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = l, j = r; i &lt; j;) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] + nums[j] &lt; tar) &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i] + nums[j] &gt; tar) &#123;</span><br><span class="line">                j--;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                res.<span class="built_in">push_back</span>(&#123;x, nums[i], nums[j]&#125;);</span><br><span class="line">                <span class="keyword">while</span>(i &lt; j &amp;&amp; nums[i] == nums[i + <span class="number">1</span>]) i++;</span><br><span class="line">                <span class="keyword">while</span>(i &lt; j &amp;&amp; nums[j] == nums[j - <span class="number">1</span>]) j--;</span><br><span class="line">                i++, j--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">threeSum</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i &amp;&amp; nums[i] == nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">auto</span> t = <span class="built_in">twoSum</span>(nums, i + <span class="number">1</span>, n - <span class="number">1</span>, -nums[i], nums[i]);</span><br><span class="line">            res.<span class="built_in">insert</span>(res.<span class="built_in">end</span>(), t.<span class="built_in">begin</span>(), t.<span class="built_in">end</span>());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>试探性的减：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">threeSum</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i &amp;&amp; nums[i] == nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = i + <span class="number">1</span>, k = nums.<span class="built_in">size</span>() - <span class="number">1</span>; j &lt; k; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(j &gt; i + <span class="number">1</span> &amp;&amp; nums[j] == nums[j - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">while</span>(j &lt; k - <span class="number">1</span> &amp;&amp; nums[i] + nums[j] + nums[k - <span class="number">1</span>] &gt;= <span class="number">0</span>) k-- ;</span><br><span class="line">                <span class="keyword">if</span>(nums[i] + nums[j] + nums[k] == <span class="number">0</span>) &#123;</span><br><span class="line">                    res.<span class="built_in">push_back</span>(&#123;nums[i], nums[j], nums[k]&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h4 id="16-最接近的三数之和"><a href="#16-最接近的三数之和" class="headerlink" title="16. 最接近的三数之和"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/3sum-closest/">16. 最接近的三数之和</a></h4><p>和上一题差不多，只不过是需要找到大于等于target最小的三数和以及小于等于target最大的三数和，然后两个差值的绝对值取最小值对应的和就是答案</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">threeSumClosest</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">        <span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">res</span><span class="params">(INT_MAX, INT_MAX)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i &amp;&amp; nums[i] == nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = i + <span class="number">1</span>, k = n - <span class="number">1</span>; j &lt; k; j++) &#123;</span><br><span class="line">                <span class="keyword">while</span>(j &lt; k - <span class="number">1</span> &amp;&amp; nums[i] + nums[j] + nums[k - <span class="number">1</span>] &gt;= target) k--;</span><br><span class="line">                <span class="type">int</span> sum = nums[i] + nums[j] + nums[k];</span><br><span class="line">                res = <span class="built_in">min</span>(res, &#123;<span class="built_in">abs</span>(sum - target), sum&#125;);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(k - <span class="number">1</span> &gt; j) &#123;</span><br><span class="line">                    sum = nums[i] + nums[j] + nums[k - <span class="number">1</span>];</span><br><span class="line">                    res = <span class="built_in">min</span>(res, &#123;target - sum, sum&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res.second;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h4 id="17-电话号码的字母组合"><a href="#17-电话号码的字母组合" class="headerlink" title="17. 电话号码的字母组合"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/letter-combinations-of-a-phone-number/">17. 电话号码的字母组合</a></h4><p>dfs爆搜</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string hs[<span class="number">11</span>] = &#123;<span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;abc&quot;</span>, <span class="string">&quot;def&quot;</span>, <span class="string">&quot;ghi&quot;</span>, <span class="string">&quot;jkl&quot;</span>, <span class="string">&quot;mno&quot;</span>, <span class="string">&quot;pqrs&quot;</span>, <span class="string">&quot;tuv&quot;</span>, <span class="string">&quot;wxyz&quot;</span>&#125;;</span><br><span class="line">    vector&lt;string&gt; res;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, string s, string digits)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(u == digits.<span class="built_in">size</span>()) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s != <span class="string">&quot;&quot;</span>)</span><br><span class="line">                res.<span class="built_in">push_back</span>(s);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> idx = digits[u] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> c : hs[idx]) &#123;</span><br><span class="line">            s = s + c;</span><br><span class="line">            <span class="built_in">dfs</span>(u + <span class="number">1</span>, s, digits);</span><br><span class="line">            s.<span class="built_in">pop_back</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">letterCombinations</span><span class="params">(string digits)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span>, <span class="string">&quot;&quot;</span>, digits);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h4 id="18-四数之和"><a href="#18-四数之和" class="headerlink" title="18. 四数之和"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/4sum/">18. 四数之和</a></h4><p>和三数之和一样，只不过是枚举i和j，然后k和u使用双指针算法</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">fourSum</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i &amp;&amp; nums[i] == nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(j &gt; i + <span class="number">1</span> &amp;&amp; nums[j] == nums[j - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k = j + <span class="number">1</span>, u = n - <span class="number">1</span>; k &lt; u; k++) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(k &gt; j + <span class="number">1</span> &amp;&amp; nums[k] == nums[k - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">while</span>(k &lt; u - <span class="number">1</span> &amp;&amp; <span class="number">1ll</span> * nums[i] + nums[j] + nums[k] + nums[u - <span class="number">1</span>] &gt;= target) u--;</span><br><span class="line">                    <span class="keyword">if</span>(<span class="number">1ll</span> * nums[i] + nums[j] + nums[k] + nums[u] == target) &#123;</span><br><span class="line">                        res.<span class="built_in">push_back</span>(&#123;nums[i], nums[j], nums[k], nums[u]&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h4 id="19-删除链表的倒数第-N-个结点"><a href="#19-删除链表的倒数第-N-个结点" class="headerlink" title="19. 删除链表的倒数第 N 个结点"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/remove-nth-node-from-end-of-list/">19. 删除链表的倒数第 N 个结点</a></h4><blockquote>
<p>方法一：</p>
</blockquote>
<p>先对链表进行一次遍历，得到节点总数，然后遍历倒数第n+1个点（因为删除时需要知道前面一个点），也就是从前往后第tot - n 个点</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">removeNthFromEnd</span><span class="params">(ListNode* head, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        ListNode* dummy = <span class="keyword">new</span> <span class="built_in">ListNode</span>(<span class="number">-1</span>);</span><br><span class="line">        dummy-&gt;next = head;</span><br><span class="line">        <span class="type">int</span> tot = <span class="number">0</span>;</span><br><span class="line">        ListNode* p = dummy-&gt;next;</span><br><span class="line">        <span class="keyword">while</span>(p) &#123;</span><br><span class="line">            tot++;</span><br><span class="line">            p = p-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> cur = <span class="number">0</span>;</span><br><span class="line">        p = dummy;</span><br><span class="line">        <span class="keyword">while</span>(cur &lt; (tot - n)) &#123;</span><br><span class="line">            p = p-&gt;next;</span><br><span class="line">            cur++;</span><br><span class="line">        &#125;</span><br><span class="line">        p-&gt;next = p-&gt;next-&gt;next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>方法二：</p>
</blockquote>
<p>快慢指针</p>
<p>设置两个指针<code>p1</code>和<code>p2</code>，让快指针<code>p1</code>先走 <code>n</code>步，然后两个指针再同时走。当第二个指针走到最后时，第一个指针的位置就是需要被删除的节点。</p>
<p>由于我们设置了虚拟头节点<code>dummy</code>，所以当开始<code>p1</code>和<code>p2</code>都在<code>dummy</code>时，<code>p1</code>走<code>n</code>步，然后同时走，最后<code>p2</code>停止的位置就是倒数第<code>n+1</code>个节点</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">removeNthFromEnd</span><span class="params">(ListNode* head, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        ListNode* dummy = <span class="keyword">new</span> <span class="built_in">ListNode</span>(<span class="number">-1</span>);</span><br><span class="line">        dummy-&gt;next = head;</span><br><span class="line">        ListNode* p1 = dummy;</span><br><span class="line">        ListNode* p2 = dummy;</span><br><span class="line">        <span class="keyword">while</span>(n--) p1 = p1-&gt;next;</span><br><span class="line">        <span class="keyword">while</span>(p1-&gt;next) &#123;</span><br><span class="line">            p1 = p1-&gt;next;</span><br><span class="line">            p2 = p2-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        p2-&gt;next = p2-&gt;next-&gt;next;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> dummy-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h4 id="20-有效的括号"><a href="#20-有效的括号" class="headerlink" title="20. 有效的括号"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/valid-parentheses/">20. 有效的括号</a></h4><p>维护一个栈，如果是左括号就将其入栈， 如果是右括号就拿栈顶元素出来看是否匹配</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isValid</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        stack&lt;<span class="type">char</span>&gt; stk;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> c : s) &#123;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;(&#x27;</span> || c == <span class="string">&#x27;[&#x27;</span> || c == <span class="string">&#x27;&#123;&#x27;</span>) stk.<span class="built_in">push</span>(c);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(stk.<span class="built_in">size</span>()) &#123;</span><br><span class="line">                    <span class="type">char</span> top = stk.<span class="built_in">top</span>();</span><br><span class="line">                    <span class="keyword">if</span>((c == <span class="string">&#x27;)&#x27;</span> &amp;&amp; top == <span class="string">&#x27;(&#x27;</span>)  || (c == <span class="string">&#x27;&#125;&#x27;</span> &amp;&amp; top == <span class="string">&#x27;&#123;&#x27;</span>) || (c == <span class="string">&#x27;]&#x27;</span> &amp;&amp; top == <span class="string">&#x27;[&#x27;</span>)) &#123;</span><br><span class="line">                        stk.<span class="built_in">pop</span>();</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(stk.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/Leetcode11~20%E9%A2%98%E6%95%B4%E7%90%86-junlin623/" data-id="clhrwhxjf000l8gsz6n6c2xii" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Leetcode1~10题整理-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/Leetcode1~10%E9%A2%98%E6%95%B4%E7%90%86-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.110Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17369278.html">https://www.cnblogs.com/junlin623/p/17369278.html</a></p>
<hr>
<p>title: ‘Leetcode1~10题整理-junlin623’<br>date: 2023-05-03 16:46:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h4 id="1-两数之和"><a href="#1-两数之和" class="headerlink" title="1. 两数之和"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/two-sum/">1. 两数之和</a></h4><p>哈希表：<code>O(n)</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">twoSum</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; hs;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="type">int</span> x = target - nums[i];</span><br><span class="line">            <span class="keyword">if</span>(hs.<span class="built_in">count</span>(x)) &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;hs[x], i&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            hs[nums[i]] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h4 id="2-两数相加"><a href="#2-两数相加" class="headerlink" title="2. 两数相加"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/add-two-numbers/">2. 两数相加</a></h4><p>为了方便定义一个虚拟头节点dummy，这样就不用特判第一个节点了</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">addTwoNumbers</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> dummy = <span class="keyword">new</span> <span class="built_in">ListNode</span>(<span class="number">-1</span>), cur = dummy;</span><br><span class="line">        <span class="type">int</span> t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(l1 || l2 || t) &#123;</span><br><span class="line">            <span class="keyword">if</span>(l1) t += l1-&gt;val, l1 = l1-&gt;next;</span><br><span class="line">            <span class="keyword">if</span>(l2) t += l2-&gt;val, l2 = l2-&gt;next;</span><br><span class="line">            cur-&gt;next = <span class="keyword">new</span> <span class="built_in">ListNode</span>(t % <span class="number">10</span>);</span><br><span class="line">            t /= <span class="number">10</span>;</span><br><span class="line">            cur = cur-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummy-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h4 id="3-无重复字符的最长子串"><a href="#3-无重复字符的最长子串" class="headerlink" title="3. 无重复字符的最长子串"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/">3. 无重复字符的最长子串</a></h4><p>双指针算法</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; hs;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="type">int</span> x = s[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            hs[x] ++;</span><br><span class="line">            <span class="keyword">while</span>(hs[x] &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                hs[s[j] - <span class="string">&#x27;a&#x27;</span>]--;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            res = <span class="built_in">max</span>(res, i - j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h4 id="4-寻找两个正序数组的中位数"><a href="#4-寻找两个正序数组的中位数" class="headerlink" title="4. 寻找两个正序数组的中位数"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/median-of-two-sorted-arrays/">4. 寻找两个正序数组的中位数</a></h4><p>这道题”困难”标签是对特定做法来说的，像我这种菜鸡只能想到暴力合并然后排序 <code>O((m+n)log(m+n))</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums1, vector&lt;<span class="type">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums1.<span class="built_in">size</span>(), m = nums2.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">nums</span><span class="params">(n + m)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            nums[i] = nums1[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; m;i++)&#123;</span><br><span class="line">            nums[i + n] = nums2[i];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> x = n + m;</span><br><span class="line">        <span class="type">double</span> res = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">if</span>(x % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            res = (nums[x / <span class="number">2</span>] + nums[x / <span class="number">2</span> - <span class="number">1</span>]) * <span class="number">1.0</span> / <span class="number">2</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            res = <span class="number">1.0</span> * nums[x / <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h4 id="5-最长回文子串"><a href="#5-最长回文子串" class="headerlink" title="5. 最长回文子串"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/longest-palindromic-substring/">5. 最长回文子串</a></h4><blockquote>
<p>方法一：马拉车算法 <code>O(n)</code> , 很长时间不写了…</p>
</blockquote>
<blockquote>
<p>方法二：字符串哈希+二分：<code>O(nlog(n))</code></p>
</blockquote>
<p>首先在每两个字符之间加上一个#，保证字符串的长度为奇数，方便后面的判断</p>
<p>枚举中心点，二分求左右两边的长度r（回文子串的半径），如果左边字符串逆序的哈希值和右边的哈希值一样，那么这个回文子串的长度为<code>2 * r  + 1</code>，<strong>注意这个是包含#号的</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ull;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> P = <span class="number">131</span>, N = <span class="number">2010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ull hl[N], hr[N], p[N];</span><br><span class="line">    </span><br><span class="line">    <span class="function">ull <span class="title">get</span><span class="params">(ull h[], <span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> h[r] - h[l - <span class="number">1</span>] * p[r - l + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">string <span class="title">longestPalindrome</span><span class="params">(string str)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = str.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> str;</span><br><span class="line">        &#125;</span><br><span class="line">        string s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            s += <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">            s += str[i];</span><br><span class="line">        &#125;</span><br><span class="line">        n = <span class="number">2</span> * n - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">memset</span>(hl, <span class="number">0</span>, <span class="built_in">sizeof</span>(hl));</span><br><span class="line">        <span class="built_in">memset</span>(hr, <span class="number">0</span>, <span class="built_in">sizeof</span>(hr));</span><br><span class="line">        <span class="built_in">memset</span>(p, <span class="number">0</span>, <span class="built_in">sizeof</span>(p));</span><br><span class="line">        p[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, j = n; i &lt;= n; i++, j--) &#123;</span><br><span class="line">            hl[i] = hl[i - <span class="number">1</span>] * P + s[i] - <span class="string">&#x27;a&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">            hr[i] = hr[i - <span class="number">1</span>] * P + s[j] - <span class="string">&#x27;a&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">            p[i] = p[i - <span class="number">1</span>] * P;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        string res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="type">int</span> l = <span class="number">0</span>, r = <span class="built_in">min</span>(i - <span class="number">1</span>, n - i);</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">                <span class="type">int</span> mid = (l + r + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">get</span>(hl, i - mid, i - <span class="number">1</span>) != <span class="built_in">get</span>(hr, n - i - mid + <span class="number">1</span>, n - i)) &#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    l = mid;</span><br><span class="line">                &#125;   </span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (s[i - r] != <span class="string">&#x27;#&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>((r + <span class="number">1</span>) &gt; len) &#123;</span><br><span class="line">                    res = s.<span class="built_in">substr</span>(i - r, <span class="number">2</span> * r + <span class="number">1</span>);</span><br><span class="line">                    len = r + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(r &gt; len) &#123;</span><br><span class="line">                    res = s.<span class="built_in">substr</span>(i - r, <span class="number">2</span> * r + <span class="number">1</span>);</span><br><span class="line">                    len = r;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        string t = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; res.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(res[i] != <span class="string">&#x27;#&#x27;</span>) t += res[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>方法三：双指针<code>O(n^2)</code> </p>
</blockquote>
<p>枚举中点，然后用两个指针往两边走</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">longestPalindrome</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        string res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="type">int</span> l = i - <span class="number">1</span>, r = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(l &gt;= <span class="number">0</span> &amp;&amp; r &lt; n &amp;&amp; s[l] == s[r]) l--, r++;</span><br><span class="line">            <span class="type">int</span> t = r - l - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(t &gt; res.<span class="built_in">size</span>()) res = s.<span class="built_in">substr</span>(l + <span class="number">1</span>, t);</span><br><span class="line">            </span><br><span class="line">            l = i, r = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(l &gt;= <span class="number">0</span> &amp;&amp; r &lt; n &amp;&amp; s[l] == s[r]) l--, r++;</span><br><span class="line">            t = r - l - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(t &gt; res.<span class="built_in">size</span>()) res = s.<span class="built_in">substr</span>(l + <span class="number">1</span>, t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>方法四：区间DP<code>O(n^2)</code></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">bool</span> dp[N][N];</span><br><span class="line">    <span class="function">string <span class="title">longestPalindrome</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        s = <span class="string">&#x27;#&#x27;</span> + s;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) dp[i][i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> len = <span class="number">2</span>; len &lt;= n; len++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i + len - <span class="number">1</span> &lt;= n; i++) &#123;</span><br><span class="line">                <span class="type">int</span> j = i + len - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(len == <span class="number">2</span>) &#123;</span><br><span class="line">                    dp[i][j] = (s[i] == s[j]);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(s[i] == s[j]) dp[i][j] |= dp[i + <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">else</span> dp[i][j] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        string res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = i; j &lt;= n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(dp[i][j] &amp;&amp; (j - i + <span class="number">1</span>) &gt; res.<span class="built_in">size</span>()) &#123;</span><br><span class="line">                    res = s.<span class="built_in">substr</span>(i, j - i + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h4 id="6-N-字形变换"><a href="#6-N-字形变换" class="headerlink" title="6. N 字形变换"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/zigzag-conversion/">6. N 字形变换</a></h4><blockquote>
<p>方法一：找规律：</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">convert</span><span class="params">(string s, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        string res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> s;  <span class="comment">//注意这里要特判</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; n;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">0</span> || i == n<span class="number">-1</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j = i;j &lt; s.<span class="built_in">size</span>();j += <span class="number">2</span>*n<span class="number">-2</span>) &#123;</span><br><span class="line">                    res += s[j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j = i,k = <span class="number">2</span>*n<span class="number">-2</span>-i;j &lt; s.<span class="built_in">size</span>() || k &lt; s.<span class="built_in">size</span>();j += <span class="number">2</span>*n<span class="number">-2</span>, k+=<span class="number">2</span>*n<span class="number">-2</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(j &lt; s.<span class="built_in">size</span>()) res += s[j];</span><br><span class="line">                    <span class="keyword">if</span>(k &lt; s.<span class="built_in">size</span>()) res += s[k];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>方法二：模拟：</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">convert</span><span class="params">(string s, <span class="type">int</span> numRows)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">length</span>(), r = numRows;</span><br><span class="line">        <span class="keyword">if</span> (r == <span class="number">1</span> || r &gt;= n) &#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> t = r * <span class="number">2</span> - <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> c = (n + t - <span class="number">1</span>) / t * (r - <span class="number">1</span>);</span><br><span class="line">        <span class="function">vector&lt;string&gt; <span class="title">mat</span><span class="params">(r, string(c, <span class="number">0</span>))</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>, x = <span class="number">0</span>, y = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            mat[x][y] = s[i];</span><br><span class="line">            <span class="keyword">if</span> (i % t &lt; r - <span class="number">1</span>) &#123;</span><br><span class="line">                ++x; <span class="comment">// 向下移动</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                --x;</span><br><span class="line">                ++y; <span class="comment">// 向右上移动</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        string ans;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;row : mat) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">char</span> ch : row) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ch) &#123;</span><br><span class="line">                    ans += ch;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="7-整数反转"><a href="#7-整数反转" class="headerlink" title="7. 整数反转"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/reverse-integer/">7. 整数反转</a></h4><blockquote>
<p>方法一：字符串翻转：</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">reverse</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> t = x &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">        x = <span class="built_in">abs</span>(x);</span><br><span class="line">        string s = <span class="built_in">to_string</span>(x);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, j = s.<span class="built_in">size</span>() - <span class="number">1</span>; i &lt;= j; i++, j--) &#123;</span><br><span class="line">            <span class="built_in">swap</span>(s[i], s[j]);</span><br><span class="line">        &#125;</span><br><span class="line">        x = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            x = t * <span class="built_in">stoi</span>(s);<span class="comment">//变回数字</span></span><br><span class="line">        &#125;<span class="built_in">catch</span>(exception ex)&#123;&#125;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>方法二：整数各位拆分，在循环过程中判断是否溢出：</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">reverse</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x) &#123;</span><br><span class="line">            <span class="keyword">if</span>(x &gt; <span class="number">0</span> &amp;&amp; res &gt; (INT_MAX - x % <span class="number">10</span>) / <span class="number">10</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(x &lt; <span class="number">0</span> &amp;&amp; res &lt; (INT_MIN - x % <span class="number">10</span>) / <span class="number">10</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            res = res * <span class="number">10</span> + x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h4 id="8-字符串转换整数-atoi"><a href="#8-字符串转换整数-atoi" class="headerlink" title="8. 字符串转换整数 (atoi)"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/string-to-integer-atoi/">8. 字符串转换整数 (atoi)</a></h4><p>模拟题：</p>
<p><code>find_first_not_of(&#39; &#39;)</code> 找到字符串中第一个不是空格的位置，如果没有返回-1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">myAtoi</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>(), idx = s.<span class="built_in">find_first_not_of</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(idx == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="comment">// 表示字符串全为空格</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> minus = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(s[idx] == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// 为负数</span></span><br><span class="line">            minus = <span class="number">-1</span>;</span><br><span class="line">            idx++;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s[idx] == <span class="string">&#x27;+&#x27;</span>) &#123;</span><br><span class="line">            idx++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(idx &lt; n &amp;&amp; <span class="built_in">isdigit</span>(s[idx])) &#123;</span><br><span class="line">            res = res * <span class="number">10</span> + (s[idx] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            idx++;</span><br><span class="line">            <span class="keyword">if</span>(res &gt; INT_MAX) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        res *= minus;</span><br><span class="line">        <span class="keyword">if</span>(res &gt; INT_MAX) res = INT_MAX;</span><br><span class="line">        <span class="keyword">if</span>(res &lt; INT_MIN) res = INT_MIN;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h4 id="9-回文数"><a href="#9-回文数" class="headerlink" title="9. 回文数"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/palindrome-number/">9. 回文数</a></h4><blockquote>
<p>方法一：变成字符串</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isPalindrome</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        string s = <span class="built_in">to_string</span>(x);</span><br><span class="line">        string t = <span class="built_in">string</span>(s.<span class="built_in">rbegin</span>(), s.<span class="built_in">rend</span>());</span><br><span class="line">        <span class="keyword">return</span> s == t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>方法二：直接做：</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isPalindrome</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">int</span> t = x;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(t) &#123;</span><br><span class="line">            res = res * <span class="number">10</span> + t % <span class="number">10</span>;</span><br><span class="line">            t /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res == x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h4 id="10-正则表达式匹配"><a href="#10-正则表达式匹配" class="headerlink" title="10. 正则表达式匹配"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/regular-expression-matching/">10. 正则表达式匹配</a></h4><p>经验之谈，两个字符串，dp两维</p>
<p><code>dp[i][j]</code> 表示<code>s[1~i]</code>和<code>p[1~j]</code>是否能够匹配(下标从1开始)</p>
<p>如果<code>p[j] ≠ &#39;*&#39;</code>, 则<code>dp[i][j] = (s[i] == p[j] || p[j] == &#39;.&#39;) &amp;&amp; dp[i-1][j-1]</code> ,也就是只有当<code>s[i]</code>和<code>p[j]</code>成功匹配的时候（当<code>p[j]==&#39;.&#39;</code>的时候一定能匹配）并且<code>s[1~i-1]</code>和<code>p[1~j-1]</code>成功匹配的时候<code>dp[i][j]</code>才为1</p>
<p>如果<code>p[j] == &#39;*&#39;</code>， 需要枚举*代表多少个<code>p[j-1]</code>, 这和完全背包问题很像，可以借鉴完全背包问题的优化方法，所以<code>dp[i][j]  = (dp[i][j-2] || (dp[i-1][j] &amp;&amp; s[i] == p[j-1]</code></p>
<p>注意<code>dp[0][j]</code> 也是有可能匹配的，所以i要从0开始循环</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isMatch</span><span class="params">(string s, string p)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>(), m = p.<span class="built_in">size</span>();</span><br><span class="line">        s = <span class="string">&#x27; &#x27;</span> + s, p = <span class="string">&#x27; &#x27;</span> + p;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">bool</span>&gt;&gt; <span class="built_in">dp</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">bool</span>&gt;(m + <span class="number">1</span>));</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(j + <span class="number">1</span> &lt;= m &amp;&amp; p[j + <span class="number">1</span>] == <span class="string">&#x27;*&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(i &amp;&amp; p[j] != <span class="string">&#x27;*&#x27;</span>) &#123;</span><br><span class="line">                    dp[i][j] = (s[i] == p[j] || p[j] == <span class="string">&#x27;.&#x27;</span>) &amp;&amp; dp[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(p[j] == <span class="string">&#x27;*&#x27;</span>) &#123;</span><br><span class="line">                    dp[i][j]  = (dp[i][j<span class="number">-2</span>] || (i &amp;&amp; dp[i<span class="number">-1</span>][j] &amp;&amp; (s[i] == p[j<span class="number">-1</span>] || p[j - <span class="number">1</span>] == <span class="string">&#x27;.&#x27;</span>)));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> dp[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/Leetcode1~10%E9%A2%98%E6%95%B4%E7%90%86-junlin623/" data-id="clhrwhxjg000o8gsz95m3a0ia" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-kali系统图形界面出现循环登录现象-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/kali%E7%B3%BB%E7%BB%9F%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E5%87%BA%E7%8E%B0%E5%BE%AA%E7%8E%AF%E7%99%BB%E5%BD%95%E7%8E%B0%E8%B1%A1-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.107Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17021650.html">https://www.cnblogs.com/junlin623/p/17021650.html</a></p>
<hr>
<p>title: ‘kali系统图形界面出现循环登录现象-junlin623’<br>date: 2023-01-03 11:46:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>最近使用普通用户登录kali系统出现循环登录的情况，输入正确密码还是会跳转到登录界面<br>查了一下网上的博客，有很多解决方案，但是都没有尝试成功：</p>
<ol>
<li>升级系统软件  <code>sudo apt update -f</code></li>
<li>系统根目录文件满了，我用命令<code>du -lh</code>查了一下空间才用了一半 ，所以这种解决方案不适合我<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17021650.html">https://www.cnblogs.com/junlin623/p/17021650.html</a></li>
</ol>
<hr>
<p>title: ‘kali系统图形界面出现循环登录现象-junlin623’<br>date: 2023-01-03 11:46:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>最近使用普通用户登录kali系统出现循环登录的情况，输入正确密码还是会跳转到登录界面<br>查了一下网上的博客，有很多解决方案，但是都没有尝试成功：</p>
<ol>
<li>升级系统软件  <code>sudo apt update -f</code></li>
<li>系统根目录文件满了，我用命令<code>du -lh</code>查了一下空间才用了一半 ，所以这种解决方案不适合我<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17021650.html">https://www.cnblogs.com/junlin623/p/17021650.html</a></li>
</ol>
<hr>
<p>title: ‘kali系统图形界面出现循环登录现象-junlin623’<br>date: 2023-01-03 11:46:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>最近使用普通用户登录kali系统出现循环登录的情况，输入正确密码还是会跳转到登录界面<br>查了一下网上的博客，有很多解决方案，但是都没有尝试成功：</p>
<ol>
<li>升级系统软件  <code>sudo apt update -f</code></li>
<li>系统根目录文件满了，我用命令<code>du -lh</code>查了一下空间才用了一半 ，所以这种解决方案不适合我<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17021650.html">https://www.cnblogs.com/junlin623/p/17021650.html</a></li>
</ol>
<hr>
<p>title: ‘kali系统图形界面出现循环登录现象-junlin623’<br>date: 2023-01-03 11:46:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>最近使用普通用户登录kali系统出现循环登录的情况，输入正确密码还是会跳转到登录界面<br>查了一下网上的博客，有很多解决方案，但是都没有尝试成功：</p>
<ol>
<li>升级系统软件  <code>sudo apt update -f</code></li>
<li>系统根目录文件满了，我用命令<code>du -lh</code>查了一下空间才用了一半 ，所以这种解决方案不适合我<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17021650.html">https://www.cnblogs.com/junlin623/p/17021650.html</a></li>
</ol>
<hr>
<p>title: ‘kali系统图形界面出现循环登录现象-junlin623’<br>date: 2023-01-03 11:46:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>最近使用普通用户登录kali系统出现循环登录的情况，输入正确密码还是会跳转到登录界面<br>查了一下网上的博客，有很多解决方案，但是都没有尝试成功：</p>
<ol>
<li>升级系统软件  <code>sudo apt update -f</code></li>
<li>系统根目录文件满了，我用命令<code>du -lh</code>查了一下空间才用了一半 ，所以这种解决方案不适合我<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17021650.html">https://www.cnblogs.com/junlin623/p/17021650.html</a></li>
</ol>
<hr>
<p>title: ‘kali系统图形界面出现循环登录现象-junlin623’<br>date: 2023-01-03 11:46:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>最近使用普通用户登录kali系统出现循环登录的情况，输入正确密码还是会跳转到登录界面<br>查了一下网上的博客，有很多解决方案，但是都没有尝试成功：</p>
<ol>
<li>升级系统软件  <code>sudo apt update -f</code></li>
<li>系统根目录文件满了，我用命令<code>du -lh</code>查了一下空间才用了一半 ，所以这种解决方案不适合我<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17021650.html">https://www.cnblogs.com/junlin623/p/17021650.html</a></li>
</ol>
<hr>
<p>title: ‘kali系统图形界面出现循环登录现象-junlin623’<br>date: 2023-01-03 11:46:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>最近使用普通用户登录kali系统出现循环登录的情况，输入正确密码还是会跳转到登录界面<br>查了一下网上的博客，有很多解决方案，但是都没有尝试成功：</p>
<ol>
<li>升级系统软件  <code>sudo apt update -f</code></li>
<li>系统根目录文件满了，我用命令<code>du -lh</code>查了一下空间才用了一半 ，所以这种解决方案不适合我</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/kali%E7%B3%BB%E7%BB%9F%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E5%87%BA%E7%8E%B0%E5%BE%AA%E7%8E%AF%E7%99%BB%E5%BD%95%E7%8E%B0%E8%B1%A1-junlin623/" data-id="clhrwhxjt001a8gsz4kh4ayp2" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Kali防火墙放行指定端口-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/Kali%E9%98%B2%E7%81%AB%E5%A2%99%E6%94%BE%E8%A1%8C%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.105Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/articles/17019159.html">https://www.cnblogs.com/junlin623/articles/17019159.html</a></p>
<hr>
<p>title: ‘Kali防火墙放行指定端口-junlin623’<br>date: 2023-01-01 22:27:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="Linux防火墙放行端口"><a href="#Linux防火墙放行端口" class="headerlink" title="Linux防火墙放行端口"></a>Linux防火墙放行端口</h3><p>首先要安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install firewalld</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state</span></span><br><span class="line">not running</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># systemctl start firewalld.service </span></span><br><span class="line">                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state             </span></span><br><span class="line">running</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看3350端口是否被放行</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --query-port=3350/tcp</span></span><br><span class="line">no</span><br><span class="line"></span><br><span class="line"><span class="comment">#放行3350端口</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --zone=public --add-port=3350/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="刷新生效"><a href="#刷新生效" class="headerlink" title="刷新生效"></a>刷新生效</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service <span class="comment">#重启防火墙</span></span><br><span class="line">firewall-cmd --reload  <span class="comment">#重新载入配置</span></span><br></pre></td></tr></table></figure>

<h4 id="查看防火墙放行列表"><a href="#查看防火墙放行列表" class="headerlink" title="查看防火墙放行列表"></a>查看防火墙放行列表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>

<h4 id="其他命令："><a href="#其他命令：" class="headerlink" title="其他命令："></a>其他命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state                           <span class="comment">#查看防火墙状态，是否是running</span></span><br><span class="line">firewall-cmd --reload                          <span class="comment">#重新载入配置，比如添加规则之后，需要执行此命令</span></span><br><span class="line">firewall-cmd --get-zones                       <span class="comment">#列出支持的zone</span></span><br><span class="line">firewall-cmd --get-services                    <span class="comment">#列出支持的服务，在列表中的服务是放行的</span></span><br><span class="line">firewall-cmd --query-service ftp               <span class="comment">#查看ftp服务是否支持，返回yes或者no</span></span><br><span class="line">firewall-cmd --add-service=ftp                 <span class="comment">#临时开放ftp服务</span></span><br><span class="line">firewall-cmd --add-service=ftp --permanent     <span class="comment">#永久开放ftp服务</span></span><br><span class="line">firewall-cmd --remove-service=ftp --permanent  <span class="comment">#永久移除ftp服务</span></span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent     <span class="comment">#永久添加80端口 </span></span><br><span class="line">firewall-cmd --remove-port=80/tcp --permanent  <span class="comment">#永久移除80端口</span></span><br><span class="line">firewall-cmd --list-ports                      <span class="comment">#查看已经开放的端口</span></span><br><span class="line">iptables -L -n                                 <span class="comment">#查看规则，这个命令是和iptables的相同的</span></span><br><span class="line">man firewall-cmd                               <span class="comment">#查看帮助</span></span><br></pre></td></tr></table></figure>

<p>—<a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/articles/17019159.html">https://www.cnblogs.com/junlin623/articles/17019159.html</a></p>
<hr>
<p>title: ‘Kali防火墙放行指定端口-junlin623’<br>date: 2023-01-01 22:27:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="Linux防火墙放行端口-1"><a href="#Linux防火墙放行端口-1" class="headerlink" title="Linux防火墙放行端口"></a>Linux防火墙放行端口</h3><p>首先要安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install firewalld</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state</span></span><br><span class="line">not running</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># systemctl start firewalld.service </span></span><br><span class="line">                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state             </span></span><br><span class="line">running</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看3350端口是否被放行</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --query-port=3350/tcp</span></span><br><span class="line">no</span><br><span class="line"></span><br><span class="line"><span class="comment">#放行3350端口</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --zone=public --add-port=3350/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="刷新生效-1"><a href="#刷新生效-1" class="headerlink" title="刷新生效"></a>刷新生效</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service <span class="comment">#重启防火墙</span></span><br><span class="line">firewall-cmd --reload  <span class="comment">#重新载入配置</span></span><br></pre></td></tr></table></figure>

<h4 id="查看防火墙放行列表-1"><a href="#查看防火墙放行列表-1" class="headerlink" title="查看防火墙放行列表"></a>查看防火墙放行列表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>

<h4 id="其他命令：-1"><a href="#其他命令：-1" class="headerlink" title="其他命令："></a>其他命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state                           <span class="comment">#查看防火墙状态，是否是running</span></span><br><span class="line">firewall-cmd --reload                          <span class="comment">#重新载入配置，比如添加规则之后，需要执行此命令</span></span><br><span class="line">firewall-cmd --get-zones                       <span class="comment">#列出支持的zone</span></span><br><span class="line">firewall-cmd --get-services                    <span class="comment">#列出支持的服务，在列表中的服务是放行的</span></span><br><span class="line">firewall-cmd --query-service ftp               <span class="comment">#查看ftp服务是否支持，返回yes或者no</span></span><br><span class="line">firewall-cmd --add-service=ftp                 <span class="comment">#临时开放ftp服务</span></span><br><span class="line">firewall-cmd --add-service=ftp --permanent     <span class="comment">#永久开放ftp服务</span></span><br><span class="line">firewall-cmd --remove-service=ftp --permanent  <span class="comment">#永久移除ftp服务</span></span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent     <span class="comment">#永久添加80端口 </span></span><br><span class="line">firewall-cmd --remove-port=80/tcp --permanent  <span class="comment">#永久移除80端口</span></span><br><span class="line">firewall-cmd --list-ports                      <span class="comment">#查看已经开放的端口</span></span><br><span class="line">iptables -L -n                                 <span class="comment">#查看规则，这个命令是和iptables的相同的</span></span><br><span class="line">man firewall-cmd                               <span class="comment">#查看帮助</span></span><br></pre></td></tr></table></figure>

<p>—<a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/articles/17019159.html">https://www.cnblogs.com/junlin623/articles/17019159.html</a></p>
<hr>
<p>title: ‘Kali防火墙放行指定端口-junlin623’<br>date: 2023-01-01 22:27:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="Linux防火墙放行端口-2"><a href="#Linux防火墙放行端口-2" class="headerlink" title="Linux防火墙放行端口"></a>Linux防火墙放行端口</h3><p>首先要安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install firewalld</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state</span></span><br><span class="line">not running</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># systemctl start firewalld.service </span></span><br><span class="line">                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state             </span></span><br><span class="line">running</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看3350端口是否被放行</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --query-port=3350/tcp</span></span><br><span class="line">no</span><br><span class="line"></span><br><span class="line"><span class="comment">#放行3350端口</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --zone=public --add-port=3350/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="刷新生效-2"><a href="#刷新生效-2" class="headerlink" title="刷新生效"></a>刷新生效</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service <span class="comment">#重启防火墙</span></span><br><span class="line">firewall-cmd --reload  <span class="comment">#重新载入配置</span></span><br></pre></td></tr></table></figure>

<h4 id="查看防火墙放行列表-2"><a href="#查看防火墙放行列表-2" class="headerlink" title="查看防火墙放行列表"></a>查看防火墙放行列表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>

<h4 id="其他命令：-2"><a href="#其他命令：-2" class="headerlink" title="其他命令："></a>其他命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state                           <span class="comment">#查看防火墙状态，是否是running</span></span><br><span class="line">firewall-cmd --reload                          <span class="comment">#重新载入配置，比如添加规则之后，需要执行此命令</span></span><br><span class="line">firewall-cmd --get-zones                       <span class="comment">#列出支持的zone</span></span><br><span class="line">firewall-cmd --get-services                    <span class="comment">#列出支持的服务，在列表中的服务是放行的</span></span><br><span class="line">firewall-cmd --query-service ftp               <span class="comment">#查看ftp服务是否支持，返回yes或者no</span></span><br><span class="line">firewall-cmd --add-service=ftp                 <span class="comment">#临时开放ftp服务</span></span><br><span class="line">firewall-cmd --add-service=ftp --permanent     <span class="comment">#永久开放ftp服务</span></span><br><span class="line">firewall-cmd --remove-service=ftp --permanent  <span class="comment">#永久移除ftp服务</span></span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent     <span class="comment">#永久添加80端口 </span></span><br><span class="line">firewall-cmd --remove-port=80/tcp --permanent  <span class="comment">#永久移除80端口</span></span><br><span class="line">firewall-cmd --list-ports                      <span class="comment">#查看已经开放的端口</span></span><br><span class="line">iptables -L -n                                 <span class="comment">#查看规则，这个命令是和iptables的相同的</span></span><br><span class="line">man firewall-cmd                               <span class="comment">#查看帮助</span></span><br></pre></td></tr></table></figure>

<p>—<a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/articles/17019159.html">https://www.cnblogs.com/junlin623/articles/17019159.html</a></p>
<hr>
<p>title: ‘Kali防火墙放行指定端口-junlin623’<br>date: 2023-01-01 22:27:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="Linux防火墙放行端口-3"><a href="#Linux防火墙放行端口-3" class="headerlink" title="Linux防火墙放行端口"></a>Linux防火墙放行端口</h3><p>首先要安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install firewalld</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state</span></span><br><span class="line">not running</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># systemctl start firewalld.service </span></span><br><span class="line">                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state             </span></span><br><span class="line">running</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看3350端口是否被放行</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --query-port=3350/tcp</span></span><br><span class="line">no</span><br><span class="line"></span><br><span class="line"><span class="comment">#放行3350端口</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --zone=public --add-port=3350/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="刷新生效-3"><a href="#刷新生效-3" class="headerlink" title="刷新生效"></a>刷新生效</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service <span class="comment">#重启防火墙</span></span><br><span class="line">firewall-cmd --reload  <span class="comment">#重新载入配置</span></span><br></pre></td></tr></table></figure>

<h4 id="查看防火墙放行列表-3"><a href="#查看防火墙放行列表-3" class="headerlink" title="查看防火墙放行列表"></a>查看防火墙放行列表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>

<h4 id="其他命令：-3"><a href="#其他命令：-3" class="headerlink" title="其他命令："></a>其他命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state                           <span class="comment">#查看防火墙状态，是否是running</span></span><br><span class="line">firewall-cmd --reload                          <span class="comment">#重新载入配置，比如添加规则之后，需要执行此命令</span></span><br><span class="line">firewall-cmd --get-zones                       <span class="comment">#列出支持的zone</span></span><br><span class="line">firewall-cmd --get-services                    <span class="comment">#列出支持的服务，在列表中的服务是放行的</span></span><br><span class="line">firewall-cmd --query-service ftp               <span class="comment">#查看ftp服务是否支持，返回yes或者no</span></span><br><span class="line">firewall-cmd --add-service=ftp                 <span class="comment">#临时开放ftp服务</span></span><br><span class="line">firewall-cmd --add-service=ftp --permanent     <span class="comment">#永久开放ftp服务</span></span><br><span class="line">firewall-cmd --remove-service=ftp --permanent  <span class="comment">#永久移除ftp服务</span></span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent     <span class="comment">#永久添加80端口 </span></span><br><span class="line">firewall-cmd --remove-port=80/tcp --permanent  <span class="comment">#永久移除80端口</span></span><br><span class="line">firewall-cmd --list-ports                      <span class="comment">#查看已经开放的端口</span></span><br><span class="line">iptables -L -n                                 <span class="comment">#查看规则，这个命令是和iptables的相同的</span></span><br><span class="line">man firewall-cmd                               <span class="comment">#查看帮助</span></span><br></pre></td></tr></table></figure>

<p>—<a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/articles/17019159.html">https://www.cnblogs.com/junlin623/articles/17019159.html</a></p>
<hr>
<p>title: ‘Kali防火墙放行指定端口-junlin623’<br>date: 2023-01-01 22:27:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="Linux防火墙放行端口-4"><a href="#Linux防火墙放行端口-4" class="headerlink" title="Linux防火墙放行端口"></a>Linux防火墙放行端口</h3><p>首先要安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install firewalld</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state</span></span><br><span class="line">not running</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># systemctl start firewalld.service </span></span><br><span class="line">                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state             </span></span><br><span class="line">running</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看3350端口是否被放行</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --query-port=3350/tcp</span></span><br><span class="line">no</span><br><span class="line"></span><br><span class="line"><span class="comment">#放行3350端口</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --zone=public --add-port=3350/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="刷新生效-4"><a href="#刷新生效-4" class="headerlink" title="刷新生效"></a>刷新生效</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service <span class="comment">#重启防火墙</span></span><br><span class="line">firewall-cmd --reload  <span class="comment">#重新载入配置</span></span><br></pre></td></tr></table></figure>

<h4 id="查看防火墙放行列表-4"><a href="#查看防火墙放行列表-4" class="headerlink" title="查看防火墙放行列表"></a>查看防火墙放行列表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>

<h4 id="其他命令：-4"><a href="#其他命令：-4" class="headerlink" title="其他命令："></a>其他命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state                           <span class="comment">#查看防火墙状态，是否是running</span></span><br><span class="line">firewall-cmd --reload                          <span class="comment">#重新载入配置，比如添加规则之后，需要执行此命令</span></span><br><span class="line">firewall-cmd --get-zones                       <span class="comment">#列出支持的zone</span></span><br><span class="line">firewall-cmd --get-services                    <span class="comment">#列出支持的服务，在列表中的服务是放行的</span></span><br><span class="line">firewall-cmd --query-service ftp               <span class="comment">#查看ftp服务是否支持，返回yes或者no</span></span><br><span class="line">firewall-cmd --add-service=ftp                 <span class="comment">#临时开放ftp服务</span></span><br><span class="line">firewall-cmd --add-service=ftp --permanent     <span class="comment">#永久开放ftp服务</span></span><br><span class="line">firewall-cmd --remove-service=ftp --permanent  <span class="comment">#永久移除ftp服务</span></span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent     <span class="comment">#永久添加80端口 </span></span><br><span class="line">firewall-cmd --remove-port=80/tcp --permanent  <span class="comment">#永久移除80端口</span></span><br><span class="line">firewall-cmd --list-ports                      <span class="comment">#查看已经开放的端口</span></span><br><span class="line">iptables -L -n                                 <span class="comment">#查看规则，这个命令是和iptables的相同的</span></span><br><span class="line">man firewall-cmd                               <span class="comment">#查看帮助</span></span><br></pre></td></tr></table></figure>

<p>—<a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/articles/17019159.html">https://www.cnblogs.com/junlin623/articles/17019159.html</a></p>
<hr>
<p>title: ‘Kali防火墙放行指定端口-junlin623’<br>date: 2023-01-01 22:27:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="Linux防火墙放行端口-5"><a href="#Linux防火墙放行端口-5" class="headerlink" title="Linux防火墙放行端口"></a>Linux防火墙放行端口</h3><p>首先要安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install firewalld</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state</span></span><br><span class="line">not running</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># systemctl start firewalld.service </span></span><br><span class="line">                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state             </span></span><br><span class="line">running</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看3350端口是否被放行</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --query-port=3350/tcp</span></span><br><span class="line">no</span><br><span class="line"></span><br><span class="line"><span class="comment">#放行3350端口</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --zone=public --add-port=3350/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="刷新生效-5"><a href="#刷新生效-5" class="headerlink" title="刷新生效"></a>刷新生效</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service <span class="comment">#重启防火墙</span></span><br><span class="line">firewall-cmd --reload  <span class="comment">#重新载入配置</span></span><br></pre></td></tr></table></figure>

<h4 id="查看防火墙放行列表-5"><a href="#查看防火墙放行列表-5" class="headerlink" title="查看防火墙放行列表"></a>查看防火墙放行列表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>

<h4 id="其他命令：-5"><a href="#其他命令：-5" class="headerlink" title="其他命令："></a>其他命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state                           <span class="comment">#查看防火墙状态，是否是running</span></span><br><span class="line">firewall-cmd --reload                          <span class="comment">#重新载入配置，比如添加规则之后，需要执行此命令</span></span><br><span class="line">firewall-cmd --get-zones                       <span class="comment">#列出支持的zone</span></span><br><span class="line">firewall-cmd --get-services                    <span class="comment">#列出支持的服务，在列表中的服务是放行的</span></span><br><span class="line">firewall-cmd --query-service ftp               <span class="comment">#查看ftp服务是否支持，返回yes或者no</span></span><br><span class="line">firewall-cmd --add-service=ftp                 <span class="comment">#临时开放ftp服务</span></span><br><span class="line">firewall-cmd --add-service=ftp --permanent     <span class="comment">#永久开放ftp服务</span></span><br><span class="line">firewall-cmd --remove-service=ftp --permanent  <span class="comment">#永久移除ftp服务</span></span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent     <span class="comment">#永久添加80端口 </span></span><br><span class="line">firewall-cmd --remove-port=80/tcp --permanent  <span class="comment">#永久移除80端口</span></span><br><span class="line">firewall-cmd --list-ports                      <span class="comment">#查看已经开放的端口</span></span><br><span class="line">iptables -L -n                                 <span class="comment">#查看规则，这个命令是和iptables的相同的</span></span><br><span class="line">man firewall-cmd                               <span class="comment">#查看帮助</span></span><br></pre></td></tr></table></figure>

<p>—<a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/articles/17019159.html">https://www.cnblogs.com/junlin623/articles/17019159.html</a></p>
<hr>
<p>title: ‘Kali防火墙放行指定端口-junlin623’<br>date: 2023-01-01 22:27:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="Linux防火墙放行端口-6"><a href="#Linux防火墙放行端口-6" class="headerlink" title="Linux防火墙放行端口"></a>Linux防火墙放行端口</h3><p>首先要安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install firewalld</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state</span></span><br><span class="line">not running</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># systemctl start firewalld.service </span></span><br><span class="line">                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --state             </span></span><br><span class="line">running</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看3350端口是否被放行</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --query-port=3350/tcp</span></span><br><span class="line">no</span><br><span class="line"></span><br><span class="line"><span class="comment">#放行3350端口</span></span><br><span class="line">┌──(root㉿kali)-[/home/junlin]</span><br><span class="line">└─<span class="comment"># firewall-cmd --zone=public --add-port=3350/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="刷新生效-6"><a href="#刷新生效-6" class="headerlink" title="刷新生效"></a>刷新生效</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld.service <span class="comment">#重启防火墙</span></span><br><span class="line">firewall-cmd --reload  <span class="comment">#重新载入配置</span></span><br></pre></td></tr></table></figure>

<h4 id="查看防火墙放行列表-6"><a href="#查看防火墙放行列表-6" class="headerlink" title="查看防火墙放行列表"></a>查看防火墙放行列表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>

<h4 id="其他命令：-6"><a href="#其他命令：-6" class="headerlink" title="其他命令："></a>其他命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state                           <span class="comment">#查看防火墙状态，是否是running</span></span><br><span class="line">firewall-cmd --reload                          <span class="comment">#重新载入配置，比如添加规则之后，需要执行此命令</span></span><br><span class="line">firewall-cmd --get-zones                       <span class="comment">#列出支持的zone</span></span><br><span class="line">firewall-cmd --get-services                    <span class="comment">#列出支持的服务，在列表中的服务是放行的</span></span><br><span class="line">firewall-cmd --query-service ftp               <span class="comment">#查看ftp服务是否支持，返回yes或者no</span></span><br><span class="line">firewall-cmd --add-service=ftp                 <span class="comment">#临时开放ftp服务</span></span><br><span class="line">firewall-cmd --add-service=ftp --permanent     <span class="comment">#永久开放ftp服务</span></span><br><span class="line">firewall-cmd --remove-service=ftp --permanent  <span class="comment">#永久移除ftp服务</span></span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent     <span class="comment">#永久添加80端口 </span></span><br><span class="line">firewall-cmd --remove-port=80/tcp --permanent  <span class="comment">#永久移除80端口</span></span><br><span class="line">firewall-cmd --list-ports                      <span class="comment">#查看已经开放的端口</span></span><br><span class="line">iptables -L -n                                 <span class="comment">#查看规则，这个命令是和iptables的相同的</span></span><br><span class="line">man firewall-cmd                               <span class="comment">#查看帮助</span></span><br></pre></td></tr></table></figure>

<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/Kali%E9%98%B2%E7%81%AB%E5%A2%99%E6%94%BE%E8%A1%8C%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3-junlin623/" data-id="clhrwhxjg000n8gsza8p9c7ed" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Java实验-Swing 文件处理-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/Java%E5%AE%9E%E9%AA%8C-Swing%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.104Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17171472.html">https://www.cnblogs.com/junlin623/p/17171472.html</a></p>
<hr>
<p>title: ‘Java实验-Swing 文件处理-junlin623’<br>date: 2023-03-02 13:15:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="实验要求："><a href="#实验要求：" class="headerlink" title="实验要求："></a>实验要求：</h3><ol>
<li>点击read按钮，则读入指定txt文档中的内容，显示在第一个文本域（左边文本域中）。</li>
</ol>
<p>2.点击sort按钮，则将文本域中特点的字符提取出来，放到右边的文本域中。</p>
<p>3.点击save按钮，则将处理过后右边的文本保存到一个新的txt文档中。</p>
<p>请用Java图形界面的知识，编写以上软件。</p>
<h3 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h3><h4 id="–-按键处理类ButtonHandler："><a href="#–-按键处理类ButtonHandler：" class="headerlink" title="– 按键处理类ButtonHandler："></a>– 按键处理类ButtonHandler：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.junlin.exer8.MyFrame;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: junlin623</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-11-11 21:34</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ButtonHandler</span> <span class="keyword">implements</span> <span class="title class_">ActionListener</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> MyFrame window;  <span class="comment">//表示处理的是哪个窗口中的点击事件</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ButtonHandler</span><span class="params">(JFrame window)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.window = (MyFrame) window;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">        <span class="comment">//表示点击的按钮是哪一个</span></span><br><span class="line">        <span class="type">JButton</span> <span class="variable">sourceBtn</span> <span class="operator">=</span> (JButton)e.getSource();</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(sourceBtn == <span class="built_in">this</span>.window.readBtn) &#123;  <span class="comment">//读</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fr = <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;./resources/&quot;</span> + <span class="built_in">this</span>.window.filename);</span><br><span class="line">                <span class="type">char</span>[] buffer = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">10</span>];</span><br><span class="line">                <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>((len = fr.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(buffer, <span class="number">0</span>, len);</span><br><span class="line">                    <span class="built_in">this</span>.window.leftArea.append(s);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fr.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(sourceBtn == <span class="built_in">this</span>.window.sortBtn) &#123;   <span class="comment">//提取</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="built_in">this</span>.window.leftArea.getText();</span><br><span class="line">            String[] words = str.split(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(String s: words) &#123;</span><br><span class="line">                <span class="keyword">if</span>(s.contains(<span class="string">&quot;DBa&quot;</span>) || s.contains(<span class="string">&quot;RRi&quot;</span>)) &#123;</span><br><span class="line">                    <span class="built_in">this</span>.window.rightArea.append(s + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(sourceBtn == <span class="built_in">this</span>.window.saveBtn) &#123;   <span class="comment">//保存</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="built_in">this</span>.window.rightArea.getText();</span><br><span class="line">            <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fw = <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;./resources/result.txt&quot;</span>);</span><br><span class="line">                fw.write(str);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="–-界面类MyFrame"><a href="#–-界面类MyFrame" class="headerlink" title="– 界面类MyFrame"></a>– 界面类MyFrame</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JScrollPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextArea;</span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Dimension;</span><br><span class="line"><span class="keyword">import</span> java.awt.FlowLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.TextArea;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: junlin623</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-11-11 21:10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFrame</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> JButton readBtn;  <span class="comment">//读按钮</span></span><br><span class="line">    <span class="keyword">public</span> JButton sortBtn;  <span class="comment">//提取按钮</span></span><br><span class="line">    <span class="keyword">public</span> JButton saveBtn;  <span class="comment">//保存按钮</span></span><br><span class="line">    <span class="keyword">public</span> JTextArea leftArea;   <span class="comment">//左侧文本区域</span></span><br><span class="line">    <span class="keyword">public</span> JTextArea rightArea;   <span class="comment">//右侧文本区域</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> <span class="string">&quot;data.txt&quot;</span>;   <span class="comment">//要读取的文件名</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyFrame</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;文件处理&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.setLayout(<span class="keyword">new</span> <span class="title class_">FlowLayout</span>());</span><br><span class="line">        <span class="comment">//左侧区域</span></span><br><span class="line">        readBtn = <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;read&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.add(readBtn);</span><br><span class="line"></span><br><span class="line">        <span class="type">JScrollPane</span> <span class="variable">leftPane</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JScrollPane</span>();</span><br><span class="line">        leftPane.setVerticalScrollBarPolicy( JScrollPane.VERTICAL_SCROLLBAR_ALWAYS );</span><br><span class="line">        leftArea = <span class="keyword">new</span> <span class="title class_">JTextArea</span>(<span class="number">30</span>,<span class="number">30</span>);  <span class="comment">//这里必须指定行数和列数才可以显示滚动条， 而且不能使用下面这样代码</span></span><br><span class="line">        <span class="comment">//leftArea.setPreferredSize(new Dimension(300, 500));</span></span><br><span class="line">        leftArea.setLineWrap(<span class="literal">true</span>);</span><br><span class="line">        leftPane.setViewportView(leftArea);</span><br><span class="line">        <span class="built_in">this</span>.add(leftPane);</span><br><span class="line"></span><br><span class="line">        sortBtn = <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;sort&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.add(sortBtn);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//右侧区域</span></span><br><span class="line">        <span class="type">JScrollPane</span> <span class="variable">rightPane</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JScrollPane</span>();</span><br><span class="line">        rightPane.setVerticalScrollBarPolicy( JScrollPane.VERTICAL_SCROLLBAR_ALWAYS );</span><br><span class="line">        rightArea = <span class="keyword">new</span> <span class="title class_">JTextArea</span>(<span class="number">30</span>,<span class="number">30</span>);</span><br><span class="line">        rightArea.setLineWrap(<span class="literal">true</span>);</span><br><span class="line">        rightPane.setViewportView(rightArea);</span><br><span class="line">        <span class="built_in">this</span>.add(rightPane);</span><br><span class="line"></span><br><span class="line">        saveBtn = <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;save&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.add(saveBtn);</span><br><span class="line">        <span class="comment">//添加点击事件</span></span><br><span class="line">        readBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ButtonHandler</span>(<span class="built_in">this</span>));</span><br><span class="line">        sortBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ButtonHandler</span>(<span class="built_in">this</span>));</span><br><span class="line">        saveBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ButtonHandler</span>(<span class="built_in">this</span>));</span><br><span class="line">        <span class="built_in">this</span>.setSize(<span class="number">1000</span>, <span class="number">700</span>);</span><br><span class="line">        <span class="built_in">this</span>.setVisible(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="–主类"><a href="#–主类" class="headerlink" title="–主类:"></a>–主类:</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer8;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: junlin623</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-11-11 21:10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaMain</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MyFrame</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="运行结果："><a href="#运行结果：" class="headerlink" title="运行结果："></a>运行结果：</h3><p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230302131513690-1979529436.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/Java%E5%AE%9E%E9%AA%8C-Swing%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86-junlin623/" data-id="clhrwhxjc000f8gszfqbs6er9" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Java实验-Swing 网络聊天室-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/Java%E5%AE%9E%E9%AA%8C-Swing%20%E7%BD%91%E7%BB%9C%E8%81%8A%E5%A4%A9%E5%AE%A4-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.102Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17185214.html">https://www.cnblogs.com/junlin623/p/17185214.html</a></p>
<hr>
<p>title: ‘Java实验-Swing 网络聊天室-junlin623’<br>date: 2023-03-06 20:00:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="实验要求："><a href="#实验要求：" class="headerlink" title="实验要求："></a>实验要求：</h3><ol>
<li>综合Swing界面、多线程和Java的网络通信功能，实现仿QQ聊天：</li>
</ol>
<p>（1）界面设计如下：</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230306195630213-1115423871.png" width="50%" >

<p>（2）要求在服务器端利用多线程响应客户端请求；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务线程（内部类），用于处理客户端的服务线程</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ServerThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>将每一个请求服务的客户线程对象加入到一个列表中，以便维护整个聊天室内的成员互相通信。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">private ArrayList&lt;ServerThread&gt; clientList = null;</span><br><span class="line">// 将该客户加入列表中	</span><br><span class="line">clientList.add(svthread);</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h3><h4 id="服务端Server-java"><a href="#服务端Server-java" class="headerlink" title="服务端Server.java :"></a>服务端Server.java :</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer10_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JScrollPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextArea;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"><span class="keyword">import</span> javax.swing.ScrollPaneConstants;</span><br><span class="line"><span class="keyword">import</span> java.awt.Container;</span><br><span class="line"><span class="keyword">import</span> java.awt.Dimension;</span><br><span class="line"><span class="keyword">import</span> java.awt.FlowLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: junlin623</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-12-04 9:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    String name;   <span class="comment">//名称</span></span><br><span class="line">    <span class="type">int</span> port;    <span class="comment">//服务器开启的端口号</span></span><br><span class="line">    JTextArea textArea;  <span class="comment">//文本域</span></span><br><span class="line">    JTextField jTextField;  <span class="comment">//发送消息文本框</span></span><br><span class="line">    ServerSocket server;   <span class="comment">//服务端套接字</span></span><br><span class="line">    PrintWriter pw;     <span class="comment">//打印输出流，负责写出服务端的相应数据</span></span><br><span class="line">    <span class="comment">//服务器响应客户端的集合，主要用来将服务器的响应数据发送给所有客户端</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;ResponseThread&gt; clientList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Server</span><span class="params">(String name, <span class="type">int</span> port)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.port = port;</span><br><span class="line">        addComponent();   <span class="comment">//添加面板中的组件</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            server = <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="built_in">this</span>.port);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">ServerThread</span>()).start();</span><br><span class="line">        textArea.append(<span class="string">&quot;服务器已经启动!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.setSize(<span class="number">380</span>, <span class="number">452</span>);</span><br><span class="line">        <span class="built_in">this</span>.setVisible(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加组件到面板中</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addComponent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Container</span> <span class="variable">contentpane</span> <span class="operator">=</span> <span class="built_in">this</span>.getContentPane();</span><br><span class="line">        contentpane.setLayout(<span class="keyword">new</span> <span class="title class_">FlowLayout</span>());</span><br><span class="line">        textArea = <span class="keyword">new</span> <span class="title class_">JTextArea</span>(<span class="number">20</span>,<span class="number">30</span>);</span><br><span class="line">        jTextField = <span class="keyword">new</span> <span class="title class_">JTextField</span>();</span><br><span class="line">        jTextField.setPreferredSize(<span class="keyword">new</span> <span class="title class_">Dimension</span>(<span class="number">350</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建滚动面板</span></span><br><span class="line">        <span class="type">JScrollPane</span> <span class="variable">jScrollPane</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JScrollPane</span>(textArea);</span><br><span class="line">        jScrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);</span><br><span class="line">        jScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">JButton</span> <span class="variable">sendBtn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;发送&quot;</span>);</span><br><span class="line">        <span class="comment">//服务端发送按钮事件绑定</span></span><br><span class="line">        sendBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ActionListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> jTextField.getText();</span><br><span class="line">                textArea.append(name + <span class="string">&quot;: &quot;</span> + msg + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                sendAll(name + <span class="string">&quot;: &quot;</span> + msg);</span><br><span class="line">                jTextField.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//清空记录事件绑定</span></span><br><span class="line">        <span class="type">JButton</span> <span class="variable">clearBtn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;清空聊天记录&quot;</span>);</span><br><span class="line">        clearBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ActionListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">                textArea.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        contentpane.add(jScrollPane);</span><br><span class="line">        contentpane.add(jTextField);</span><br><span class="line">        contentpane.add(sendBtn);</span><br><span class="line">        contentpane.add(clearBtn);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//发送消息给所有的客户端</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sendAll</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="string">&quot;&quot;</span>.equals(msg)) &#123;</span><br><span class="line">            <span class="keyword">for</span>(ResponseThread rt : clientList) &#123;</span><br><span class="line">                rt.send(msg);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//服务器线程负责与请求的客户端建立连接， 并将与客户端连接的线程加到集合中</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">ServerThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="type">Socket</span> <span class="variable">client</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    client = server.accept();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;一个客户端建立了连接&quot;</span>);</span><br><span class="line">                <span class="type">ResponseThread</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseThread</span>(client);</span><br><span class="line">                clientList.add(c);     <span class="comment">// 管理所有的成员</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Thread</span>(c).start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 服务线程（内部类），用于处理客户端的服务线程</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">ResponseThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">        Socket client;   <span class="comment">//这个线程就表示与client建立的连接</span></span><br><span class="line">        BufferedReader br;  <span class="comment">//负责读出客户端发送来的数据</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ResponseThread</span><span class="params">(Socket client)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.client = client;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                br = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="built_in">this</span>.client.getInputStream()));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//给本线程中的客户端发送信息</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">send</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//负责写出服务器发送的数据</span></span><br><span class="line">                pw = <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="built_in">this</span>.client.getOutputStream());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            pw.println(msg);</span><br><span class="line">            pw.flush();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="comment">//接收来自客户端的消息</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    msg = br.readLine();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(msg != <span class="literal">null</span> &amp;&amp; !<span class="string">&quot;&quot;</span>.equals(msg.trim())) &#123;</span><br><span class="line">                    textArea.append(msg + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                    <span class="comment">//在服务器端将消息发送给所有的客户端</span></span><br><span class="line">                    sendAll(msg);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="客户端Client-java："><a href="#客户端Client-java：" class="headerlink" title="客户端Client.java："></a>客户端Client.java：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer10_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JScrollPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextArea;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"><span class="keyword">import</span> javax.swing.ScrollPaneConstants;</span><br><span class="line"><span class="keyword">import</span> java.awt.Container;</span><br><span class="line"><span class="keyword">import</span> java.awt.Dimension;</span><br><span class="line"><span class="keyword">import</span> java.awt.FlowLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: junlin623</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-12-04 9:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    Socket socket;</span><br><span class="line">    String name;</span><br><span class="line">    JTextArea textArea;</span><br><span class="line">    JTextField jTextField;</span><br><span class="line">    PrintWriter pw;</span><br><span class="line">    <span class="type">int</span> port;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Client</span><span class="params">(String name, <span class="type">int</span> port)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.port = port;  <span class="comment">//表示客户端与服务器建立连接的端口号</span></span><br><span class="line">        addComponent();</span><br><span class="line"></span><br><span class="line">        connectWithServer();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">ReceiveThread</span>(socket)).start();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.setSize(<span class="number">380</span>, <span class="number">452</span>);</span><br><span class="line">        <span class="built_in">this</span>.setVisible(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 与服务器建立连接</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">connectWithServer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            socket = <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>, port);</span><br><span class="line">            textArea.append(<span class="built_in">this</span>.name + <span class="string">&quot;已经与服务器建立连接!\n&quot;</span>);</span><br><span class="line">            pw = <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="built_in">this</span>.socket.getOutputStream());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加组件到面板中</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addComponent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Container</span> <span class="variable">contentpane</span> <span class="operator">=</span> <span class="built_in">this</span>.getContentPane();</span><br><span class="line">        contentpane.setLayout(<span class="keyword">new</span> <span class="title class_">FlowLayout</span>());</span><br><span class="line">        textArea = <span class="keyword">new</span> <span class="title class_">JTextArea</span>(<span class="number">20</span>,<span class="number">30</span>);</span><br><span class="line">        jTextField = <span class="keyword">new</span> <span class="title class_">JTextField</span>();</span><br><span class="line">        jTextField.setPreferredSize(<span class="keyword">new</span> <span class="title class_">Dimension</span>(<span class="number">350</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建滚动面板，并将文本域放入其中</span></span><br><span class="line">        <span class="type">JScrollPane</span> <span class="variable">jScrollPane</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JScrollPane</span>(textArea);</span><br><span class="line">        jScrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);</span><br><span class="line">        jScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">JButton</span> <span class="variable">sendBtn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;发送&quot;</span>);</span><br><span class="line">        sendBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ActionListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> jTextField.getText();</span><br><span class="line">                jTextField.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">                pw.println(name + <span class="string">&quot;: &quot;</span> + msg);</span><br><span class="line">                pw.flush();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="type">JButton</span> <span class="variable">clearBtn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;清空聊天记录&quot;</span>);</span><br><span class="line">        clearBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ActionListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">                textArea.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        contentpane.add(jScrollPane);</span><br><span class="line">        contentpane.add(jTextField);</span><br><span class="line">        contentpane.add(sendBtn);</span><br><span class="line">        contentpane.add(clearBtn);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//客户端接收线程</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">ReceiveThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> Socket client;</span><br><span class="line">        BufferedReader br;  <span class="comment">//负责读出数据</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ReceiveThread</span><span class="params">(Socket client)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.client = client;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="built_in">this</span>.client.getInputStream());</span><br><span class="line">                br = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="comment">//接收数据</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">                    <span class="keyword">if</span>(!<span class="string">&quot;&quot;</span>.equals(msg.trim())) &#123;</span><br><span class="line">                        textArea.append(msg + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="主类JavaMain-java"><a href="#主类JavaMain-java" class="headerlink" title="主类JavaMain.java:"></a>主类JavaMain.java:</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer10_;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: junlin623</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-12-03 23:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaMain</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Server</span>(<span class="string">&quot;服务器&quot;</span>, <span class="number">6666</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Client</span>(<span class="string">&quot;客户端一&quot;</span>, <span class="number">6666</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Client</span>(<span class="string">&quot;客户端二&quot;</span>, <span class="number">6666</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果:"></a>运行结果:</h3><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230306195925411-1802051193.png" width="50%" >

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/Java%E5%AE%9E%E9%AA%8C-Swing%20%E7%BD%91%E7%BB%9C%E8%81%8A%E5%A4%A9%E5%AE%A4-junlin623/" data-id="clhrwhxjd000i8gsz50458c6u" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Java实验-Swing 涂鸦板-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/Java%E5%AE%9E%E9%AA%8C-Swing%20%E6%B6%82%E9%B8%A6%E6%9D%BF-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.100Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17171466.html">https://www.cnblogs.com/junlin623/p/17171466.html</a></p>
<hr>
<p>title: ‘Java实验-Swing 涂鸦板-junlin623’<br>date: 2023-03-02 13:13:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="实验要求："><a href="#实验要求：" class="headerlink" title="实验要求："></a>实验要求：</h3><p>涂鸦板是一个具有趣味性的小程序，它的实现原理是通过鼠标事件，控制鼠标移动结合画图功能实现。鼠标拖拽才开始绘制，松开鼠标则停止绘制。</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230302131144380-716882105.png"></p>
<h3 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h3><h4 id="–MyPaint画板类："><a href="#–MyPaint画板类：" class="headerlink" title="–MyPaint画板类："></a>–MyPaint画板类：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> java.awt.BasicStroke;</span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics2D;</span><br><span class="line"><span class="keyword">import</span> java.awt.Point;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.MouseAdapter;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.MouseEvent;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPaint</span> <span class="keyword">extends</span> <span class="title class_">JLabel</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">is_painting</span> <span class="operator">=</span> <span class="literal">false</span>;  <span class="comment">//判断是否正在绘制</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Curve&gt; curves = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  <span class="comment">//记录绘制过程中所有的曲线</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//记录使用过的线条粗细，主要是为了保留之前绘制的效果，不会让改变线条粗细影响之前的绘制</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Float&gt; lineSizes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//同上记录使用过的颜色</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Color&gt; lineColors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Float</span> <span class="variable">currentLineSize</span> <span class="operator">=</span> <span class="number">2.0f</span>;  <span class="comment">//当前线条的粗细</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Color</span> <span class="variable">currentLineColor</span> <span class="operator">=</span> Color.RED;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyPaint</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//绑定事件</span></span><br><span class="line">        <span class="type">MyMouseListener</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyMouseListener</span>();</span><br><span class="line">        <span class="built_in">this</span>.addMouseListener(handler);</span><br><span class="line">        <span class="built_in">this</span>.addMouseMotionListener(handler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCurrentLineSize</span><span class="params">(<span class="type">float</span> currentLineSize)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.currentLineSize = currentLineSize;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCurrentLineColor</span><span class="params">(Color color)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.currentLineColor = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//下面这个方法在程序运行的时候被一直调用</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">paintComponent</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.paintComponent(g);</span><br><span class="line">        <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> getWidth();</span><br><span class="line">        <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> getHeight();</span><br><span class="line">        <span class="comment">//this.setOpaque(true);</span></span><br><span class="line">        <span class="comment">//this.setBackground(Color.WHITE);  //为什么这行代码不起作用就是因为没有写上面设置透明度的代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        System.out.printf(&quot;%d %d\n&quot;, width, height);</span></span><br><span class="line">        g.setColor(Color.WHITE);</span><br><span class="line">        g.fillRect(<span class="number">0</span>,<span class="number">0</span>,width,height);</span><br><span class="line">        <span class="comment">//g.setFont(new Font(&quot;宋体&quot;, Font.BOLD, 200));</span></span><br><span class="line">        <span class="type">Graphics2D</span> <span class="variable">g2</span> <span class="operator">=</span> (Graphics2D)g;  <span class="comment">//g是Graphics对象</span></span><br><span class="line">        g2.setStroke(<span class="keyword">new</span> <span class="title class_">BasicStroke</span>(currentLineSize));</span><br><span class="line">        g2.setPaint(currentLineColor);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从曲线集合中进行绘制</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; curves.size();i++) &#123;</span><br><span class="line">            <span class="type">Curve</span> <span class="variable">curve</span> <span class="operator">=</span> curves.get(i);</span><br><span class="line">            g2.setStroke(<span class="keyword">new</span> <span class="title class_">BasicStroke</span>(lineSizes.get(i)));</span><br><span class="line">            g2.setPaint(lineColors.get(i));</span><br><span class="line">            <span class="keyword">if</span>(curve.points.size() &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="type">Point</span> <span class="variable">p1</span> <span class="operator">=</span> curve.points.get(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>;j &lt; curve.points.size();j++)&#123;</span><br><span class="line">                    <span class="type">Point</span> <span class="variable">p2</span> <span class="operator">=</span> curve.points.get(j);</span><br><span class="line">                    g.drawLine(p1.x,p1.y,p2.x,p2.y);</span><br><span class="line">                    p1 = p2;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//清空画板</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clearPaint</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.curves.clear();</span><br><span class="line">        <span class="built_in">this</span>.lineSizes.clear();</span><br><span class="line">        <span class="built_in">this</span>.lineColors.clear();</span><br><span class="line">        repaint();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//监听内部类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMouseListener</span> <span class="keyword">extends</span> <span class="title class_">MouseAdapter</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mousePressed</span><span class="params">(MouseEvent e)</span> &#123;</span><br><span class="line">            is_painting = <span class="literal">true</span>;</span><br><span class="line">            lineSizes.add(currentLineSize);</span><br><span class="line">            lineColors.add(currentLineColor);</span><br><span class="line">            <span class="type">Curve</span> <span class="variable">curve</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Curve</span>();</span><br><span class="line">            curve.points = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            curves.add(curve);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mouseReleased</span><span class="params">(MouseEvent e)</span> &#123;</span><br><span class="line">            is_painting = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mouseDragged</span><span class="params">(MouseEvent e)</span> &#123;</span><br><span class="line">            <span class="comment">//如果表示正在绘制</span></span><br><span class="line">            <span class="keyword">if</span>(is_painting) &#123;</span><br><span class="line">                <span class="comment">//取出曲线集合中的最后一条曲线（就是当前正在绘制的曲线）</span></span><br><span class="line">                <span class="type">Curve</span> <span class="variable">curve</span> <span class="operator">=</span> curves.get(curves.size() - <span class="number">1</span>);</span><br><span class="line">                curve.points.add(e.getPoint());  <span class="comment">//将当前的点加入曲线中</span></span><br><span class="line">                repaint();   <span class="comment">//重新绘制</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//曲线内部类，其属性就是曲线上的点的集合</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Curve</span> &#123;</span><br><span class="line">        List&lt;Point&gt; points;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="MyFrame窗体类"><a href="#MyFrame窗体类" class="headerlink" title="MyFrame窗体类:"></a>MyFrame窗体类:</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JComboBox;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ItemEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ItemListener;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFrame</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyFrame</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;涂鸦板&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">JPanel</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JPanel</span>();</span><br><span class="line">        root.setLayout(<span class="literal">null</span>);</span><br><span class="line">        <span class="built_in">this</span>.add(root);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//自定义画板控件</span></span><br><span class="line">        <span class="type">MyPaint</span> <span class="variable">paint</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyPaint</span>();</span><br><span class="line">        paint.setBounds(<span class="number">250</span>,<span class="number">10</span>,<span class="number">600</span>,<span class="number">600</span>);</span><br><span class="line">        root.add(paint);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//清除画板按钮</span></span><br><span class="line">        <span class="type">JButton</span> <span class="variable">clearBtn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;清空画板&quot;</span>);</span><br><span class="line">        clearBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ActionListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">                paint.clearPaint();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        clearBtn.setBounds(<span class="number">70</span>,<span class="number">40</span>,<span class="number">95</span>,<span class="number">40</span>);</span><br><span class="line">        root.add(clearBtn);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//文本标签</span></span><br><span class="line">        <span class="type">JLabel</span> <span class="variable">lineSizeLabel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JLabel</span>(<span class="string">&quot;选择线条粗细:&quot;</span>);</span><br><span class="line">        lineSizeLabel.setBounds(<span class="number">10</span>,<span class="number">300</span>,<span class="number">100</span>,<span class="number">20</span>);</span><br><span class="line">        lineSizeLabel.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;宋体&quot;</span>, Font.BOLD, <span class="number">14</span>));</span><br><span class="line">        root.add(lineSizeLabel);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//线条粗细列表</span></span><br><span class="line">        JComboBox&lt;String&gt; LineTypeField = <span class="keyword">new</span> <span class="title class_">JComboBox</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>;i &lt;= <span class="number">12</span>;i += <span class="number">2</span>) &#123;</span><br><span class="line">            LineTypeField.addItem(i+<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        LineTypeField.setBounds(<span class="number">120</span>,<span class="number">300</span>,<span class="number">100</span>,<span class="number">30</span>);</span><br><span class="line">        LineTypeField.addItemListener(<span class="keyword">new</span> <span class="title class_">ItemListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">itemStateChanged</span><span class="params">(ItemEvent e)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (e.getStateChange() == ItemEvent.SELECTED) &#123;</span><br><span class="line">                    <span class="comment">// 选择的下拉框选项</span></span><br><span class="line">                    System.out.println(e.getItem() <span class="keyword">instanceof</span> String);</span><br><span class="line">                    <span class="type">float</span> <span class="variable">size</span> <span class="operator">=</span> Float.parseFloat(String.valueOf(e.getItem()));</span><br><span class="line">                    paint.setCurrentLineSize(size);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        root.add(LineTypeField);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//文本控件</span></span><br><span class="line">        <span class="type">JLabel</span> <span class="variable">lineColorLabel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JLabel</span>(<span class="string">&quot;选择线条颜色:&quot;</span>);</span><br><span class="line">        lineColorLabel.setBounds(<span class="number">10</span>,<span class="number">200</span>,<span class="number">100</span>,<span class="number">20</span>);</span><br><span class="line">        lineColorLabel.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;宋体&quot;</span>, Font.BOLD, <span class="number">14</span>));</span><br><span class="line">        root.add(lineColorLabel);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//颜色选择列表</span></span><br><span class="line">        JComboBox&lt;String&gt; LineColorField = <span class="keyword">new</span> <span class="title class_">JComboBox</span>&lt;&gt;();</span><br><span class="line">        LineColorField.addItem(<span class="string">&quot;红色&quot;</span>);</span><br><span class="line">        LineColorField.addItem(<span class="string">&quot;蓝色&quot;</span>);</span><br><span class="line">        LineColorField.addItem(<span class="string">&quot;粉红色&quot;</span>);</span><br><span class="line">        LineColorField.addItem(<span class="string">&quot;橙色&quot;</span>);</span><br><span class="line">        LineColorField.addItem(<span class="string">&quot;绿色&quot;</span>);</span><br><span class="line">        LineColorField.setBounds(<span class="number">120</span>,<span class="number">200</span>,<span class="number">100</span>,<span class="number">30</span>);</span><br><span class="line">        LineColorField.addItemListener(<span class="keyword">new</span> <span class="title class_">ItemListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">itemStateChanged</span><span class="params">(ItemEvent e)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (e.getStateChange() == ItemEvent.SELECTED) &#123;</span><br><span class="line">                    <span class="comment">// 选择的下拉框选项</span></span><br><span class="line">                    Color color;</span><br><span class="line">                    <span class="keyword">switch</span> (String.valueOf(e.getItem())) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;红色&quot;</span>:</span><br><span class="line">                            color = Color.RED;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;蓝色&quot;</span>:</span><br><span class="line">                            color = Color.BLUE;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;粉红色&quot;</span>:</span><br><span class="line">                            color = Color.PINK;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;橙色&quot;</span>:</span><br><span class="line">                            color = Color.ORANGE;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&quot;绿色&quot;</span>:</span><br><span class="line">                            color = Color.GREEN;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">default</span>:</span><br><span class="line">                            color = Color.BLACK;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    paint.setCurrentLineColor(color);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        root.add(LineColorField);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.setSize(<span class="number">1000</span>,<span class="number">700</span>);</span><br><span class="line">        setVisible(<span class="literal">true</span>);</span><br><span class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="–JavaMain主类："><a href="#–JavaMain主类：" class="headerlink" title="–JavaMain主类："></a>–JavaMain主类：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaMain</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MyFrame</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/Java%E5%AE%9E%E9%AA%8C-Swing%20%E6%B6%82%E9%B8%A6%E6%9D%BF-junlin623/" data-id="clhrwhxjc000g8gsz8dxo0jo0" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Java实验-Swing 色子游戏-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/Java%E5%AE%9E%E9%AA%8C-Swing%20%E8%89%B2%E5%AD%90%E6%B8%B8%E6%88%8F-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.098Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17171478.html">https://www.cnblogs.com/junlin623/p/17171478.html</a></p>
<hr>
<p>title: ‘Java实验-Swing 色子游戏-junlin623’<br>date: 2023-03-02 13:20:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>一、实验要求：、</p>
<ol>
<li>筛子游戏是一个具有趣味性的小游戏，它的实现原理是绘制图形，加载图片，通过鼠标事件点击按钮，晃动色子采用的是定时器，每隔200毫秒切换一次色子的图片实现：</li>
</ol>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230302131857232-859737506.png"></p>
<p>请用Java图形界面的知识，编写以上软件。</p>
<h3 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h3><h4 id="MyFrame主界面类和MyTask定时器类"><a href="#MyFrame主界面类和MyTask定时器类" class="headerlink" title="MyFrame主界面类和MyTask定时器类"></a>MyFrame主界面类和MyTask定时器类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer_8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Dimension;</span><br><span class="line"><span class="keyword">import</span> java.awt.FlowLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.Window;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.util.Timer;</span><br><span class="line"><span class="keyword">import</span> java.util.TimerTask;</span><br><span class="line"><span class="keyword">import</span> javax.swing.ImageIcon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFrame</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> <span class="number">100</span>; <span class="comment">//记录得分</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">1</span>;   <span class="comment">//记录当前色子的点数</span></span><br><span class="line">    <span class="keyword">public</span> JLabel imageLabel;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">String</span> <span class="variable">filepath</span> <span class="operator">=</span> <span class="string">&quot;D:/onedrive/桌面/Java学习/Java作业/实验/实验8色子游戏/色子素材/a&quot;</span>;</span><br><span class="line">    <span class="comment">//由于我没有新开一个点击处理类，就直接将整个窗口放到全局了</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">MyFrame</span> <span class="variable">window</span> <span class="operator">=</span> <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">public</span> Timer timer; <span class="comment">//定时器</span></span><br><span class="line">    <span class="keyword">public</span> JLabel titleLabel;  <span class="comment">//文字</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">isStop</span> <span class="operator">=</span> <span class="literal">true</span>;  <span class="comment">//判断当前摇色子是否处于停止状态</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyFrame</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;xxx&quot;</span>);</span><br><span class="line">        <span class="type">JPanel</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JPanel</span>();</span><br><span class="line">        root.setLayout(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        titleLabel = <span class="keyword">new</span> <span class="title class_">JLabel</span>(<span class="string">&quot;当前分数为:&quot;</span> + score);</span><br><span class="line">        titleLabel.setBounds(<span class="number">150</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">20</span>);</span><br><span class="line">        root.add(titleLabel);</span><br><span class="line"></span><br><span class="line">        imageLabel = <span class="keyword">new</span> <span class="title class_">JLabel</span>();</span><br><span class="line">        imageLabel.setIcon(<span class="keyword">new</span> <span class="title class_">ImageIcon</span>(filepath + cnt + <span class="string">&quot;.jpg&quot;</span>));</span><br><span class="line">        imageLabel.setBounds(<span class="number">150</span>, <span class="number">80</span>, <span class="number">120</span>, <span class="number">120</span>);</span><br><span class="line">        root.add(imageLabel);</span><br><span class="line"></span><br><span class="line">        <span class="type">JButton</span> <span class="variable">playBtn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;摇色子&quot;</span>);</span><br><span class="line">        playBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ActionListener</span>() &#123;</span><br><span class="line">            <span class="comment">//摇色子按键处理</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">                <span class="comment">//如果上一次没有停止就不继续执行，因为这样会让定时加快</span></span><br><span class="line">                <span class="keyword">if</span>(isStop == <span class="literal">false</span>) <span class="keyword">return</span> ;</span><br><span class="line">                isStop = <span class="literal">false</span>;</span><br><span class="line">                timer = <span class="keyword">new</span> <span class="title class_">Timer</span>();</span><br><span class="line">                timer.schedule(<span class="keyword">new</span> <span class="title class_">MyTask</span>(window), <span class="number">0</span>, <span class="number">200</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        playBtn.setBounds(<span class="number">150</span>, <span class="number">200</span>, <span class="number">120</span>, <span class="number">50</span>);</span><br><span class="line">        root.add(playBtn);</span><br><span class="line"></span><br><span class="line">        <span class="type">JButton</span> <span class="variable">bigBtn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;买大&quot;</span>);</span><br><span class="line">        bigBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ActionListener</span>() &#123;</span><br><span class="line">            <span class="comment">//买大按键处理</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">                <span class="comment">//如果摇色子停止了就不能再判断分数了</span></span><br><span class="line">                <span class="keyword">if</span>(isStop == <span class="literal">true</span>) <span class="keyword">return</span> ;</span><br><span class="line">                timer.cancel();</span><br><span class="line">                isStop = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">if</span>(cnt &gt;= <span class="number">4</span>) &#123;</span><br><span class="line">                    score += <span class="number">10</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    score -= <span class="number">10</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                titleLabel.setText(<span class="string">&quot;当前分数 为&quot;</span> + score);</span><br><span class="line">                titleLabel.paintImmediately(titleLabel.getBounds());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        bigBtn.setBounds(<span class="number">100</span>, <span class="number">300</span>, <span class="number">80</span>, <span class="number">50</span>);</span><br><span class="line">        root.add(bigBtn);</span><br><span class="line"></span><br><span class="line">        <span class="type">JButton</span> <span class="variable">smallyBtn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;买小&quot;</span>);</span><br><span class="line">        smallyBtn.addActionListener(<span class="keyword">new</span> <span class="title class_">ActionListener</span>() &#123;</span><br><span class="line">            <span class="comment">//买小按键处理</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">                <span class="comment">//如果摇色子停止了就不能再判断分数了</span></span><br><span class="line">                <span class="keyword">if</span>(isStop == <span class="literal">true</span>) <span class="keyword">return</span> ;</span><br><span class="line">                timer.cancel();</span><br><span class="line">                isStop = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">if</span>(cnt &lt; <span class="number">4</span>) &#123;</span><br><span class="line">                    score += <span class="number">10</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    score -= <span class="number">10</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                titleLabel.setText(<span class="string">&quot;当前分数 为:&quot;</span> + score);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        smallyBtn.setBounds(<span class="number">220</span>, <span class="number">300</span>, <span class="number">80</span>, <span class="number">50</span>);</span><br><span class="line">        root.add(smallyBtn);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.add(root);</span><br><span class="line">        <span class="built_in">this</span>.setSize(<span class="keyword">new</span> <span class="title class_">Dimension</span>(<span class="number">400</span>, <span class="number">600</span>));</span><br><span class="line">        <span class="built_in">this</span>.setVisible(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定时器线程用来进行摇色子</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyTask</span> <span class="keyword">extends</span> <span class="title class_">TimerTask</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> MyFrame frame;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyTask</span><span class="params">(MyFrame frame)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.frame = frame;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//生成一个随机数用来选择目录下的一张色子图片</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">1</span> + (<span class="type">int</span>)(Math.random() * (<span class="number">6</span>-<span class="number">1</span>+<span class="number">1</span>));</span><br><span class="line">        <span class="built_in">this</span>.frame.cnt = n;</span><br><span class="line">        <span class="built_in">this</span>.frame.imageLabel.setIcon(<span class="keyword">new</span> <span class="title class_">ImageIcon</span>(<span class="built_in">this</span>.frame.filepath + <span class="built_in">this</span>.frame.cnt + <span class="string">&quot;.jpg&quot;</span>));</span><br><span class="line">        <span class="comment">//frame.imageLabel.paintImmediately(frame.imageLabel.getBounds());</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="JavaMain类："><a href="#JavaMain类：" class="headerlink" title="JavaMain类："></a>JavaMain类：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.junlin.exer_8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaMain</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MyFrame</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/Java%E5%AE%9E%E9%AA%8C-Swing%20%E8%89%B2%E5%AD%90%E6%B8%B8%E6%88%8F-junlin623/" data-id="clhrwhxje000j8gsz70tte35w" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/18/%E7%9B%B4%E8%BF%9E%E8%B7%AF%E7%94%B1%E8%A1%A8%E9%A1%B9%E8%A7%A3%E6%9E%90-junlin623/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/05/18/%E6%95%B4%E6%95%B0%E5%88%92%E5%88%86%E9%97%AE%E9%A2%98-junlin623/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/05/18/%E5%8E%9F%E7%94%9F%E6%96%B9%E5%BC%8F%E9%83%A8%E7%BD%B2JavaWeb%E9%A1%B9%E7%9B%AE%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA-junlin623/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/05/18/%E5%8E%9F%E6%9D%A5%E6%98%AFvmware-hostd%E7%A8%8B%E5%BA%8F%E5%8D%A0%E7%94%A8%E4%BA%86443%E7%AB%AF%E5%8F%A3-junlin623/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/05/18/%E5%AD%A6%E7%94%9F%E5%8F%AF%E4%BB%A5%E7%99%BD%E5%AB%96%E9%98%BF%E9%87%8C%E4%BA%91ECS%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8D%8A%E5%B9%B4~~-junlin623/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>