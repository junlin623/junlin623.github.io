<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-蓝桥杯-网络分析-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.173Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17061122.html">https://www.cnblogs.com/junlin623/p/17061122.html</a></p>
<hr>
<p>title: ‘蓝桥杯-网络分析-junlin623’<br>date: 2023-01-19 10:16:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="网络分析"><a href="#网络分析" class="headerlink" title="网络分析"></a>网络分析</h3><p>小明正在做一个网络实验。</p>
<p>他设置了 n 台电脑，称为节点，用于收发和存储数据。</p>
<p>初始时，所有节点都是独立的，不存在任何连接。</p>
<p>小明可以通过网线将两个节点连接起来，连接后两个节点就可以互相通信了。</p>
<p>两个节点如果存在网线连接，称为相邻。</p>
<p>小明有时会测试当时的网络，他会在某个节点发送一条信息，信息会发送到每个相邻的节点，之后这些节点又会转发到自己相邻的节点，直到所有直接或间接相邻的节点都收到了信息。</p>
<p>所有发送和接收的节点都会将信息存储下来。</p>
<p>一条信息只存储一次。</p>
<p>给出小明连接和测试的过程，请计算出每个节点存储信息的大小。</p>
<p><strong>输入格式</strong><br>输入的第一行包含两个整数 n,m，分别表示节点数量和操作数量。</p>
<p>节点从 1 至 n 编号。</p>
<p>接下来 m 行，每行三个整数，表示一个操作。</p>
<p>如果操作为 <code>1 a b</code>，表示将节点 a 和节点 b 通过网线连接起来。当 a &#x3D; b 时，表示连接了一个自环，对网络没有实质影响。<br>如果操作为 <code>2 p t</code>，表示在节点 p 上发送一条大小为 t 的信息。<br><strong>输出格式</strong><br>输出一行，包含 n 个整数，相邻整数之间用一个空格分割，依次表示进行完上述操作后节点 1 至节点 n 上存储信息的大小。</p>
<p><strong>数据范围</strong><br>$1≤n≤10000,$<br>$1≤m≤105,$<br>$1≤t≤100$<br><strong>输入样例1：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">4 8</span><br><span class="line">1 1 2</span><br><span class="line">2 1 10</span><br><span class="line">2 3 5</span><br><span class="line">1 4 1</span><br><span class="line">2 2 2</span><br><span class="line">1 1 2</span><br><span class="line">1 2 4</span><br><span class="line">2 2 1</span><br></pre></td></tr></table></figure>
<p><strong>输出样例1：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">13 13 5 3</span><br></pre></td></tr></table></figure>

<h4 id="dfs暴力做法"><a href="#dfs暴力做法" class="headerlink" title="dfs暴力做法"></a>dfs暴力做法</h4><p>该方法可以拿70%的分数，适合骗分</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> cnt[N], n, m;</span><br><span class="line"><span class="type">bool</span> vis[N];</span><br><span class="line">VI G[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">    vis[u] = <span class="number">1</span>;</span><br><span class="line">    cnt[u] += t;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> v : G[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span>(vis[v]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(v,t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="built_in">rep</span>(_,<span class="number">0</span>,m) &#123;</span><br><span class="line">        <span class="type">int</span> op;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;op);</span><br><span class="line">        <span class="keyword">if</span>(op ==  <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="type">int</span> a, b;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">            G[a].<span class="built_in">push_back</span>(b);</span><br><span class="line">            G[b].<span class="built_in">push_back</span>(a);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> p, t;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;p, &amp;t);</span><br><span class="line">            <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="built_in">sizeof</span>(vis));</span><br><span class="line">            <span class="built_in">dfs</span>(p,t);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, cnt[i]);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="正解：并查集的高级操作"><a href="#正解：并查集的高级操作" class="headerlink" title="正解：并查集的高级操作"></a>正解：并查集的高级操作</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> fa[N], d[N], n, m;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x == fa[x] || fa[fa[x]] == fa[x]) <span class="keyword">return</span> fa[x];</span><br><span class="line">    <span class="type">int</span> t = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">    d[x] += d[fa[x]];</span><br><span class="line">    fa[x] = t;</span><br><span class="line">    <span class="keyword">return</span> fa[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) fa[i] = i;</span><br><span class="line">    <span class="built_in">rep</span>(_,<span class="number">0</span>,m) &#123;</span><br><span class="line">        <span class="type">int</span> op; </span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;op);</span><br><span class="line">        <span class="keyword">if</span>(op ==  <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="type">int</span> a, b;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">            <span class="type">int</span> fx = <span class="built_in">find</span>(a), fy = <span class="built_in">find</span>(b);</span><br><span class="line">            <span class="keyword">if</span>(fx != fy) &#123;</span><br><span class="line">                d[fx] -= d[fy];</span><br><span class="line">                fa[fx] = fy;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> p, t;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;p, &amp;t);</span><br><span class="line">            d[<span class="built_in">find</span>(p)] += t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i == <span class="built_in">find</span>(i)) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, d[i]);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, d[i] + d[<span class="built_in">find</span>(i)]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90-junlin623/" data-id="clhrwf8jp0025ekszei7f9plk" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-蓝桥杯-交换瓶子-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E4%BA%A4%E6%8D%A2%E7%93%B6%E5%AD%90-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.171Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17038474.html">https://www.cnblogs.com/junlin623/p/17038474.html</a></p>
<hr>
<p>title: ‘蓝桥杯-交换瓶子-junlin623’<br>date: 2023-01-09 23:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="交换瓶子-第七届蓝桥杯省赛JAVA-A组"><a href="#交换瓶子-第七届蓝桥杯省赛JAVA-A组" class="headerlink" title="交换瓶子 (第七届蓝桥杯省赛JAVA A组)"></a>交换瓶子 (第七届蓝桥杯省赛JAVA A组)</h3><p>有 N 个瓶子，编号 1∼N，放在架子上。</p>
<p>比如有 5 个瓶子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 1 3 5 4</span><br></pre></td></tr></table></figure>
<p>要求每次拿起 2 个瓶子，交换它们的位置。</p>
<p>经过若干次后，使得瓶子的序号为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5</span><br></pre></td></tr></table></figure>
<p>对于这么简单的情况，显然，至少需要交换 2 次就可以复位。</p>
<p>如果瓶子更多呢？你可以通过编程来解决。</p>
<p>输入格式<br>第一行包含一个整数 N，表示瓶子数量。</p>
<p>第二行包含 N 个整数，表示瓶子目前的排列状况。</p>
<p>输出格式<br>输出一个正整数，表示至少交换多少次，才能完成排序。</p>
<p>数据范围<br>1≤ N≤ 10000,</p>
<p>输入样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">3 1 2 5 4</span><br></pre></td></tr></table></figure>

<p>输出样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<p>输入样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">5 4 3 2 1</span><br></pre></td></tr></table></figure>

<p>输出样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<h4 id="假定：以下均根据这个样例进行"><a href="#假定：以下均根据这个样例进行" class="headerlink" title="假定：以下均根据这个样例进行"></a>假定：以下均根据这个样例进行</h4><p>给定序列A: 4 3 1 5 2</p>
<p>目标序列：1 2 3 4 5 </p>
<h3 id="1-贪心-模拟"><a href="#1-贪心-模拟" class="headerlink" title="1. 贪心+模拟:"></a>1. 贪心+模拟:</h3><p>我们任何时候的交换都只能交换有意义的数字，否则肯定不是最优的<br>比如序列A中交换1 和 5，交换后1 和 5两个数字都没有到本该属于它们的位置上，这就属于无效交换</p>
<p>所以我们只需要遍历序列A，将本该属于这个位置上的数字换过来，交换次数加1，这样遍历到序列A末尾一定就会变成 1 2 3 4 5这个目的状态<br>在这个过程中我们需要维护一个哈希表来记录每个数字当前所在的位置</p>
<h4 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> a[N], hs[N], n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        hs[a[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] != i) &#123;</span><br><span class="line">            <span class="type">int</span> t = a[i];</span><br><span class="line">            <span class="built_in">swap</span>(a[i],a[hs[i]]);</span><br><span class="line">            hs[t] = hs[i];</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 在交换的过程中，哈希表hs[]也需要改变</p>
<h3 id="2-贪心-图论-并查集"><a href="#2-贪心-图论-并查集" class="headerlink" title="2. 贪心+图论+并查集"></a>2. 贪心+图论+并查集</h3><p>序列A：    4 3 1 5 2<br>目的序列： 1 2 3 4 5</p>
<h4 id="序列A"><a href="#序列A" class="headerlink" title="序列Ａ"></a>序列Ａ</h4><p>可知4在1的位置，3在2的位置，1在3的位置，5在4的位置，2在5的位置<br>表示：<br>4 -&gt; 1, 3 -&gt; 2, 1 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p>整理一下会发现构成一个环：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230002488-1180558584.png"></p>
<h4 id="那么为什么会构成环呢？"><a href="#那么为什么会构成环呢？" class="headerlink" title="那么为什么会构成环呢？"></a>那么为什么会构成环呢？</h4><p>不难发现序列A中的每个数值都对应一个目的序列中的一个位置，根据我们的定义也就是有一条出边，而序列A中的每个数值也是目的序列中的数值，只不过位置不同，那么这个数值也一定会被其他数所指向，也就是会有一条入边</p>
<h4 id="目的序列："><a href="#目的序列：" class="headerlink" title="目的序列："></a>目的序列：</h4><p>1 -&gt; 1, 2 -&gt; 2, 3 -&gt; 3, 4 -&gt; 4, 5 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230348305-604769587.png"></p>
<p>我们的目的就是从序列A的图表示到目的序列的图表示，也就是每个数构成一个自环</p>
<p>根据我们之前提到的贪心策略：每次交换一定要至少将一个数值归到正确位置，也就是每次交换我们都要分出来一个自环，剩下的数依然会构成环</p>
<p>比如交换序列A中的1 和 3，</p>
<p>此时一个数3归到正确的位置</p>
<p>序列A: 4 1 3 5 2<br>目的序列： 1 2 3 4 5</p>
<p>4 -&gt; 1, 1 -&gt; 2, 3 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230841222-926316156.png"></p>
<p>由此我们可以发现，每次根据贪心策略进行交换瓶子都会分离出一个自环，知道分出 n 个自环为止</p>
<p>综上所述，我们需要从原序列A中的若干个环（不一定是一个，可以自己模拟一下题目样例）变成 n 个环, 交换的次数就是 （n - 原序列中的环的个数)， 即为答案</p>
<p>本题中如果想要求原序列A中的环的个数可以使用并查集，因为只要两个数相连，之后这两个数与其他数必定会构成环, 所以仿照并查集求连通块的数量的写法即可</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> fa[N], n;</span><br><span class="line"></span><br><span class="line"><span class="comment">//并查集模板</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x == fa[x] ? fa[x] : fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="comment">//初始化并查集</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) fa[i] = i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理输入并进行集合合并</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);    </span><br><span class="line">        <span class="type">int</span> fx = <span class="built_in">find</span>(x), fy = <span class="built_in">find</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(fx != fy) fa[x] = fy;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找连通块的数量</span></span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="keyword">if</span>(fa[i] == i) cnt++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//n减去环的数量就是答案（本题中环的数量与连通块的数量相同）</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, n-cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17038474.html">https://www.cnblogs.com/junlin623/p/17038474.html</a></p>
<hr>
<p>title: ‘蓝桥杯-交换瓶子-junlin623’<br>date: 2023-01-09 23:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="交换瓶子-第七届蓝桥杯省赛JAVA-A组-1"><a href="#交换瓶子-第七届蓝桥杯省赛JAVA-A组-1" class="headerlink" title="交换瓶子 (第七届蓝桥杯省赛JAVA A组)"></a>交换瓶子 (第七届蓝桥杯省赛JAVA A组)</h3><p>有 N 个瓶子，编号 1∼N，放在架子上。</p>
<p>比如有 5 个瓶子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 1 3 5 4</span><br></pre></td></tr></table></figure>
<p>要求每次拿起 2 个瓶子，交换它们的位置。</p>
<p>经过若干次后，使得瓶子的序号为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5</span><br></pre></td></tr></table></figure>
<p>对于这么简单的情况，显然，至少需要交换 2 次就可以复位。</p>
<p>如果瓶子更多呢？你可以通过编程来解决。</p>
<p>输入格式<br>第一行包含一个整数 N，表示瓶子数量。</p>
<p>第二行包含 N 个整数，表示瓶子目前的排列状况。</p>
<p>输出格式<br>输出一个正整数，表示至少交换多少次，才能完成排序。</p>
<p>数据范围<br>1≤ N≤ 10000,</p>
<p>输入样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">3 1 2 5 4</span><br></pre></td></tr></table></figure>

<p>输出样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<p>输入样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">5 4 3 2 1</span><br></pre></td></tr></table></figure>

<p>输出样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<h4 id="假定：以下均根据这个样例进行-1"><a href="#假定：以下均根据这个样例进行-1" class="headerlink" title="假定：以下均根据这个样例进行"></a>假定：以下均根据这个样例进行</h4><p>给定序列A: 4 3 1 5 2</p>
<p>目标序列：1 2 3 4 5 </p>
<h3 id="1-贪心-模拟-1"><a href="#1-贪心-模拟-1" class="headerlink" title="1. 贪心+模拟:"></a>1. 贪心+模拟:</h3><p>我们任何时候的交换都只能交换有意义的数字，否则肯定不是最优的<br>比如序列A中交换1 和 5，交换后1 和 5两个数字都没有到本该属于它们的位置上，这就属于无效交换</p>
<p>所以我们只需要遍历序列A，将本该属于这个位置上的数字换过来，交换次数加1，这样遍历到序列A末尾一定就会变成 1 2 3 4 5这个目的状态<br>在这个过程中我们需要维护一个哈希表来记录每个数字当前所在的位置</p>
<h4 id="代码：-1"><a href="#代码：-1" class="headerlink" title="代码："></a>代码：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> a[N], hs[N], n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        hs[a[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] != i) &#123;</span><br><span class="line">            <span class="type">int</span> t = a[i];</span><br><span class="line">            <span class="built_in">swap</span>(a[i],a[hs[i]]);</span><br><span class="line">            hs[t] = hs[i];</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 在交换的过程中，哈希表hs[]也需要改变</p>
<h3 id="2-贪心-图论-并查集-1"><a href="#2-贪心-图论-并查集-1" class="headerlink" title="2. 贪心+图论+并查集"></a>2. 贪心+图论+并查集</h3><p>序列A：    4 3 1 5 2<br>目的序列： 1 2 3 4 5</p>
<h4 id="序列A-1"><a href="#序列A-1" class="headerlink" title="序列Ａ"></a>序列Ａ</h4><p>可知4在1的位置，3在2的位置，1在3的位置，5在4的位置，2在5的位置<br>表示：<br>4 -&gt; 1, 3 -&gt; 2, 1 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p>整理一下会发现构成一个环：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230002488-1180558584.png"></p>
<h4 id="那么为什么会构成环呢？-1"><a href="#那么为什么会构成环呢？-1" class="headerlink" title="那么为什么会构成环呢？"></a>那么为什么会构成环呢？</h4><p>不难发现序列A中的每个数值都对应一个目的序列中的一个位置，根据我们的定义也就是有一条出边，而序列A中的每个数值也是目的序列中的数值，只不过位置不同，那么这个数值也一定会被其他数所指向，也就是会有一条入边</p>
<h4 id="目的序列：-1"><a href="#目的序列：-1" class="headerlink" title="目的序列："></a>目的序列：</h4><p>1 -&gt; 1, 2 -&gt; 2, 3 -&gt; 3, 4 -&gt; 4, 5 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230348305-604769587.png"></p>
<p>我们的目的就是从序列A的图表示到目的序列的图表示，也就是每个数构成一个自环</p>
<p>根据我们之前提到的贪心策略：每次交换一定要至少将一个数值归到正确位置，也就是每次交换我们都要分出来一个自环，剩下的数依然会构成环</p>
<p>比如交换序列A中的1 和 3，</p>
<p>此时一个数3归到正确的位置</p>
<p>序列A: 4 1 3 5 2<br>目的序列： 1 2 3 4 5</p>
<p>4 -&gt; 1, 1 -&gt; 2, 3 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230841222-926316156.png"></p>
<p>由此我们可以发现，每次根据贪心策略进行交换瓶子都会分离出一个自环，知道分出 n 个自环为止</p>
<p>综上所述，我们需要从原序列A中的若干个环（不一定是一个，可以自己模拟一下题目样例）变成 n 个环, 交换的次数就是 （n - 原序列中的环的个数)， 即为答案</p>
<p>本题中如果想要求原序列A中的环的个数可以使用并查集，因为只要两个数相连，之后这两个数与其他数必定会构成环, 所以仿照并查集求连通块的数量的写法即可</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> fa[N], n;</span><br><span class="line"></span><br><span class="line"><span class="comment">//并查集模板</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x == fa[x] ? fa[x] : fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="comment">//初始化并查集</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) fa[i] = i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理输入并进行集合合并</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);    </span><br><span class="line">        <span class="type">int</span> fx = <span class="built_in">find</span>(x), fy = <span class="built_in">find</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(fx != fy) fa[x] = fy;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找连通块的数量</span></span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="keyword">if</span>(fa[i] == i) cnt++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//n减去环的数量就是答案（本题中环的数量与连通块的数量相同）</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, n-cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17038474.html">https://www.cnblogs.com/junlin623/p/17038474.html</a></p>
<hr>
<p>title: ‘蓝桥杯-交换瓶子-junlin623’<br>date: 2023-01-09 23:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="交换瓶子-第七届蓝桥杯省赛JAVA-A组-2"><a href="#交换瓶子-第七届蓝桥杯省赛JAVA-A组-2" class="headerlink" title="交换瓶子 (第七届蓝桥杯省赛JAVA A组)"></a>交换瓶子 (第七届蓝桥杯省赛JAVA A组)</h3><p>有 N 个瓶子，编号 1∼N，放在架子上。</p>
<p>比如有 5 个瓶子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 1 3 5 4</span><br></pre></td></tr></table></figure>
<p>要求每次拿起 2 个瓶子，交换它们的位置。</p>
<p>经过若干次后，使得瓶子的序号为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5</span><br></pre></td></tr></table></figure>
<p>对于这么简单的情况，显然，至少需要交换 2 次就可以复位。</p>
<p>如果瓶子更多呢？你可以通过编程来解决。</p>
<p>输入格式<br>第一行包含一个整数 N，表示瓶子数量。</p>
<p>第二行包含 N 个整数，表示瓶子目前的排列状况。</p>
<p>输出格式<br>输出一个正整数，表示至少交换多少次，才能完成排序。</p>
<p>数据范围<br>1≤ N≤ 10000,</p>
<p>输入样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">3 1 2 5 4</span><br></pre></td></tr></table></figure>

<p>输出样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<p>输入样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">5 4 3 2 1</span><br></pre></td></tr></table></figure>

<p>输出样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<h4 id="假定：以下均根据这个样例进行-2"><a href="#假定：以下均根据这个样例进行-2" class="headerlink" title="假定：以下均根据这个样例进行"></a>假定：以下均根据这个样例进行</h4><p>给定序列A: 4 3 1 5 2</p>
<p>目标序列：1 2 3 4 5 </p>
<h3 id="1-贪心-模拟-2"><a href="#1-贪心-模拟-2" class="headerlink" title="1. 贪心+模拟:"></a>1. 贪心+模拟:</h3><p>我们任何时候的交换都只能交换有意义的数字，否则肯定不是最优的<br>比如序列A中交换1 和 5，交换后1 和 5两个数字都没有到本该属于它们的位置上，这就属于无效交换</p>
<p>所以我们只需要遍历序列A，将本该属于这个位置上的数字换过来，交换次数加1，这样遍历到序列A末尾一定就会变成 1 2 3 4 5这个目的状态<br>在这个过程中我们需要维护一个哈希表来记录每个数字当前所在的位置</p>
<h4 id="代码：-2"><a href="#代码：-2" class="headerlink" title="代码："></a>代码：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> a[N], hs[N], n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        hs[a[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] != i) &#123;</span><br><span class="line">            <span class="type">int</span> t = a[i];</span><br><span class="line">            <span class="built_in">swap</span>(a[i],a[hs[i]]);</span><br><span class="line">            hs[t] = hs[i];</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 在交换的过程中，哈希表hs[]也需要改变</p>
<h3 id="2-贪心-图论-并查集-2"><a href="#2-贪心-图论-并查集-2" class="headerlink" title="2. 贪心+图论+并查集"></a>2. 贪心+图论+并查集</h3><p>序列A：    4 3 1 5 2<br>目的序列： 1 2 3 4 5</p>
<h4 id="序列A-2"><a href="#序列A-2" class="headerlink" title="序列Ａ"></a>序列Ａ</h4><p>可知4在1的位置，3在2的位置，1在3的位置，5在4的位置，2在5的位置<br>表示：<br>4 -&gt; 1, 3 -&gt; 2, 1 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p>整理一下会发现构成一个环：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230002488-1180558584.png"></p>
<h4 id="那么为什么会构成环呢？-2"><a href="#那么为什么会构成环呢？-2" class="headerlink" title="那么为什么会构成环呢？"></a>那么为什么会构成环呢？</h4><p>不难发现序列A中的每个数值都对应一个目的序列中的一个位置，根据我们的定义也就是有一条出边，而序列A中的每个数值也是目的序列中的数值，只不过位置不同，那么这个数值也一定会被其他数所指向，也就是会有一条入边</p>
<h4 id="目的序列：-2"><a href="#目的序列：-2" class="headerlink" title="目的序列："></a>目的序列：</h4><p>1 -&gt; 1, 2 -&gt; 2, 3 -&gt; 3, 4 -&gt; 4, 5 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230348305-604769587.png"></p>
<p>我们的目的就是从序列A的图表示到目的序列的图表示，也就是每个数构成一个自环</p>
<p>根据我们之前提到的贪心策略：每次交换一定要至少将一个数值归到正确位置，也就是每次交换我们都要分出来一个自环，剩下的数依然会构成环</p>
<p>比如交换序列A中的1 和 3，</p>
<p>此时一个数3归到正确的位置</p>
<p>序列A: 4 1 3 5 2<br>目的序列： 1 2 3 4 5</p>
<p>4 -&gt; 1, 1 -&gt; 2, 3 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230841222-926316156.png"></p>
<p>由此我们可以发现，每次根据贪心策略进行交换瓶子都会分离出一个自环，知道分出 n 个自环为止</p>
<p>综上所述，我们需要从原序列A中的若干个环（不一定是一个，可以自己模拟一下题目样例）变成 n 个环, 交换的次数就是 （n - 原序列中的环的个数)， 即为答案</p>
<p>本题中如果想要求原序列A中的环的个数可以使用并查集，因为只要两个数相连，之后这两个数与其他数必定会构成环, 所以仿照并查集求连通块的数量的写法即可</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> fa[N], n;</span><br><span class="line"></span><br><span class="line"><span class="comment">//并查集模板</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x == fa[x] ? fa[x] : fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="comment">//初始化并查集</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) fa[i] = i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理输入并进行集合合并</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);    </span><br><span class="line">        <span class="type">int</span> fx = <span class="built_in">find</span>(x), fy = <span class="built_in">find</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(fx != fy) fa[x] = fy;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找连通块的数量</span></span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="keyword">if</span>(fa[i] == i) cnt++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//n减去环的数量就是答案（本题中环的数量与连通块的数量相同）</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, n-cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17038474.html">https://www.cnblogs.com/junlin623/p/17038474.html</a></p>
<hr>
<p>title: ‘蓝桥杯-交换瓶子-junlin623’<br>date: 2023-01-09 23:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="交换瓶子-第七届蓝桥杯省赛JAVA-A组-3"><a href="#交换瓶子-第七届蓝桥杯省赛JAVA-A组-3" class="headerlink" title="交换瓶子 (第七届蓝桥杯省赛JAVA A组)"></a>交换瓶子 (第七届蓝桥杯省赛JAVA A组)</h3><p>有 N 个瓶子，编号 1∼N，放在架子上。</p>
<p>比如有 5 个瓶子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 1 3 5 4</span><br></pre></td></tr></table></figure>
<p>要求每次拿起 2 个瓶子，交换它们的位置。</p>
<p>经过若干次后，使得瓶子的序号为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5</span><br></pre></td></tr></table></figure>
<p>对于这么简单的情况，显然，至少需要交换 2 次就可以复位。</p>
<p>如果瓶子更多呢？你可以通过编程来解决。</p>
<p>输入格式<br>第一行包含一个整数 N，表示瓶子数量。</p>
<p>第二行包含 N 个整数，表示瓶子目前的排列状况。</p>
<p>输出格式<br>输出一个正整数，表示至少交换多少次，才能完成排序。</p>
<p>数据范围<br>1≤ N≤ 10000,</p>
<p>输入样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">3 1 2 5 4</span><br></pre></td></tr></table></figure>

<p>输出样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<p>输入样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">5 4 3 2 1</span><br></pre></td></tr></table></figure>

<p>输出样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<h4 id="假定：以下均根据这个样例进行-3"><a href="#假定：以下均根据这个样例进行-3" class="headerlink" title="假定：以下均根据这个样例进行"></a>假定：以下均根据这个样例进行</h4><p>给定序列A: 4 3 1 5 2</p>
<p>目标序列：1 2 3 4 5 </p>
<h3 id="1-贪心-模拟-3"><a href="#1-贪心-模拟-3" class="headerlink" title="1. 贪心+模拟:"></a>1. 贪心+模拟:</h3><p>我们任何时候的交换都只能交换有意义的数字，否则肯定不是最优的<br>比如序列A中交换1 和 5，交换后1 和 5两个数字都没有到本该属于它们的位置上，这就属于无效交换</p>
<p>所以我们只需要遍历序列A，将本该属于这个位置上的数字换过来，交换次数加1，这样遍历到序列A末尾一定就会变成 1 2 3 4 5这个目的状态<br>在这个过程中我们需要维护一个哈希表来记录每个数字当前所在的位置</p>
<h4 id="代码：-3"><a href="#代码：-3" class="headerlink" title="代码："></a>代码：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> a[N], hs[N], n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        hs[a[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] != i) &#123;</span><br><span class="line">            <span class="type">int</span> t = a[i];</span><br><span class="line">            <span class="built_in">swap</span>(a[i],a[hs[i]]);</span><br><span class="line">            hs[t] = hs[i];</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 在交换的过程中，哈希表hs[]也需要改变</p>
<h3 id="2-贪心-图论-并查集-3"><a href="#2-贪心-图论-并查集-3" class="headerlink" title="2. 贪心+图论+并查集"></a>2. 贪心+图论+并查集</h3><p>序列A：    4 3 1 5 2<br>目的序列： 1 2 3 4 5</p>
<h4 id="序列A-3"><a href="#序列A-3" class="headerlink" title="序列Ａ"></a>序列Ａ</h4><p>可知4在1的位置，3在2的位置，1在3的位置，5在4的位置，2在5的位置<br>表示：<br>4 -&gt; 1, 3 -&gt; 2, 1 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p>整理一下会发现构成一个环：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230002488-1180558584.png"></p>
<h4 id="那么为什么会构成环呢？-3"><a href="#那么为什么会构成环呢？-3" class="headerlink" title="那么为什么会构成环呢？"></a>那么为什么会构成环呢？</h4><p>不难发现序列A中的每个数值都对应一个目的序列中的一个位置，根据我们的定义也就是有一条出边，而序列A中的每个数值也是目的序列中的数值，只不过位置不同，那么这个数值也一定会被其他数所指向，也就是会有一条入边</p>
<h4 id="目的序列：-3"><a href="#目的序列：-3" class="headerlink" title="目的序列："></a>目的序列：</h4><p>1 -&gt; 1, 2 -&gt; 2, 3 -&gt; 3, 4 -&gt; 4, 5 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230348305-604769587.png"></p>
<p>我们的目的就是从序列A的图表示到目的序列的图表示，也就是每个数构成一个自环</p>
<p>根据我们之前提到的贪心策略：每次交换一定要至少将一个数值归到正确位置，也就是每次交换我们都要分出来一个自环，剩下的数依然会构成环</p>
<p>比如交换序列A中的1 和 3，</p>
<p>此时一个数3归到正确的位置</p>
<p>序列A: 4 1 3 5 2<br>目的序列： 1 2 3 4 5</p>
<p>4 -&gt; 1, 1 -&gt; 2, 3 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230841222-926316156.png"></p>
<p>由此我们可以发现，每次根据贪心策略进行交换瓶子都会分离出一个自环，知道分出 n 个自环为止</p>
<p>综上所述，我们需要从原序列A中的若干个环（不一定是一个，可以自己模拟一下题目样例）变成 n 个环, 交换的次数就是 （n - 原序列中的环的个数)， 即为答案</p>
<p>本题中如果想要求原序列A中的环的个数可以使用并查集，因为只要两个数相连，之后这两个数与其他数必定会构成环, 所以仿照并查集求连通块的数量的写法即可</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> fa[N], n;</span><br><span class="line"></span><br><span class="line"><span class="comment">//并查集模板</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x == fa[x] ? fa[x] : fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="comment">//初始化并查集</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) fa[i] = i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理输入并进行集合合并</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);    </span><br><span class="line">        <span class="type">int</span> fx = <span class="built_in">find</span>(x), fy = <span class="built_in">find</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(fx != fy) fa[x] = fy;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找连通块的数量</span></span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="keyword">if</span>(fa[i] == i) cnt++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//n减去环的数量就是答案（本题中环的数量与连通块的数量相同）</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, n-cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17038474.html">https://www.cnblogs.com/junlin623/p/17038474.html</a></p>
<hr>
<p>title: ‘蓝桥杯-交换瓶子-junlin623’<br>date: 2023-01-09 23:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="交换瓶子-第七届蓝桥杯省赛JAVA-A组-4"><a href="#交换瓶子-第七届蓝桥杯省赛JAVA-A组-4" class="headerlink" title="交换瓶子 (第七届蓝桥杯省赛JAVA A组)"></a>交换瓶子 (第七届蓝桥杯省赛JAVA A组)</h3><p>有 N 个瓶子，编号 1∼N，放在架子上。</p>
<p>比如有 5 个瓶子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 1 3 5 4</span><br></pre></td></tr></table></figure>
<p>要求每次拿起 2 个瓶子，交换它们的位置。</p>
<p>经过若干次后，使得瓶子的序号为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5</span><br></pre></td></tr></table></figure>
<p>对于这么简单的情况，显然，至少需要交换 2 次就可以复位。</p>
<p>如果瓶子更多呢？你可以通过编程来解决。</p>
<p>输入格式<br>第一行包含一个整数 N，表示瓶子数量。</p>
<p>第二行包含 N 个整数，表示瓶子目前的排列状况。</p>
<p>输出格式<br>输出一个正整数，表示至少交换多少次，才能完成排序。</p>
<p>数据范围<br>1≤ N≤ 10000,</p>
<p>输入样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">3 1 2 5 4</span><br></pre></td></tr></table></figure>

<p>输出样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<p>输入样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">5 4 3 2 1</span><br></pre></td></tr></table></figure>

<p>输出样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<h4 id="假定：以下均根据这个样例进行-4"><a href="#假定：以下均根据这个样例进行-4" class="headerlink" title="假定：以下均根据这个样例进行"></a>假定：以下均根据这个样例进行</h4><p>给定序列A: 4 3 1 5 2</p>
<p>目标序列：1 2 3 4 5 </p>
<h3 id="1-贪心-模拟-4"><a href="#1-贪心-模拟-4" class="headerlink" title="1. 贪心+模拟:"></a>1. 贪心+模拟:</h3><p>我们任何时候的交换都只能交换有意义的数字，否则肯定不是最优的<br>比如序列A中交换1 和 5，交换后1 和 5两个数字都没有到本该属于它们的位置上，这就属于无效交换</p>
<p>所以我们只需要遍历序列A，将本该属于这个位置上的数字换过来，交换次数加1，这样遍历到序列A末尾一定就会变成 1 2 3 4 5这个目的状态<br>在这个过程中我们需要维护一个哈希表来记录每个数字当前所在的位置</p>
<h4 id="代码：-4"><a href="#代码：-4" class="headerlink" title="代码："></a>代码：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> a[N], hs[N], n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        hs[a[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] != i) &#123;</span><br><span class="line">            <span class="type">int</span> t = a[i];</span><br><span class="line">            <span class="built_in">swap</span>(a[i],a[hs[i]]);</span><br><span class="line">            hs[t] = hs[i];</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 在交换的过程中，哈希表hs[]也需要改变</p>
<h3 id="2-贪心-图论-并查集-4"><a href="#2-贪心-图论-并查集-4" class="headerlink" title="2. 贪心+图论+并查集"></a>2. 贪心+图论+并查集</h3><p>序列A：    4 3 1 5 2<br>目的序列： 1 2 3 4 5</p>
<h4 id="序列A-4"><a href="#序列A-4" class="headerlink" title="序列Ａ"></a>序列Ａ</h4><p>可知4在1的位置，3在2的位置，1在3的位置，5在4的位置，2在5的位置<br>表示：<br>4 -&gt; 1, 3 -&gt; 2, 1 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p>整理一下会发现构成一个环：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230002488-1180558584.png"></p>
<h4 id="那么为什么会构成环呢？-4"><a href="#那么为什么会构成环呢？-4" class="headerlink" title="那么为什么会构成环呢？"></a>那么为什么会构成环呢？</h4><p>不难发现序列A中的每个数值都对应一个目的序列中的一个位置，根据我们的定义也就是有一条出边，而序列A中的每个数值也是目的序列中的数值，只不过位置不同，那么这个数值也一定会被其他数所指向，也就是会有一条入边</p>
<h4 id="目的序列：-4"><a href="#目的序列：-4" class="headerlink" title="目的序列："></a>目的序列：</h4><p>1 -&gt; 1, 2 -&gt; 2, 3 -&gt; 3, 4 -&gt; 4, 5 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230348305-604769587.png"></p>
<p>我们的目的就是从序列A的图表示到目的序列的图表示，也就是每个数构成一个自环</p>
<p>根据我们之前提到的贪心策略：每次交换一定要至少将一个数值归到正确位置，也就是每次交换我们都要分出来一个自环，剩下的数依然会构成环</p>
<p>比如交换序列A中的1 和 3，</p>
<p>此时一个数3归到正确的位置</p>
<p>序列A: 4 1 3 5 2<br>目的序列： 1 2 3 4 5</p>
<p>4 -&gt; 1, 1 -&gt; 2, 3 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230841222-926316156.png"></p>
<p>由此我们可以发现，每次根据贪心策略进行交换瓶子都会分离出一个自环，知道分出 n 个自环为止</p>
<p>综上所述，我们需要从原序列A中的若干个环（不一定是一个，可以自己模拟一下题目样例）变成 n 个环, 交换的次数就是 （n - 原序列中的环的个数)， 即为答案</p>
<p>本题中如果想要求原序列A中的环的个数可以使用并查集，因为只要两个数相连，之后这两个数与其他数必定会构成环, 所以仿照并查集求连通块的数量的写法即可</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> fa[N], n;</span><br><span class="line"></span><br><span class="line"><span class="comment">//并查集模板</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x == fa[x] ? fa[x] : fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="comment">//初始化并查集</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) fa[i] = i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理输入并进行集合合并</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);    </span><br><span class="line">        <span class="type">int</span> fx = <span class="built_in">find</span>(x), fy = <span class="built_in">find</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(fx != fy) fa[x] = fy;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找连通块的数量</span></span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="keyword">if</span>(fa[i] == i) cnt++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//n减去环的数量就是答案（本题中环的数量与连通块的数量相同）</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, n-cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17038474.html">https://www.cnblogs.com/junlin623/p/17038474.html</a></p>
<hr>
<p>title: ‘蓝桥杯-交换瓶子-junlin623’<br>date: 2023-01-09 23:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="交换瓶子-第七届蓝桥杯省赛JAVA-A组-5"><a href="#交换瓶子-第七届蓝桥杯省赛JAVA-A组-5" class="headerlink" title="交换瓶子 (第七届蓝桥杯省赛JAVA A组)"></a>交换瓶子 (第七届蓝桥杯省赛JAVA A组)</h3><p>有 N 个瓶子，编号 1∼N，放在架子上。</p>
<p>比如有 5 个瓶子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 1 3 5 4</span><br></pre></td></tr></table></figure>
<p>要求每次拿起 2 个瓶子，交换它们的位置。</p>
<p>经过若干次后，使得瓶子的序号为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5</span><br></pre></td></tr></table></figure>
<p>对于这么简单的情况，显然，至少需要交换 2 次就可以复位。</p>
<p>如果瓶子更多呢？你可以通过编程来解决。</p>
<p>输入格式<br>第一行包含一个整数 N，表示瓶子数量。</p>
<p>第二行包含 N 个整数，表示瓶子目前的排列状况。</p>
<p>输出格式<br>输出一个正整数，表示至少交换多少次，才能完成排序。</p>
<p>数据范围<br>1≤ N≤ 10000,</p>
<p>输入样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">3 1 2 5 4</span><br></pre></td></tr></table></figure>

<p>输出样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<p>输入样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">5 4 3 2 1</span><br></pre></td></tr></table></figure>

<p>输出样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<h4 id="假定：以下均根据这个样例进行-5"><a href="#假定：以下均根据这个样例进行-5" class="headerlink" title="假定：以下均根据这个样例进行"></a>假定：以下均根据这个样例进行</h4><p>给定序列A: 4 3 1 5 2</p>
<p>目标序列：1 2 3 4 5 </p>
<h3 id="1-贪心-模拟-5"><a href="#1-贪心-模拟-5" class="headerlink" title="1. 贪心+模拟:"></a>1. 贪心+模拟:</h3><p>我们任何时候的交换都只能交换有意义的数字，否则肯定不是最优的<br>比如序列A中交换1 和 5，交换后1 和 5两个数字都没有到本该属于它们的位置上，这就属于无效交换</p>
<p>所以我们只需要遍历序列A，将本该属于这个位置上的数字换过来，交换次数加1，这样遍历到序列A末尾一定就会变成 1 2 3 4 5这个目的状态<br>在这个过程中我们需要维护一个哈希表来记录每个数字当前所在的位置</p>
<h4 id="代码：-5"><a href="#代码：-5" class="headerlink" title="代码："></a>代码：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> a[N], hs[N], n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        hs[a[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] != i) &#123;</span><br><span class="line">            <span class="type">int</span> t = a[i];</span><br><span class="line">            <span class="built_in">swap</span>(a[i],a[hs[i]]);</span><br><span class="line">            hs[t] = hs[i];</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 在交换的过程中，哈希表hs[]也需要改变</p>
<h3 id="2-贪心-图论-并查集-5"><a href="#2-贪心-图论-并查集-5" class="headerlink" title="2. 贪心+图论+并查集"></a>2. 贪心+图论+并查集</h3><p>序列A：    4 3 1 5 2<br>目的序列： 1 2 3 4 5</p>
<h4 id="序列A-5"><a href="#序列A-5" class="headerlink" title="序列Ａ"></a>序列Ａ</h4><p>可知4在1的位置，3在2的位置，1在3的位置，5在4的位置，2在5的位置<br>表示：<br>4 -&gt; 1, 3 -&gt; 2, 1 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p>整理一下会发现构成一个环：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230002488-1180558584.png"></p>
<h4 id="那么为什么会构成环呢？-5"><a href="#那么为什么会构成环呢？-5" class="headerlink" title="那么为什么会构成环呢？"></a>那么为什么会构成环呢？</h4><p>不难发现序列A中的每个数值都对应一个目的序列中的一个位置，根据我们的定义也就是有一条出边，而序列A中的每个数值也是目的序列中的数值，只不过位置不同，那么这个数值也一定会被其他数所指向，也就是会有一条入边</p>
<h4 id="目的序列：-5"><a href="#目的序列：-5" class="headerlink" title="目的序列："></a>目的序列：</h4><p>1 -&gt; 1, 2 -&gt; 2, 3 -&gt; 3, 4 -&gt; 4, 5 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230348305-604769587.png"></p>
<p>我们的目的就是从序列A的图表示到目的序列的图表示，也就是每个数构成一个自环</p>
<p>根据我们之前提到的贪心策略：每次交换一定要至少将一个数值归到正确位置，也就是每次交换我们都要分出来一个自环，剩下的数依然会构成环</p>
<p>比如交换序列A中的1 和 3，</p>
<p>此时一个数3归到正确的位置</p>
<p>序列A: 4 1 3 5 2<br>目的序列： 1 2 3 4 5</p>
<p>4 -&gt; 1, 1 -&gt; 2, 3 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230841222-926316156.png"></p>
<p>由此我们可以发现，每次根据贪心策略进行交换瓶子都会分离出一个自环，知道分出 n 个自环为止</p>
<p>综上所述，我们需要从原序列A中的若干个环（不一定是一个，可以自己模拟一下题目样例）变成 n 个环, 交换的次数就是 （n - 原序列中的环的个数)， 即为答案</p>
<p>本题中如果想要求原序列A中的环的个数可以使用并查集，因为只要两个数相连，之后这两个数与其他数必定会构成环, 所以仿照并查集求连通块的数量的写法即可</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> fa[N], n;</span><br><span class="line"></span><br><span class="line"><span class="comment">//并查集模板</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x == fa[x] ? fa[x] : fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="comment">//初始化并查集</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) fa[i] = i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理输入并进行集合合并</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);    </span><br><span class="line">        <span class="type">int</span> fx = <span class="built_in">find</span>(x), fy = <span class="built_in">find</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(fx != fy) fa[x] = fy;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找连通块的数量</span></span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="keyword">if</span>(fa[i] == i) cnt++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//n减去环的数量就是答案（本题中环的数量与连通块的数量相同）</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, n-cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17038474.html">https://www.cnblogs.com/junlin623/p/17038474.html</a></p>
<hr>
<p>title: ‘蓝桥杯-交换瓶子-junlin623’<br>date: 2023-01-09 23:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="交换瓶子-第七届蓝桥杯省赛JAVA-A组-6"><a href="#交换瓶子-第七届蓝桥杯省赛JAVA-A组-6" class="headerlink" title="交换瓶子 (第七届蓝桥杯省赛JAVA A组)"></a>交换瓶子 (第七届蓝桥杯省赛JAVA A组)</h3><p>有 N 个瓶子，编号 1∼N，放在架子上。</p>
<p>比如有 5 个瓶子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 1 3 5 4</span><br></pre></td></tr></table></figure>
<p>要求每次拿起 2 个瓶子，交换它们的位置。</p>
<p>经过若干次后，使得瓶子的序号为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5</span><br></pre></td></tr></table></figure>
<p>对于这么简单的情况，显然，至少需要交换 2 次就可以复位。</p>
<p>如果瓶子更多呢？你可以通过编程来解决。</p>
<p>输入格式<br>第一行包含一个整数 N，表示瓶子数量。</p>
<p>第二行包含 N 个整数，表示瓶子目前的排列状况。</p>
<p>输出格式<br>输出一个正整数，表示至少交换多少次，才能完成排序。</p>
<p>数据范围<br>1≤ N≤ 10000,</p>
<p>输入样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">3 1 2 5 4</span><br></pre></td></tr></table></figure>

<p>输出样例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<p>输入样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">5 4 3 2 1</span><br></pre></td></tr></table></figure>

<p>输出样例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<h4 id="假定：以下均根据这个样例进行-6"><a href="#假定：以下均根据这个样例进行-6" class="headerlink" title="假定：以下均根据这个样例进行"></a>假定：以下均根据这个样例进行</h4><p>给定序列A: 4 3 1 5 2</p>
<p>目标序列：1 2 3 4 5 </p>
<h3 id="1-贪心-模拟-6"><a href="#1-贪心-模拟-6" class="headerlink" title="1. 贪心+模拟:"></a>1. 贪心+模拟:</h3><p>我们任何时候的交换都只能交换有意义的数字，否则肯定不是最优的<br>比如序列A中交换1 和 5，交换后1 和 5两个数字都没有到本该属于它们的位置上，这就属于无效交换</p>
<p>所以我们只需要遍历序列A，将本该属于这个位置上的数字换过来，交换次数加1，这样遍历到序列A末尾一定就会变成 1 2 3 4 5这个目的状态<br>在这个过程中我们需要维护一个哈希表来记录每个数字当前所在的位置</p>
<h4 id="代码：-6"><a href="#代码：-6" class="headerlink" title="代码："></a>代码：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> a[N], hs[N], n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        hs[a[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] != i) &#123;</span><br><span class="line">            <span class="type">int</span> t = a[i];</span><br><span class="line">            <span class="built_in">swap</span>(a[i],a[hs[i]]);</span><br><span class="line">            hs[t] = hs[i];</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 在交换的过程中，哈希表hs[]也需要改变</p>
<h3 id="2-贪心-图论-并查集-6"><a href="#2-贪心-图论-并查集-6" class="headerlink" title="2. 贪心+图论+并查集"></a>2. 贪心+图论+并查集</h3><p>序列A：    4 3 1 5 2<br>目的序列： 1 2 3 4 5</p>
<h4 id="序列A-6"><a href="#序列A-6" class="headerlink" title="序列Ａ"></a>序列Ａ</h4><p>可知4在1的位置，3在2的位置，1在3的位置，5在4的位置，2在5的位置<br>表示：<br>4 -&gt; 1, 3 -&gt; 2, 1 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p>整理一下会发现构成一个环：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230002488-1180558584.png"></p>
<h4 id="那么为什么会构成环呢？-6"><a href="#那么为什么会构成环呢？-6" class="headerlink" title="那么为什么会构成环呢？"></a>那么为什么会构成环呢？</h4><p>不难发现序列A中的每个数值都对应一个目的序列中的一个位置，根据我们的定义也就是有一条出边，而序列A中的每个数值也是目的序列中的数值，只不过位置不同，那么这个数值也一定会被其他数所指向，也就是会有一条入边</p>
<h4 id="目的序列：-6"><a href="#目的序列：-6" class="headerlink" title="目的序列："></a>目的序列：</h4><p>1 -&gt; 1, 2 -&gt; 2, 3 -&gt; 3, 4 -&gt; 4, 5 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230348305-604769587.png"></p>
<p>我们的目的就是从序列A的图表示到目的序列的图表示，也就是每个数构成一个自环</p>
<p>根据我们之前提到的贪心策略：每次交换一定要至少将一个数值归到正确位置，也就是每次交换我们都要分出来一个自环，剩下的数依然会构成环</p>
<p>比如交换序列A中的1 和 3，</p>
<p>此时一个数3归到正确的位置</p>
<p>序列A: 4 1 3 5 2<br>目的序列： 1 2 3 4 5</p>
<p>4 -&gt; 1, 1 -&gt; 2, 3 -&gt; 3, 5 -&gt; 4, 2 -&gt; 5</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230109230841222-926316156.png"></p>
<p>由此我们可以发现，每次根据贪心策略进行交换瓶子都会分离出一个自环，知道分出 n 个自环为止</p>
<p>综上所述，我们需要从原序列A中的若干个环（不一定是一个，可以自己模拟一下题目样例）变成 n 个环, 交换的次数就是 （n - 原序列中的环的个数)， 即为答案</p>
<p>本题中如果想要求原序列A中的环的个数可以使用并查集，因为只要两个数相连，之后这两个数与其他数必定会构成环, 所以仿照并查集求连通块的数量的写法即可</p>
<p><strong>代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> fa[N], n;</span><br><span class="line"></span><br><span class="line"><span class="comment">//并查集模板</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x == fa[x] ? fa[x] : fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="comment">//初始化并查集</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) fa[i] = i;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理输入并进行集合合并</span></span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);    </span><br><span class="line">        <span class="type">int</span> fx = <span class="built_in">find</span>(x), fy = <span class="built_in">find</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(fx != fy) fa[x] = fy;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查找连通块的数量</span></span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="keyword">if</span>(fa[i] == i) cnt++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//n减去环的数量就是答案（本题中环的数量与连通块的数量相同）</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, n-cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E4%BA%A4%E6%8D%A2%E7%93%B6%E5%AD%90-junlin623/" data-id="clhrwf8jp0026ekszbya6btil" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-经典题-阶乘分解-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/%E7%BB%8F%E5%85%B8%E9%A2%98-%E9%98%B6%E4%B9%98%E5%88%86%E8%A7%A3-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.169Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17182161.html">https://www.cnblogs.com/junlin623/p/17182161.html</a></p>
<hr>
<p>title: ‘经典题-阶乘分解-junlin623’<br>date: 2023-03-05 23:12:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="阶乘分解"><a href="#阶乘分解" class="headerlink" title="阶乘分解"></a><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/199/">阶乘分解</a></h3><p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230305230954144-1409805319.png"></p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230305231206014-512080954.png"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> per(i,a,b) for(int i = b - 1;i &gt;= a;i--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> setbit(x,y) x |= (1&lt;&lt;y)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> clrbit(x,y) x &amp;= ~(1&lt;&lt;y)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt; VI;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">0x3f3f3f3f</span>, N = <span class="number">1000010</span>;</span><br><span class="line"><span class="type">int</span> primes[N], cnt, n;</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>;i &lt;= n;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!st[i]) primes[cnt++] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;primes[j] * i &lt;= n;j++) &#123;</span><br><span class="line">            st[primes[j] * i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(i % primes[j] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">init</span>(n);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; cnt;i++) &#123;</span><br><span class="line">        <span class="type">int</span> p = primes[i];</span><br><span class="line">        <span class="type">int</span> t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = n;j;j /= p) t += j / p;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, p, t);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/%E7%BB%8F%E5%85%B8%E9%A2%98-%E9%98%B6%E4%B9%98%E5%88%86%E8%A7%A3-junlin623/" data-id="clhrwf8jo0022ekszdu4hgol1" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-将Vue项目部署到Tomcat服务器上（简单、粗暴）-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/%E5%B0%86Vue%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0Tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%EF%BC%88%E7%AE%80%E5%8D%95%E3%80%81%E7%B2%97%E6%9A%B4%EF%BC%89-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.167Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17300058.html">https://www.cnblogs.com/junlin623/p/17300058.html</a></p>
<hr>
<p>title: ‘将Vue项目部署到Tomcat服务器上（简单、粗暴）-junlin623’<br>date: 2023-04-09 11:24:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="1-将项目打包"><a href="#1-将项目打包" class="headerlink" title="1. 将项目打包"></a>1. 将项目打包</h3><hr>
<p>Vue中自带webpack，可以通过一行命令将项目打包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行该命令打包</span></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230409110117737-1989987320.png" width="50%" >


<h3 id="2-上传相应文件到服务器上"><a href="#2-上传相应文件到服务器上" class="headerlink" title="2. 上传相应文件到服务器上"></a>2. 上传相应文件到服务器上</h3><hr>
<p>打包完成后，项目中会多出一个<code>dist</code>文件夹， 这个文件夹中就包含<code>html</code>、<code>css</code>、<code>js</code>等文件</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230409110247913-490050204.png" width="50%" >

<p>直接将<code>dist</code>文件夹上传到Tomcat的ROOT目录下，默认情况下，访问服务器网址会自动定位到ROOT目录下的<code>index.html</code>文件，如果是想要访问文件夹，原则上也放到这个目录就可以了，<br>当然，如果是war包则一定要放到<code>webapps</code>目录下，tomcat会自动解压作为一个单独的项目</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230409110609355-1094123281.png" width="50%" >

<p>原则上我们就可以通过 <code>http://ip地址/dist/index.html</code> 来直接访问了，但是会有问题~~</p>
<h3 id="3-匹配路由"><a href="#3-匹配路由" class="headerlink" title="3. 匹配路由"></a>3. 匹配路由</h3><hr>
<p>考虑与Vue项目中设置的路由前缀匹配，将<code>dist</code>文件夹改个名字<code>myspace</code>，这样我们在访问 <code>http://ip地址/myspace/</code> 的时候Vue中就会匹配<code>myspace</code>前缀，会直接定位到项目首页，当然不配置也没关系，我们在访问资源的时候会直接跟在ip地址后面，感觉不太美观</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230409111403786-681590059.png" width="70%" >


<h3 id="4-页面显示错误"><a href="#4-页面显示错误" class="headerlink" title="4. 页面显示错误"></a>4. 页面显示错误</h3><hr>
<p>访问 <code>http://ip地址/myspace/</code></p>
<p>控制台报错：</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230409111501997-932031586.png" width="50%" >


<p>可以看到是资源访问错误，原因是Vue项目中访问资源是绝对路径 <code>/</code></p>
<img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230409111658543-330509186.png" width="50%" >

<p>解决方法就是将项目中的<code>js</code>目录和<code>css</code>目录移动到ROOT目录下，和<code>myspace</code>目录同级</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230409111828702-2135472757.png" width="50%" >


<img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230409111842953-1009574123.png" width="50%" >


<h3 id="5-再次访问"><a href="#5-再次访问" class="headerlink" title="5. 再次访问"></a>5. 再次访问</h3><hr>
<p>再访问 <code>http://ip地址/myspace/</code>，记得刷新一下缓存 <code>快捷键 Ctrl + Shift + R</code></p>
<p>发现可以直接定位到项目首页，这样就把Vue路由前缀和<code>ROOT</code>目录下的项目文件夹名<code>myspace</code>统一起来了</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230409112216558-2058407176.png" width="50%" >

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/%E5%B0%86Vue%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0Tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%EF%BC%88%E7%AE%80%E5%8D%95%E3%80%81%E7%B2%97%E6%9A%B4%EF%BC%89-junlin623/" data-id="clhrwf8jk001veksz6ry95az9" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-更改Maven本地仓库的位置-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/%E6%9B%B4%E6%94%B9Maven%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E7%9A%84%E4%BD%8D%E7%BD%AE-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.166Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17305888.html">https://www.cnblogs.com/junlin623/p/17305888.html</a></p>
<hr>
<p>title: ‘更改Maven本地仓库的位置-junlin623’<br>date: 2023-04-11 12:58:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>默认Maven的本地仓库位置是: <code>C:/Users/用户名/.m2/repository</code></p>
<img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230411125518352-2086992902.png" width="60%" >

<p>如果想要更改就需要找到Maven的安装目录，找到conf文件夹，打开<code>settings.xml</code>文件</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230411125626544-1775886756.png"></p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202304/2935791-20230411125747230-1996250039.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/%E6%9B%B4%E6%94%B9Maven%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E7%9A%84%E4%BD%8D%E7%BD%AE-junlin623/" data-id="clhrwf8jl001yeksz5rv3dhaz" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-服务器上的数据库被删了，不慌~~-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A2%AB%E5%88%A0%E4%BA%86%EF%BC%8C%E4%B8%8D%E6%85%8C~~-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.164Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17169437.html">https://www.cnblogs.com/junlin623/p/17169437.html</a></p>
<hr>
<p>title: ‘服务器上的数据库被删了，不慌~~-junlin623’<br>date: 2023-03-01 19:36:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="一、发现问题："><a href="#一、发现问题：" class="headerlink" title="一、发现问题："></a>一、发现问题：</h3><hr>
<p>近期访问我的网站的时候登录报错，到主机上查看了一下日志才发现系统找不到指定数据库，</p>
<p>慌张的我赶紧连接了一下数据库看看，发现真的是数据库被黑了</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230301193449390-1236733938.png"></p>
<p>text	<br>All your data was backed up from your server. You need to email us at <a href="mailto:&#114;&#97;&#x73;&#x6d;&#117;&#x73;&#x2b;&#50;&#54;&#54;&#57;&#x65;&#64;&#x6f;&#x6e;&#x69;&#x6f;&#x6e;&#109;&#x61;&#x69;&#x6c;&#46;&#x6f;&#114;&#103;">&#114;&#97;&#x73;&#x6d;&#117;&#x73;&#x2b;&#50;&#54;&#54;&#57;&#x65;&#64;&#x6f;&#x6e;&#x69;&#x6f;&#x6e;&#109;&#x61;&#x69;&#x6c;&#46;&#x6f;&#114;&#103;</a> to recover your data. If you dont contact us we will reach the General Data Protection Regulation, GDPR, and notify them that you store user data in an open form that is not safe. Under the rules of the law, you face a heavy fine or arrest and your database dump will be deleted from our server forever!</p>
<p>翻译了一下：</p>
<p>​	您的所有数据都从您的服务器备份。您需要发送电子邮件给我们 <a href="mailto:&#114;&#x61;&#115;&#x6d;&#117;&#115;&#43;&#50;&#54;&#54;&#57;&#101;&#x40;&#111;&#x6e;&#x69;&#x6f;&#110;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#111;&#114;&#x67;">&#114;&#x61;&#115;&#x6d;&#117;&#115;&#43;&#50;&#54;&#54;&#57;&#101;&#x40;&#111;&#x6e;&#x69;&#x6f;&#110;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#111;&#114;&#x67;</a> 以恢复您的数据。如果您不联系我们，我们将联系通用数据保护条例 GDPR，并通知他们您以不安全的开放形式存储用户数据。根据法律规定，您将面临巨额罚款或逮捕，您的数据库转储将从我们的服务器中永久删除！</p>
<p>wc，好害怕！！！</p>
<h3 id="二、分析一波："><a href="#二、分析一波：" class="headerlink" title="二、分析一波："></a>二、分析一波：</h3><p>​	原因可能就是黑客扫描到公网的主机，发现开放了3306端口，并通过破解密码进入，进行一系列操作，然后跑路</p>
<p>我们可以通过查看Mysql中的binlog日志看看它到底干了些什么：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 登录到mysql，执行以下命令，后面代表的是要查看的日志的文件名</span><br><span class="line">show binlog events in &quot;binlog.000005&quot;;</span><br></pre></td></tr></table></figure>

<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230301193001481-815700271.png"></p>
<pre><code>* 删除了数据库
* 创建了一个新的数据库 README_TO_RECOVER_A
* 在这个数据库里建了张表 RECOVER_YOUR_DATA
* 插入了一条数据，“提醒我们”
* 删除root用户对于所有数据库的权限
</code></pre>
<p>也可在终端中查看：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqlbinlog <span class="string">&quot;binlog.000005&quot;</span>  <span class="comment"># 能够查看更详细的信息，比如时间等</span></span><br></pre></td></tr></table></figure>

<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230301193101470-868666572.png"></p>
<p>在此还是提醒大家的数据库不要设置成太简单的密码，root（比如我hh），123等等，很容易被暴力破解</p>
<h3 id="三、数据库恢复："><a href="#三、数据库恢复：" class="headerlink" title="三、数据库恢复："></a>三、数据库恢复：</h3><p>既然已经发生了，就要想办法恢复数据库</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230301193136686-2036280328.png"></p>
<p>通过查看binlog日志发现，删库的日期是在26号，所以直接恢复该日期之前的sql操作即可</p>
<p>由于我的删库操作记录在 binlog.000005 中，所以我们需要恢复binlog.000001~4以及 binlog.000005中的26号之前的sql操作</p>
<p>写一个python脚本生成恢复的sql文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding: utf-8</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">os.chdir(<span class="string">&quot;/var/lib/mysql&quot;</span>)</span><br><span class="line">files = os.listdir(<span class="string">&quot;.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">	<span class="keyword">if</span> file.startswith(<span class="string">&quot;binlog.0&quot;</span>):</span><br><span class="line">		num = <span class="built_in">int</span>(file[<span class="built_in">len</span>(file)-<span class="number">1</span>])</span><br><span class="line">		<span class="keyword">if</span> num &gt; <span class="number">5</span>:</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		<span class="keyword">elif</span> num == <span class="number">5</span>:</span><br><span class="line">			os.system(<span class="string">&quot;mysqlbinlog --no-defaults -v --base64-output=decode-rows &#123;&#125;  --stop-datetime=&#x27;2023-02-26 00:00:00&#x27; &gt;&gt; /home/recover.sql&quot;</span>.<span class="built_in">format</span>(file))</span><br><span class="line">		<span class="keyword">else</span>: </span><br><span class="line">			os.system(<span class="string">&quot;mysqlbinlog --no-defaults -v --base64-output=decode-rows &#123;&#125; &gt;&gt; /home/recover.sql&quot;</span>.<span class="built_in">format</span>(file))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>执行完该脚本之后会在 &#x2F;home目录下生成 recover.sql 文件</p>
<p>登录到mysql中，根据该sql文件恢复数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /home/recover.sql</span><br></pre></td></tr></table></figure>

<p>运行过程中会出现以下错误：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230301193204749-2000109161.png"></p>
<p>原因就是入侵者将root用户的权限全部收回了</p>
<p>去赋予root用户权限也没用：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230301193213377-483221132.png"></p>
<p><strong>解决方案：</strong></p>
<p>查看root用户是否有所有的权限：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM mysql.user WHERE USER=&quot;root&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230301193247965-650639712.png"></p>
<p>可以发现有一些是 No， 所以我们要全部改成 Y，不用全改也可以，但是 Grant 权限必须是 Yes：</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230301193253829-491050307.png"></p>
<p>执行下面的命令来恢复root用户权限：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>

<p>再次执行恢复数据库：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /home/recover.sql</span><br></pre></td></tr></table></figure>



<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230301193302084-214583454.png"></p>
<p>成功恢复~~</p>
<h3 id="四、问题规避："><a href="#四、问题规避：" class="headerlink" title="四、问题规避："></a>四、问题规避：</h3><ol>
<li><p>避免mysql的root用户密码太简单：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 用root用户登录到mysql后执行</span><br><span class="line">set password=&quot;xxx&quot;;  -- xxx表示root用户密码</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以考虑更换一下mysql的服务端口，（但是好像也没什么用hh，因为可以通过扫描得出监听该端口的应用程序，即使不是3306端口，监听的应用程序是mysql也可以判断是数据库服务）</p>
</li>
<li><p>尽量不要让root用户host是 % ,改成特定ip地址, （但网站还是要让所有人访问的，也是没办法）</p>
</li>
<li><p>尽量不要使用root用户连接数据库， 有的应用程序会将root用户的密码在配置文件中体现，不利于安全性：</p>
</li>
</ol>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202303/2935791-20230301193320194-1666106440.png"></p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 创建一个新用户</span><br><span class="line">create user &quot;client&quot;@&#x27;%&#x27; identified by &quot;xxx&quot;;</span><br></pre></td></tr></table></figure>

   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 给这个用户赋予项目数据库的所有权限</span><br><span class="line">grant all privileges on homesystem.* to client;</span><br></pre></td></tr></table></figure>

<p>   在项目中让client这个用户去连接数据库，这样就能避免root用户密码暴露的问题</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A2%AB%E5%88%A0%E4%BA%86%EF%BC%8C%E4%B8%8D%E6%85%8C~~-junlin623/" data-id="clhrwf8jl001zeksz3kkafgme" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-发现局域网中存活主机-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/%E5%8F%91%E7%8E%B0%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%AD%E5%AD%98%E6%B4%BB%E4%B8%BB%E6%9C%BA-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.162Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17166024.html">https://www.cnblogs.com/junlin623/p/17166024.html</a></p>
<hr>
<p>title: ‘发现局域网中存活主机-junlin623’<br>date: 2023-02-28 21:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<h3 id="主机发现"><a href="#主机发现" class="headerlink" title="主机发现"></a>主机发现</h3><p>一个局域网中肯定是连接多台设备，那么我们如何确定哪些设备正在开机状态呢？</p>
<h4 id="方案一："><a href="#方案一：" class="headerlink" title="方案一："></a>方案一：</h4><p>使用 ping 命令进行循环探测， 效率比较低：</p>
<p>通过ICMP循环对整个网段中的每个IP地址执行ping 命令，所有能够ping 通的IP地址即为内网中存活的主机。</p>
<p>首先需要知道自己所在的网段</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202302/2935791-20230228210431049-470099751.png"></p>
<p>我所在的网段是 192.168.1.0</p>
<p>执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /L %I <span class="keyword">in</span> (1,1,254) DO @ping -w 1 -n 1 192.168.1.%I| findstr <span class="string">&quot;TTL=&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>命令参数解析：<br>for &#x2F;L %I in (sequence) do command，for遍历</p>
</blockquote>
<blockquote>
<p>192.168.1.%I，代表你要ping的网段：192.168.1.0网段</p>
</blockquote>
<blockquote>
<p>(1,1,254)，第一个1和最后一个254，代表从1-254，中间那个1，代表，每次ping，递增1</p>
</blockquote>
<blockquote>
<p>-n 1，代表发送的回显请求数</p>
</blockquote>
<blockquote>
<p>-w 60，代表等待回复每次ping超时时间（毫秒）</p>
</blockquote>
<p>扫描过程比较慢，因为它要想 254 台设备发送icmp请求并等待响应</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202302/2935791-20230228211132066-161196347.png" width="60%" >


<h4 id="方案二："><a href="#方案二：" class="headerlink" title="方案二："></a>方案二：</h4><p>使用Nmap命令： <code>nmap -sP 网段 </code> 对该网络中的所有主机进行ping扫描，以探测主机的存活性，扫描过程中使用了 TCP SYN扫描，ICMP echo Request来探测主机存活</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sP 192.168.1.0/24</span><br></pre></td></tr></table></figure>

<p>很快就会出结果</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202302/2935791-20230228211053254-48284466.png" width="60%" >


<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sn 192.168.1.0/24</span><br></pre></td></tr></table></figure>
<img src="https://img2023.cnblogs.com/blog/2935791/202302/2935791-20230228211414653-1051022845.png" width="60%" >



<h3 id="扫描结果保存"><a href="#扫描结果保存" class="headerlink" title="扫描结果保存"></a>扫描结果保存</h3><p>使用命令： <code>nmap -sn 网段 -oX test.xml </code> 进行扫描后，将结果输出到test.xml文件中，方便后续使用</p>
<img src="(https://img2023.cnblogs.com/blog/2935791/202302/2935791-20230228211828304-111137462.png" width="60%" >

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/%E5%8F%91%E7%8E%B0%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%AD%E5%AD%98%E6%B4%BB%E4%B8%BB%E6%9C%BA-junlin623/" data-id="clhrwf8ji001qekszgesve8b3" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-电脑端钉钉部分数据缓存路径-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/%E7%94%B5%E8%84%91%E7%AB%AF%E9%92%89%E9%92%89%E9%83%A8%E5%88%86%E6%95%B0%E6%8D%AE%E7%BC%93%E5%AD%98%E8%B7%AF%E5%BE%84-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.160Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17028674.html">https://www.cnblogs.com/junlin623/p/17028674.html</a></p>
<hr>
<p>title: ‘电脑端钉钉部分数据缓存路径-junlin623’<br>date: 2023-01-05 19:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>和QQ一样，电脑钉钉也会占用C盘许多缓存空间，下面是我找到的可以直接删除的缓存路径</p>
<h3 id="表情缓存："><a href="#表情缓存：" class="headerlink" title="表情缓存："></a>表情缓存：</h3><p>目录位置：%AppData%\Roaming\DingTalk\defEmotion</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105185936413-1171102083.png" width="50%" >


<h3 id="头像缓存"><a href="#头像缓存" class="headerlink" title="头像缓存"></a>头像缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\AvatarFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190403799-1149705741.png" width="50%" >


<h3 id="聊天图片缓存"><a href="#聊天图片缓存" class="headerlink" title="聊天图片缓存"></a>聊天图片缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\ImageFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190616488-1815498640.png" width="50%" >


<h3 id="资源缓存"><a href="#资源缓存" class="headerlink" title="资源缓存"></a>资源缓存</h3><p>目录位置：%AppData%\DingTalk\xxx_v2\resource_cache</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105191154134-1777164501.png" width="50%" >
https://www.cnblogs.com/junlin623/p/17028674.html




<hr>
<p>title: ‘电脑端钉钉部分数据缓存路径-junlin623’<br>date: 2023-01-05 19:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>和QQ一样，电脑钉钉也会占用C盘许多缓存空间，下面是我找到的可以直接删除的缓存路径</p>
<h3 id="表情缓存：-1"><a href="#表情缓存：-1" class="headerlink" title="表情缓存："></a>表情缓存：</h3><p>目录位置：%AppData%\Roaming\DingTalk\defEmotion</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105185936413-1171102083.png" width="50%" >


<h3 id="头像缓存-1"><a href="#头像缓存-1" class="headerlink" title="头像缓存"></a>头像缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\AvatarFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190403799-1149705741.png" width="50%" >


<h3 id="聊天图片缓存-1"><a href="#聊天图片缓存-1" class="headerlink" title="聊天图片缓存"></a>聊天图片缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\ImageFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190616488-1815498640.png" width="50%" >


<h3 id="资源缓存-1"><a href="#资源缓存-1" class="headerlink" title="资源缓存"></a>资源缓存</h3><p>目录位置：%AppData%\DingTalk\xxx_v2\resource_cache</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105191154134-1777164501.png" width="50%" >
https://www.cnblogs.com/junlin623/p/17028674.html




<hr>
<p>title: ‘电脑端钉钉部分数据缓存路径-junlin623’<br>date: 2023-01-05 19:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>和QQ一样，电脑钉钉也会占用C盘许多缓存空间，下面是我找到的可以直接删除的缓存路径</p>
<h3 id="表情缓存：-2"><a href="#表情缓存：-2" class="headerlink" title="表情缓存："></a>表情缓存：</h3><p>目录位置：%AppData%\Roaming\DingTalk\defEmotion</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105185936413-1171102083.png" width="50%" >


<h3 id="头像缓存-2"><a href="#头像缓存-2" class="headerlink" title="头像缓存"></a>头像缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\AvatarFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190403799-1149705741.png" width="50%" >


<h3 id="聊天图片缓存-2"><a href="#聊天图片缓存-2" class="headerlink" title="聊天图片缓存"></a>聊天图片缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\ImageFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190616488-1815498640.png" width="50%" >


<h3 id="资源缓存-2"><a href="#资源缓存-2" class="headerlink" title="资源缓存"></a>资源缓存</h3><p>目录位置：%AppData%\DingTalk\xxx_v2\resource_cache</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105191154134-1777164501.png" width="50%" >
https://www.cnblogs.com/junlin623/p/17028674.html




<hr>
<p>title: ‘电脑端钉钉部分数据缓存路径-junlin623’<br>date: 2023-01-05 19:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>和QQ一样，电脑钉钉也会占用C盘许多缓存空间，下面是我找到的可以直接删除的缓存路径</p>
<h3 id="表情缓存：-3"><a href="#表情缓存：-3" class="headerlink" title="表情缓存："></a>表情缓存：</h3><p>目录位置：%AppData%\Roaming\DingTalk\defEmotion</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105185936413-1171102083.png" width="50%" >


<h3 id="头像缓存-3"><a href="#头像缓存-3" class="headerlink" title="头像缓存"></a>头像缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\AvatarFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190403799-1149705741.png" width="50%" >


<h3 id="聊天图片缓存-3"><a href="#聊天图片缓存-3" class="headerlink" title="聊天图片缓存"></a>聊天图片缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\ImageFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190616488-1815498640.png" width="50%" >


<h3 id="资源缓存-3"><a href="#资源缓存-3" class="headerlink" title="资源缓存"></a>资源缓存</h3><p>目录位置：%AppData%\DingTalk\xxx_v2\resource_cache</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105191154134-1777164501.png" width="50%" >
https://www.cnblogs.com/junlin623/p/17028674.html




<hr>
<p>title: ‘电脑端钉钉部分数据缓存路径-junlin623’<br>date: 2023-01-05 19:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>和QQ一样，电脑钉钉也会占用C盘许多缓存空间，下面是我找到的可以直接删除的缓存路径</p>
<h3 id="表情缓存：-4"><a href="#表情缓存：-4" class="headerlink" title="表情缓存："></a>表情缓存：</h3><p>目录位置：%AppData%\Roaming\DingTalk\defEmotion</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105185936413-1171102083.png" width="50%" >


<h3 id="头像缓存-4"><a href="#头像缓存-4" class="headerlink" title="头像缓存"></a>头像缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\AvatarFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190403799-1149705741.png" width="50%" >


<h3 id="聊天图片缓存-4"><a href="#聊天图片缓存-4" class="headerlink" title="聊天图片缓存"></a>聊天图片缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\ImageFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190616488-1815498640.png" width="50%" >


<h3 id="资源缓存-4"><a href="#资源缓存-4" class="headerlink" title="资源缓存"></a>资源缓存</h3><p>目录位置：%AppData%\DingTalk\xxx_v2\resource_cache</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105191154134-1777164501.png" width="50%" >
https://www.cnblogs.com/junlin623/p/17028674.html




<hr>
<p>title: ‘电脑端钉钉部分数据缓存路径-junlin623’<br>date: 2023-01-05 19:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>和QQ一样，电脑钉钉也会占用C盘许多缓存空间，下面是我找到的可以直接删除的缓存路径</p>
<h3 id="表情缓存：-5"><a href="#表情缓存：-5" class="headerlink" title="表情缓存："></a>表情缓存：</h3><p>目录位置：%AppData%\Roaming\DingTalk\defEmotion</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105185936413-1171102083.png" width="50%" >


<h3 id="头像缓存-5"><a href="#头像缓存-5" class="headerlink" title="头像缓存"></a>头像缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\AvatarFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190403799-1149705741.png" width="50%" >


<h3 id="聊天图片缓存-5"><a href="#聊天图片缓存-5" class="headerlink" title="聊天图片缓存"></a>聊天图片缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\ImageFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190616488-1815498640.png" width="50%" >


<h3 id="资源缓存-5"><a href="#资源缓存-5" class="headerlink" title="资源缓存"></a>资源缓存</h3><p>目录位置：%AppData%\DingTalk\xxx_v2\resource_cache</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105191154134-1777164501.png" width="50%" >
https://www.cnblogs.com/junlin623/p/17028674.html




<hr>
<p>title: ‘电脑端钉钉部分数据缓存路径-junlin623’<br>date: 2023-01-05 19:19:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>和QQ一样，电脑钉钉也会占用C盘许多缓存空间，下面是我找到的可以直接删除的缓存路径</p>
<h3 id="表情缓存：-6"><a href="#表情缓存：-6" class="headerlink" title="表情缓存："></a>表情缓存：</h3><p>目录位置：%AppData%\Roaming\DingTalk\defEmotion</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105185936413-1171102083.png" width="50%" >


<h3 id="头像缓存-6"><a href="#头像缓存-6" class="headerlink" title="头像缓存"></a>头像缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\AvatarFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190403799-1149705741.png" width="50%" >


<h3 id="聊天图片缓存-6"><a href="#聊天图片缓存-6" class="headerlink" title="聊天图片缓存"></a>聊天图片缓存</h3><p>目录位置：%AppData%\DingTalk\xxxxx_v2\ImageFiles</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105190616488-1815498640.png" width="50%" >


<h3 id="资源缓存-6"><a href="#资源缓存-6" class="headerlink" title="资源缓存"></a>资源缓存</h3><p>目录位置：%AppData%\DingTalk\xxx_v2\resource_cache</p>
<img src="https://img2023.cnblogs.com/blog/2935791/202301/2935791-20230105191154134-1777164501.png" width="50%" >

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/%E7%94%B5%E8%84%91%E7%AB%AF%E9%92%89%E9%92%89%E9%83%A8%E5%88%86%E6%95%B0%E6%8D%AE%E7%BC%93%E5%AD%98%E8%B7%AF%E5%BE%84-junlin623/" data-id="clhrwf8jl0020eksz17dj7yxb" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-递增三元组-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/%E9%80%92%E5%A2%9E%E4%B8%89%E5%85%83%E7%BB%84-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.158Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17031547.html">https://www.cnblogs.com/junlin623/p/17031547.html</a></p>
<hr>
<p>title: ‘递增三元组-junlin623’<br>date: 2023-01-11 18:42:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>给定三个整数数组</p>
<p>$A&#x3D;[A_1,A_2,…A_N],$<br>$B&#x3D;[B_1,B_2,…B_N],$<br>$C&#x3D;[C_1,C_2,…C_N],$</p>
<p>请你统计有多少个三元组 (i,j,k) 满足：</p>
<p>$1 ≤ i,j,k ≤ N$<br>$A_i &lt; B_j &lt; C_k$<br>输入格式<br>第一行包含一个整数 N。</p>
<p>第二行包含 N 个整数 $A_1,A_2,…A_N。$</p>
<p>第三行包含 N 个整数 $B_1,B_2,…B_N。$</p>
<p>第四行包含 N 个整数 $C_1,C_2,…C_N。$</p>
<p>输出格式<br>一个整数表示答案。</p>
<p>数据范围<br>$1 ≤ N ≤ 10^5,$<br>$0 ≤ A_i,B_i,C_i ≤ 10^5$<br>输入样例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">1 1 1</span><br><span class="line">2 2 2</span><br><span class="line">3 3 3</span><br></pre></td></tr></table></figure>
<p>输出样例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">27</span><br></pre></td></tr></table></figure>


<h4 id="方法1-排序-二分："><a href="#方法1-排序-二分：" class="headerlink" title="方法1. 排序+二分："></a>方法1. 排序+二分：</h4><p>将三个数组从小到大排序，枚举中间的数字也就是B[j], 在数组A中找到第一个大于等于B[j]的下标x, 在数组C中找到第一个大于B[j]的下标y, </p>
<p>这个时候需要求出A数组中小于B[j]的数量，C数组中大于B[j]的数量; 由于我们用二分求出了下标，求数量就很简单了,(这一步的求法取决于数组下标从0开始还是从1开始)，我这里使用的是1base，所以数组A中小于B[j]的数量是(i-1) , 数组C中大于B[j]的数量是 (n-j+1), 运用乘法原理相乘累加进答案</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> a[N], b[N], c[N], n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;c[i]);</span><br><span class="line">    <span class="built_in">sort</span>(a+<span class="number">1</span>,a+<span class="number">1</span>+n);<span class="built_in">sort</span>(b+<span class="number">1</span>,b+<span class="number">1</span>+n);<span class="built_in">sort</span>(c+<span class="number">1</span>,c+<span class="number">1</span>+n);</span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(_,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = b[_];</span><br><span class="line">        <span class="type">int</span> i = <span class="built_in">lower_bound</span>(a+<span class="number">1</span>,a+<span class="number">1</span>+n,x) - a;</span><br><span class="line">        <span class="type">int</span> j =  <span class="built_in">upper_bound</span>(c+<span class="number">1</span>,c+<span class="number">1</span>+n,x) - c;</span><br><span class="line">        res += <span class="number">1ll</span>*(i<span class="number">-1</span>)*(n-j+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//printf(&quot;%d %d\n&quot;, i, j);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="方法2-前缀和"><a href="#方法2-前缀和" class="headerlink" title="方法2. 前缀和"></a>方法2. 前缀和</h4><p>用前缀和来求一个数组中小于某个数的个数和大于某个数的个数（这种做法与<strong>数值</strong>范围有关） 空间换时间</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> a[N], b[N], c[N], n;</span><br><span class="line">ll sa[N], sc[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]), a[i]++;</span><br><span class="line">        sa[a[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]), b[i]++;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;c[i]), c[i]++;</span><br><span class="line">        sc[c[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,N) &#123;</span><br><span class="line">        sa[i] += sa[i<span class="number">-1</span>];</span><br><span class="line">        sc[i] += sc[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(_,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = b[_];</span><br><span class="line">        res += <span class="number">1ll</span>*(sa[x<span class="number">-1</span>]*(n-sc[x]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">```https:<span class="comment">//www.cnblogs.com/junlin623/p/17031547.html</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: <span class="string">&#x27;递增三元组-junlin623&#x27;</span></span><br><span class="line">date: <span class="number">2023</span><span class="number">-01</span><span class="number">-11</span> <span class="number">18</span>:<span class="number">42</span>:<span class="number">00</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;meta name = <span class="string">&quot;referrer&quot;</span> content = <span class="string">&quot;no-referrer&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">给定三个整数数组</span><br><span class="line"></span><br><span class="line">$A=[A_1,A_2,…A_N],$</span><br><span class="line">$B=[B_1,B_2,…B_N],$</span><br><span class="line">$C=[C_1,C_2,…C_N],$</span><br><span class="line"></span><br><span class="line">请你统计有多少个三元组 (i,j,k) 满足：</span><br><span class="line"></span><br><span class="line">$<span class="number">1</span> ≤ i,j,k ≤ N$</span><br><span class="line">$A_i &lt; B_j &lt; C_k$</span><br><span class="line">输入格式</span><br><span class="line">第一行包含一个整数 N。</span><br><span class="line"></span><br><span class="line">第二行包含 N 个整数 $A_1,A_2,…A_N。$</span><br><span class="line"></span><br><span class="line">第三行包含 N 个整数 $B_1,B_2,…B_N。$</span><br><span class="line"></span><br><span class="line">第四行包含 N 个整数 $C_1,C_2,…C_N。$</span><br><span class="line"></span><br><span class="line">输出格式</span><br><span class="line">一个整数表示答案。</span><br><span class="line"></span><br><span class="line">数据范围</span><br><span class="line">$<span class="number">1</span> ≤ N ≤ <span class="number">10</span>^<span class="number">5</span>,$</span><br><span class="line">$<span class="number">0</span> ≤ A_i,B_i,C_i ≤ <span class="number">10</span>^<span class="number">5</span>$</span><br><span class="line">输入样例：</span><br></pre></td></tr></table></figure>
<p>3<br>1 1 1<br>2 2 2<br>3 3 3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输出样例：</span><br></pre></td></tr></table></figure>
<p>27</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 方法1. 排序+二分：</span><br><span class="line"></span><br><span class="line">将三个数组从小到大排序，枚举中间的数字也就是B[j], 在数组A中找到第一个大于等于B[j]的下标x, 在数组C中找到第一个大于B[j]的下标y, </span><br><span class="line"></span><br><span class="line">这个时候需要求出A数组中小于B[j]的数量，C数组中大于B[j]的数量; 由于我们用二分求出了下标，求数量就很简单了,(这一步的求法取决于数组下标从0开始还是从1开始)，我这里使用的是1base，所以数组A中小于B[j]的数量是(i-1) , 数组C中大于B[j]的数量是 (n-j+1), 运用乘法原理相乘累加进答案</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define rep(i,a,b) for(int i = a;i &lt; b;i++)</span><br><span class="line">typedef long long ll;</span><br><span class="line"></span><br><span class="line">const int N = 100010;</span><br><span class="line">int a[N], b[N], c[N], n;</span><br><span class="line">int main() &#123;</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;n);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;a[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;b[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;c[i]);</span><br><span class="line">    sort(a+1,a+1+n);sort(b+1,b+1+n);sort(c+1,c+1+n);</span><br><span class="line">    ll res = 0;</span><br><span class="line">    rep(_,1,n+1) &#123;</span><br><span class="line">        int x = b[_];</span><br><span class="line">        int i = lower_bound(a+1,a+1+n,x) - a;</span><br><span class="line">        int j =  upper_bound(c+1,c+1+n,x) - c;</span><br><span class="line">        res += 1ll*(i-1)*(n-j+1);</span><br><span class="line">        //printf(&quot;%d %d\n&quot;, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%lld\n&quot;, res);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="方法2-前缀和-1"><a href="#方法2-前缀和-1" class="headerlink" title="方法2. 前缀和"></a>方法2. 前缀和</h4><p>用前缀和来求一个数组中小于某个数的个数和大于某个数的个数（这种做法与<strong>数值</strong>范围有关） 空间换时间</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> a[N], b[N], c[N], n;</span><br><span class="line">ll sa[N], sc[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]), a[i]++;</span><br><span class="line">        sa[a[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]), b[i]++;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;c[i]), c[i]++;</span><br><span class="line">        sc[c[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,N) &#123;</span><br><span class="line">        sa[i] += sa[i<span class="number">-1</span>];</span><br><span class="line">        sc[i] += sc[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(_,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = b[_];</span><br><span class="line">        res += <span class="number">1ll</span>*(sa[x<span class="number">-1</span>]*(n-sc[x]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">```https:<span class="comment">//www.cnblogs.com/junlin623/p/17031547.html</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: <span class="string">&#x27;递增三元组-junlin623&#x27;</span></span><br><span class="line">date: <span class="number">2023</span><span class="number">-01</span><span class="number">-11</span> <span class="number">18</span>:<span class="number">42</span>:<span class="number">00</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;meta name = <span class="string">&quot;referrer&quot;</span> content = <span class="string">&quot;no-referrer&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">给定三个整数数组</span><br><span class="line"></span><br><span class="line">$A=[A_1,A_2,…A_N],$</span><br><span class="line">$B=[B_1,B_2,…B_N],$</span><br><span class="line">$C=[C_1,C_2,…C_N],$</span><br><span class="line"></span><br><span class="line">请你统计有多少个三元组 (i,j,k) 满足：</span><br><span class="line"></span><br><span class="line">$<span class="number">1</span> ≤ i,j,k ≤ N$</span><br><span class="line">$A_i &lt; B_j &lt; C_k$</span><br><span class="line">输入格式</span><br><span class="line">第一行包含一个整数 N。</span><br><span class="line"></span><br><span class="line">第二行包含 N 个整数 $A_1,A_2,…A_N。$</span><br><span class="line"></span><br><span class="line">第三行包含 N 个整数 $B_1,B_2,…B_N。$</span><br><span class="line"></span><br><span class="line">第四行包含 N 个整数 $C_1,C_2,…C_N。$</span><br><span class="line"></span><br><span class="line">输出格式</span><br><span class="line">一个整数表示答案。</span><br><span class="line"></span><br><span class="line">数据范围</span><br><span class="line">$<span class="number">1</span> ≤ N ≤ <span class="number">10</span>^<span class="number">5</span>,$</span><br><span class="line">$<span class="number">0</span> ≤ A_i,B_i,C_i ≤ <span class="number">10</span>^<span class="number">5</span>$</span><br><span class="line">输入样例：</span><br></pre></td></tr></table></figure>
<p>3<br>1 1 1<br>2 2 2<br>3 3 3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输出样例：</span><br></pre></td></tr></table></figure>
<p>27</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 方法1. 排序+二分：</span><br><span class="line"></span><br><span class="line">将三个数组从小到大排序，枚举中间的数字也就是B[j], 在数组A中找到第一个大于等于B[j]的下标x, 在数组C中找到第一个大于B[j]的下标y, </span><br><span class="line"></span><br><span class="line">这个时候需要求出A数组中小于B[j]的数量，C数组中大于B[j]的数量; 由于我们用二分求出了下标，求数量就很简单了,(这一步的求法取决于数组下标从0开始还是从1开始)，我这里使用的是1base，所以数组A中小于B[j]的数量是(i-1) , 数组C中大于B[j]的数量是 (n-j+1), 运用乘法原理相乘累加进答案</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define rep(i,a,b) for(int i = a;i &lt; b;i++)</span><br><span class="line">typedef long long ll;</span><br><span class="line"></span><br><span class="line">const int N = 100010;</span><br><span class="line">int a[N], b[N], c[N], n;</span><br><span class="line">int main() &#123;</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;n);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;a[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;b[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;c[i]);</span><br><span class="line">    sort(a+1,a+1+n);sort(b+1,b+1+n);sort(c+1,c+1+n);</span><br><span class="line">    ll res = 0;</span><br><span class="line">    rep(_,1,n+1) &#123;</span><br><span class="line">        int x = b[_];</span><br><span class="line">        int i = lower_bound(a+1,a+1+n,x) - a;</span><br><span class="line">        int j =  upper_bound(c+1,c+1+n,x) - c;</span><br><span class="line">        res += 1ll*(i-1)*(n-j+1);</span><br><span class="line">        //printf(&quot;%d %d\n&quot;, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%lld\n&quot;, res);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="方法2-前缀和-2"><a href="#方法2-前缀和-2" class="headerlink" title="方法2. 前缀和"></a>方法2. 前缀和</h4><p>用前缀和来求一个数组中小于某个数的个数和大于某个数的个数（这种做法与<strong>数值</strong>范围有关） 空间换时间</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> a[N], b[N], c[N], n;</span><br><span class="line">ll sa[N], sc[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]), a[i]++;</span><br><span class="line">        sa[a[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]), b[i]++;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;c[i]), c[i]++;</span><br><span class="line">        sc[c[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,N) &#123;</span><br><span class="line">        sa[i] += sa[i<span class="number">-1</span>];</span><br><span class="line">        sc[i] += sc[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(_,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = b[_];</span><br><span class="line">        res += <span class="number">1ll</span>*(sa[x<span class="number">-1</span>]*(n-sc[x]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">```https:<span class="comment">//www.cnblogs.com/junlin623/p/17031547.html</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: <span class="string">&#x27;递增三元组-junlin623&#x27;</span></span><br><span class="line">date: <span class="number">2023</span><span class="number">-01</span><span class="number">-11</span> <span class="number">18</span>:<span class="number">42</span>:<span class="number">00</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;meta name = <span class="string">&quot;referrer&quot;</span> content = <span class="string">&quot;no-referrer&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">给定三个整数数组</span><br><span class="line"></span><br><span class="line">$A=[A_1,A_2,…A_N],$</span><br><span class="line">$B=[B_1,B_2,…B_N],$</span><br><span class="line">$C=[C_1,C_2,…C_N],$</span><br><span class="line"></span><br><span class="line">请你统计有多少个三元组 (i,j,k) 满足：</span><br><span class="line"></span><br><span class="line">$<span class="number">1</span> ≤ i,j,k ≤ N$</span><br><span class="line">$A_i &lt; B_j &lt; C_k$</span><br><span class="line">输入格式</span><br><span class="line">第一行包含一个整数 N。</span><br><span class="line"></span><br><span class="line">第二行包含 N 个整数 $A_1,A_2,…A_N。$</span><br><span class="line"></span><br><span class="line">第三行包含 N 个整数 $B_1,B_2,…B_N。$</span><br><span class="line"></span><br><span class="line">第四行包含 N 个整数 $C_1,C_2,…C_N。$</span><br><span class="line"></span><br><span class="line">输出格式</span><br><span class="line">一个整数表示答案。</span><br><span class="line"></span><br><span class="line">数据范围</span><br><span class="line">$<span class="number">1</span> ≤ N ≤ <span class="number">10</span>^<span class="number">5</span>,$</span><br><span class="line">$<span class="number">0</span> ≤ A_i,B_i,C_i ≤ <span class="number">10</span>^<span class="number">5</span>$</span><br><span class="line">输入样例：</span><br></pre></td></tr></table></figure>
<p>3<br>1 1 1<br>2 2 2<br>3 3 3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输出样例：</span><br></pre></td></tr></table></figure>
<p>27</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 方法1. 排序+二分：</span><br><span class="line"></span><br><span class="line">将三个数组从小到大排序，枚举中间的数字也就是B[j], 在数组A中找到第一个大于等于B[j]的下标x, 在数组C中找到第一个大于B[j]的下标y, </span><br><span class="line"></span><br><span class="line">这个时候需要求出A数组中小于B[j]的数量，C数组中大于B[j]的数量; 由于我们用二分求出了下标，求数量就很简单了,(这一步的求法取决于数组下标从0开始还是从1开始)，我这里使用的是1base，所以数组A中小于B[j]的数量是(i-1) , 数组C中大于B[j]的数量是 (n-j+1), 运用乘法原理相乘累加进答案</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define rep(i,a,b) for(int i = a;i &lt; b;i++)</span><br><span class="line">typedef long long ll;</span><br><span class="line"></span><br><span class="line">const int N = 100010;</span><br><span class="line">int a[N], b[N], c[N], n;</span><br><span class="line">int main() &#123;</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;n);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;a[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;b[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;c[i]);</span><br><span class="line">    sort(a+1,a+1+n);sort(b+1,b+1+n);sort(c+1,c+1+n);</span><br><span class="line">    ll res = 0;</span><br><span class="line">    rep(_,1,n+1) &#123;</span><br><span class="line">        int x = b[_];</span><br><span class="line">        int i = lower_bound(a+1,a+1+n,x) - a;</span><br><span class="line">        int j =  upper_bound(c+1,c+1+n,x) - c;</span><br><span class="line">        res += 1ll*(i-1)*(n-j+1);</span><br><span class="line">        //printf(&quot;%d %d\n&quot;, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%lld\n&quot;, res);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="方法2-前缀和-3"><a href="#方法2-前缀和-3" class="headerlink" title="方法2. 前缀和"></a>方法2. 前缀和</h4><p>用前缀和来求一个数组中小于某个数的个数和大于某个数的个数（这种做法与<strong>数值</strong>范围有关） 空间换时间</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> a[N], b[N], c[N], n;</span><br><span class="line">ll sa[N], sc[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]), a[i]++;</span><br><span class="line">        sa[a[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]), b[i]++;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;c[i]), c[i]++;</span><br><span class="line">        sc[c[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,N) &#123;</span><br><span class="line">        sa[i] += sa[i<span class="number">-1</span>];</span><br><span class="line">        sc[i] += sc[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(_,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = b[_];</span><br><span class="line">        res += <span class="number">1ll</span>*(sa[x<span class="number">-1</span>]*(n-sc[x]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">```https:<span class="comment">//www.cnblogs.com/junlin623/p/17031547.html</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: <span class="string">&#x27;递增三元组-junlin623&#x27;</span></span><br><span class="line">date: <span class="number">2023</span><span class="number">-01</span><span class="number">-11</span> <span class="number">18</span>:<span class="number">42</span>:<span class="number">00</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;meta name = <span class="string">&quot;referrer&quot;</span> content = <span class="string">&quot;no-referrer&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">给定三个整数数组</span><br><span class="line"></span><br><span class="line">$A=[A_1,A_2,…A_N],$</span><br><span class="line">$B=[B_1,B_2,…B_N],$</span><br><span class="line">$C=[C_1,C_2,…C_N],$</span><br><span class="line"></span><br><span class="line">请你统计有多少个三元组 (i,j,k) 满足：</span><br><span class="line"></span><br><span class="line">$<span class="number">1</span> ≤ i,j,k ≤ N$</span><br><span class="line">$A_i &lt; B_j &lt; C_k$</span><br><span class="line">输入格式</span><br><span class="line">第一行包含一个整数 N。</span><br><span class="line"></span><br><span class="line">第二行包含 N 个整数 $A_1,A_2,…A_N。$</span><br><span class="line"></span><br><span class="line">第三行包含 N 个整数 $B_1,B_2,…B_N。$</span><br><span class="line"></span><br><span class="line">第四行包含 N 个整数 $C_1,C_2,…C_N。$</span><br><span class="line"></span><br><span class="line">输出格式</span><br><span class="line">一个整数表示答案。</span><br><span class="line"></span><br><span class="line">数据范围</span><br><span class="line">$<span class="number">1</span> ≤ N ≤ <span class="number">10</span>^<span class="number">5</span>,$</span><br><span class="line">$<span class="number">0</span> ≤ A_i,B_i,C_i ≤ <span class="number">10</span>^<span class="number">5</span>$</span><br><span class="line">输入样例：</span><br></pre></td></tr></table></figure>
<p>3<br>1 1 1<br>2 2 2<br>3 3 3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输出样例：</span><br></pre></td></tr></table></figure>
<p>27</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 方法1. 排序+二分：</span><br><span class="line"></span><br><span class="line">将三个数组从小到大排序，枚举中间的数字也就是B[j], 在数组A中找到第一个大于等于B[j]的下标x, 在数组C中找到第一个大于B[j]的下标y, </span><br><span class="line"></span><br><span class="line">这个时候需要求出A数组中小于B[j]的数量，C数组中大于B[j]的数量; 由于我们用二分求出了下标，求数量就很简单了,(这一步的求法取决于数组下标从0开始还是从1开始)，我这里使用的是1base，所以数组A中小于B[j]的数量是(i-1) , 数组C中大于B[j]的数量是 (n-j+1), 运用乘法原理相乘累加进答案</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define rep(i,a,b) for(int i = a;i &lt; b;i++)</span><br><span class="line">typedef long long ll;</span><br><span class="line"></span><br><span class="line">const int N = 100010;</span><br><span class="line">int a[N], b[N], c[N], n;</span><br><span class="line">int main() &#123;</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;n);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;a[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;b[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;c[i]);</span><br><span class="line">    sort(a+1,a+1+n);sort(b+1,b+1+n);sort(c+1,c+1+n);</span><br><span class="line">    ll res = 0;</span><br><span class="line">    rep(_,1,n+1) &#123;</span><br><span class="line">        int x = b[_];</span><br><span class="line">        int i = lower_bound(a+1,a+1+n,x) - a;</span><br><span class="line">        int j =  upper_bound(c+1,c+1+n,x) - c;</span><br><span class="line">        res += 1ll*(i-1)*(n-j+1);</span><br><span class="line">        //printf(&quot;%d %d\n&quot;, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%lld\n&quot;, res);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="方法2-前缀和-4"><a href="#方法2-前缀和-4" class="headerlink" title="方法2. 前缀和"></a>方法2. 前缀和</h4><p>用前缀和来求一个数组中小于某个数的个数和大于某个数的个数（这种做法与<strong>数值</strong>范围有关） 空间换时间</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> a[N], b[N], c[N], n;</span><br><span class="line">ll sa[N], sc[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]), a[i]++;</span><br><span class="line">        sa[a[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]), b[i]++;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;c[i]), c[i]++;</span><br><span class="line">        sc[c[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,N) &#123;</span><br><span class="line">        sa[i] += sa[i<span class="number">-1</span>];</span><br><span class="line">        sc[i] += sc[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(_,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = b[_];</span><br><span class="line">        res += <span class="number">1ll</span>*(sa[x<span class="number">-1</span>]*(n-sc[x]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">```https:<span class="comment">//www.cnblogs.com/junlin623/p/17031547.html</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: <span class="string">&#x27;递增三元组-junlin623&#x27;</span></span><br><span class="line">date: <span class="number">2023</span><span class="number">-01</span><span class="number">-11</span> <span class="number">18</span>:<span class="number">42</span>:<span class="number">00</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;meta name = <span class="string">&quot;referrer&quot;</span> content = <span class="string">&quot;no-referrer&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">给定三个整数数组</span><br><span class="line"></span><br><span class="line">$A=[A_1,A_2,…A_N],$</span><br><span class="line">$B=[B_1,B_2,…B_N],$</span><br><span class="line">$C=[C_1,C_2,…C_N],$</span><br><span class="line"></span><br><span class="line">请你统计有多少个三元组 (i,j,k) 满足：</span><br><span class="line"></span><br><span class="line">$<span class="number">1</span> ≤ i,j,k ≤ N$</span><br><span class="line">$A_i &lt; B_j &lt; C_k$</span><br><span class="line">输入格式</span><br><span class="line">第一行包含一个整数 N。</span><br><span class="line"></span><br><span class="line">第二行包含 N 个整数 $A_1,A_2,…A_N。$</span><br><span class="line"></span><br><span class="line">第三行包含 N 个整数 $B_1,B_2,…B_N。$</span><br><span class="line"></span><br><span class="line">第四行包含 N 个整数 $C_1,C_2,…C_N。$</span><br><span class="line"></span><br><span class="line">输出格式</span><br><span class="line">一个整数表示答案。</span><br><span class="line"></span><br><span class="line">数据范围</span><br><span class="line">$<span class="number">1</span> ≤ N ≤ <span class="number">10</span>^<span class="number">5</span>,$</span><br><span class="line">$<span class="number">0</span> ≤ A_i,B_i,C_i ≤ <span class="number">10</span>^<span class="number">5</span>$</span><br><span class="line">输入样例：</span><br></pre></td></tr></table></figure>
<p>3<br>1 1 1<br>2 2 2<br>3 3 3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输出样例：</span><br></pre></td></tr></table></figure>
<p>27</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 方法1. 排序+二分：</span><br><span class="line"></span><br><span class="line">将三个数组从小到大排序，枚举中间的数字也就是B[j], 在数组A中找到第一个大于等于B[j]的下标x, 在数组C中找到第一个大于B[j]的下标y, </span><br><span class="line"></span><br><span class="line">这个时候需要求出A数组中小于B[j]的数量，C数组中大于B[j]的数量; 由于我们用二分求出了下标，求数量就很简单了,(这一步的求法取决于数组下标从0开始还是从1开始)，我这里使用的是1base，所以数组A中小于B[j]的数量是(i-1) , 数组C中大于B[j]的数量是 (n-j+1), 运用乘法原理相乘累加进答案</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define rep(i,a,b) for(int i = a;i &lt; b;i++)</span><br><span class="line">typedef long long ll;</span><br><span class="line"></span><br><span class="line">const int N = 100010;</span><br><span class="line">int a[N], b[N], c[N], n;</span><br><span class="line">int main() &#123;</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;n);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;a[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;b[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;c[i]);</span><br><span class="line">    sort(a+1,a+1+n);sort(b+1,b+1+n);sort(c+1,c+1+n);</span><br><span class="line">    ll res = 0;</span><br><span class="line">    rep(_,1,n+1) &#123;</span><br><span class="line">        int x = b[_];</span><br><span class="line">        int i = lower_bound(a+1,a+1+n,x) - a;</span><br><span class="line">        int j =  upper_bound(c+1,c+1+n,x) - c;</span><br><span class="line">        res += 1ll*(i-1)*(n-j+1);</span><br><span class="line">        //printf(&quot;%d %d\n&quot;, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%lld\n&quot;, res);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="方法2-前缀和-5"><a href="#方法2-前缀和-5" class="headerlink" title="方法2. 前缀和"></a>方法2. 前缀和</h4><p>用前缀和来求一个数组中小于某个数的个数和大于某个数的个数（这种做法与<strong>数值</strong>范围有关） 空间换时间</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> a[N], b[N], c[N], n;</span><br><span class="line">ll sa[N], sc[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]), a[i]++;</span><br><span class="line">        sa[a[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]), b[i]++;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;c[i]), c[i]++;</span><br><span class="line">        sc[c[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,N) &#123;</span><br><span class="line">        sa[i] += sa[i<span class="number">-1</span>];</span><br><span class="line">        sc[i] += sc[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(_,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = b[_];</span><br><span class="line">        res += <span class="number">1ll</span>*(sa[x<span class="number">-1</span>]*(n-sc[x]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">```https:<span class="comment">//www.cnblogs.com/junlin623/p/17031547.html</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: <span class="string">&#x27;递增三元组-junlin623&#x27;</span></span><br><span class="line">date: <span class="number">2023</span><span class="number">-01</span><span class="number">-11</span> <span class="number">18</span>:<span class="number">42</span>:<span class="number">00</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;meta name = <span class="string">&quot;referrer&quot;</span> content = <span class="string">&quot;no-referrer&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">给定三个整数数组</span><br><span class="line"></span><br><span class="line">$A=[A_1,A_2,…A_N],$</span><br><span class="line">$B=[B_1,B_2,…B_N],$</span><br><span class="line">$C=[C_1,C_2,…C_N],$</span><br><span class="line"></span><br><span class="line">请你统计有多少个三元组 (i,j,k) 满足：</span><br><span class="line"></span><br><span class="line">$<span class="number">1</span> ≤ i,j,k ≤ N$</span><br><span class="line">$A_i &lt; B_j &lt; C_k$</span><br><span class="line">输入格式</span><br><span class="line">第一行包含一个整数 N。</span><br><span class="line"></span><br><span class="line">第二行包含 N 个整数 $A_1,A_2,…A_N。$</span><br><span class="line"></span><br><span class="line">第三行包含 N 个整数 $B_1,B_2,…B_N。$</span><br><span class="line"></span><br><span class="line">第四行包含 N 个整数 $C_1,C_2,…C_N。$</span><br><span class="line"></span><br><span class="line">输出格式</span><br><span class="line">一个整数表示答案。</span><br><span class="line"></span><br><span class="line">数据范围</span><br><span class="line">$<span class="number">1</span> ≤ N ≤ <span class="number">10</span>^<span class="number">5</span>,$</span><br><span class="line">$<span class="number">0</span> ≤ A_i,B_i,C_i ≤ <span class="number">10</span>^<span class="number">5</span>$</span><br><span class="line">输入样例：</span><br></pre></td></tr></table></figure>
<p>3<br>1 1 1<br>2 2 2<br>3 3 3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输出样例：</span><br></pre></td></tr></table></figure>
<p>27</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 方法1. 排序+二分：</span><br><span class="line"></span><br><span class="line">将三个数组从小到大排序，枚举中间的数字也就是B[j], 在数组A中找到第一个大于等于B[j]的下标x, 在数组C中找到第一个大于B[j]的下标y, </span><br><span class="line"></span><br><span class="line">这个时候需要求出A数组中小于B[j]的数量，C数组中大于B[j]的数量; 由于我们用二分求出了下标，求数量就很简单了,(这一步的求法取决于数组下标从0开始还是从1开始)，我这里使用的是1base，所以数组A中小于B[j]的数量是(i-1) , 数组C中大于B[j]的数量是 (n-j+1), 运用乘法原理相乘累加进答案</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define rep(i,a,b) for(int i = a;i &lt; b;i++)</span><br><span class="line">typedef long long ll;</span><br><span class="line"></span><br><span class="line">const int N = 100010;</span><br><span class="line">int a[N], b[N], c[N], n;</span><br><span class="line">int main() &#123;</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;n);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;a[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;b[i]);</span><br><span class="line">    rep(i,1,n+1) scanf(&quot;%d&quot;, &amp;c[i]);</span><br><span class="line">    sort(a+1,a+1+n);sort(b+1,b+1+n);sort(c+1,c+1+n);</span><br><span class="line">    ll res = 0;</span><br><span class="line">    rep(_,1,n+1) &#123;</span><br><span class="line">        int x = b[_];</span><br><span class="line">        int i = lower_bound(a+1,a+1+n,x) - a;</span><br><span class="line">        int j =  upper_bound(c+1,c+1+n,x) - c;</span><br><span class="line">        res += 1ll*(i-1)*(n-j+1);</span><br><span class="line">        //printf(&quot;%d %d\n&quot;, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%lld\n&quot;, res);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="方法2-前缀和-6"><a href="#方法2-前缀和-6" class="headerlink" title="方法2. 前缀和"></a>方法2. 前缀和</h4><p>用前缀和来求一个数组中小于某个数的个数和大于某个数的个数（这种做法与<strong>数值</strong>范围有关） 空间换时间</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(i,a,b) for(int i = a;i &lt; b;i++)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> a[N], b[N], c[N], n;</span><br><span class="line">ll sa[N], sc[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]), a[i]++;</span><br><span class="line">        sa[a[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]), b[i]++;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;c[i]), c[i]++;</span><br><span class="line">        sc[c[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">rep</span>(i,<span class="number">1</span>,N) &#123;</span><br><span class="line">        sa[i] += sa[i<span class="number">-1</span>];</span><br><span class="line">        sc[i] += sc[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">rep</span>(_,<span class="number">1</span>,n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = b[_];</span><br><span class="line">        res += <span class="number">1ll</span>*(sa[x<span class="number">-1</span>]*(n-sc[x]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/%E9%80%92%E5%A2%9E%E4%B8%89%E5%85%83%E7%BB%84-junlin623/" data-id="clhrwf8jq0028eksz66xqeqhq" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-阿里云服务器上的数据库被删了😨😨-junlin623" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/18/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A2%AB%E5%88%A0%E4%BA%86%F0%9F%98%A8%F0%9F%98%A8-junlin623/" class="article-date">
  <time class="dt-published" datetime="2023-05-17T16:09:35.156Z" itemprop="datePublished">2023-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/junlin623/p/17159336.html">https://www.cnblogs.com/junlin623/p/17159336.html</a></p>
<hr>
<p>title: ‘阿里云服务器上的数据库被删了😨😨-junlin623’<br>date: 2023-02-27 13:16:00</p>
<hr>
<meta name = "referrer" content = "no-referrer" />



<p>近期访问我的网站的时候登录频繁报错，到主机上查看了一下日志才发现系统找不到数据库，</p>
<p>慌张的我赶紧连接了一下数据库，发现真的是数据库被黑了，只留下了我看不懂的英文hh</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202302/2935791-20230227112951526-1982470885.png"></p>
<p>原因可能就是黑客查看主机上开放了3306端口，通过破解密码进入，删库删日志，然后跑路</p>
<p>在此还是提醒大家的数据库不要设置成太简单的密码，root（比如我hh），123等等，很容易被暴力破解</p>
<p>同时，我们有时候为了远程访问数据库会把 root 用户的使用权限分配给所有的ip，</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202302/2935791-20230227113320049-678655054.png"></p>
<p>这样就给黑客留下了很多攻击的空间，所以还是尽量将root用户的host选项设置成几个我们常使用的ip</p>
<hr>
<p>既然已经发生了，就要想办法恢复数据库</p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202302/2935791-20230227131148595-1405448073.png"></p>
<p><img src="https://img2023.cnblogs.com/blog/2935791/202302/2935791-20230227131533615-1076262009.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/18/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A2%AB%E5%88%A0%E4%BA%86%F0%9F%98%A8%F0%9F%98%A8-junlin623/" data-id="clhrwf8jr002aeksz99p135q4" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/18/%E7%9B%B4%E8%BF%9E%E8%B7%AF%E7%94%B1%E8%A1%A8%E9%A1%B9%E8%A7%A3%E6%9E%90-junlin623/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/05/18/%E6%95%B4%E6%95%B0%E5%88%92%E5%88%86%E9%97%AE%E9%A2%98-junlin623/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/05/18/%E5%8E%9F%E7%94%9F%E6%96%B9%E5%BC%8F%E9%83%A8%E7%BD%B2JavaWeb%E9%A1%B9%E7%9B%AE%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA-junlin623/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/05/18/%E5%8E%9F%E6%9D%A5%E6%98%AFvmware-hostd%E7%A8%8B%E5%BA%8F%E5%8D%A0%E7%94%A8%E4%BA%86443%E7%AB%AF%E5%8F%A3-junlin623/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/05/18/%E5%AD%A6%E7%94%9F%E5%8F%AF%E4%BB%A5%E7%99%BD%E5%AB%96%E9%98%BF%E9%87%8C%E4%BA%91ECS%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8D%8A%E5%B9%B4~~-junlin623/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>